var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);i.prototype=t.prototype,e.prototype=new i},__awaiter=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{h(n.next(e))}catch(t){o(t)}}function s(e){try{h(n["throw"](e))}catch(t){o(t)}}function h(e){e.done?r(e.value):new i(function(t){t(e.value)}).then(a,s)}h((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;h;)try{if(r=1,o&&(a=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,o=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(a=h.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){h.label=i[1];break}if(6===i[0]&&h.label<a[1]){h.label=a[1],a=i;break}if(a&&h.label<a[2]){h.label=a[2],h.ops.push(i);break}a[2]&&h.ops.pop(),h.trys.pop();continue}i=t.call(e,h)}catch(n){i=[6,n],o=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,a,s,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},GoodsPay=function(e){function t(){var t=e.call(this)||this;return t.top=0,t.left=0,t.right=0,t.bottom=0,t.skinName="resource/garden_skin/miner/GoodsPay.exml",t.usePayinput||(t.usePayinput=new UsePayInput,t.use_pay_num.addChild(t.usePayinput)),t.data=Main.Shared().lang_config,t.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseGoodsPay,t),t.use_pay_add.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPayAddClick,t),t.use_pay_dec.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPayDecClick,t),t.usePayinput.text_type.addEventListener(egret.TouchEvent.CHANGE,t.reCount,t),t.usePayinput.text_type.addEventListener(egret.Event.FOCUS_OUT,t.reCount,t),t.use_pay_dete.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onGoPay,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.onCloseGoodsPay=function(){this.goodsPay.visible=!1,this.theNum=null,this.usePayinput.text_type.text="1",GoodsIntro.Shared().props.visible=!0},t.prototype.onShowGoodsPay=function(e,t){var i=this;this.key=t,this.toolInfo=e,Common.Shared().loadImg(this.toolInfo.icon).then(function(e){i.use_pay_img.source=e}),console.log(this.toolInfo.id),17==this.toolInfo.id?this.use_pay_bg.source="minerV1_json.clz_jwj _2x":this.use_pay_bg.source="auction_json.baidikuang",this.reCount(),this.goodsPay.visible=!0},t.prototype.onGoPay=function(){var e=this;Working.Shared().wait.show();var t=parseInt(this.usePayinput.text_type.text),i=new Params("miner/tool/put_order"),n=i.mergeDataByJsonStr({toolId:this.toolInfo.id,num:t});Working.Shared().ws.sendData({data:n,receiveCallBack:function(i){if(Working.Shared().wait.hide(),0==i.code){var n=i.data,r=MinerGoods.Shared().toolList[e.key].num;e.theNum=r+t,Common.Shared().secondPwd(e.afterPwd,e.goodsPay,!0,n)}else Working.Shared().tips.showTips(i.msg)}})},t.prototype.afterPwd=function(e,i){Working.Shared().wait.show();var n=hex_md5(e),r=new Params("pay/confirm_pay"),o=r.mergeDataByJsonStr({orderId:i.orderId,payOrder:i.payOrder,payType:i.payType,pinCode:n});Working.Shared().ws.sendData({data:o,receiveCallBack:function(e){Working.Shared().wait.hide(),0==e.code?(MinerGoods.Shared().toolList[t.Shared().key].num=t.Shared().theNum,MinerGoods.Shared().toolArr[t.Shared().key].list_num.text="x"+t.Shared().theNum,t.Shared().onCloseGoodsPay(),GoodsIntro.Shared().onUseTool()):Working.Shared().tips.showTips(e.msg)}})},t.prototype.onPayAddClick=function(){this.usePayinput.addClick(),this.reCount()},t.prototype.onPayDecClick=function(){this.usePayinput.decClick(),this.reCount()},t.prototype.reCount=function(){var e="";e=20==this.toolInfo.id?this.data.usePayTs.geb_go_pay:this.data.usePayTs.to_go_pay,""==this.usePayinput.text_type.text?this.use_pay_conf.text=this.data.usePayTs.if_spend+"0"+e:this.use_pay_conf.text=this.data.usePayTs.if_spend+parseInt(this.usePayinput.text_type.text)*parseInt(this.toolInfo.price)+e},t}(eui.ItemRenderer);__reflect(GoodsPay.prototype,"GoodsPay");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var r=RES.getRes(e);r?n(r):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var HttpReq=function(e){function t(){var t=e.call(this)||this;return t.api_domain=localStorage.getItem("api_domain"),t}return __extends(t,e),t.prototype.GET=function(e,t){t&&(t.touchEnabled=!1,t.touchChildren=!1),this.params=new Params(e.url);var i=this.api_domain+e.url,n=Common.Shared().mergeObj(this.params.getParamsByJson(),e.data);i+="?"+Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&");var r=new egret.HttpRequest;r.withCredentials=!0,r.responseType=egret.HttpResponseType.TEXT,r.open(i,egret.HttpMethod.GET),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(),r.addEventListener(egret.Event.COMPLETE,function(i){var n=i.currentTarget;e.success&&(t&&(t.touchEnabled=!0,t.touchChildren=!0),e.success(n.response))},this),r.addEventListener(egret.IOErrorEvent.IO_ERROR,function(){e.error&&(t&&(t.touchEnabled=!0,t.touchChildren=!0),e.error())},this),r.addEventListener(egret.ProgressEvent.PROGRESS,function(){e.progress&&(t&&(t.touchEnabled=!0,t.touchChildren=!0),e.progress())},this)},t.prototype.POST=function(e,t){t&&(t.touchEnabled=!1,t.touchChildren=!1);var i=this.api_domain+e.url;this.params=new Params(e.url);var n=JSON.stringify(Common.Shared().mergeObj(this.params.getParamsByJson(),e.data)),r=new egret.HttpRequest;r.withCredentials=!0,r.responseType=egret.HttpResponseType.TEXT,r.open(i,egret.HttpMethod.POST),r.setRequestHeader("Content-Type","application/json"),r.send(n),r.addEventListener(egret.Event.COMPLETE,function(i){var n=i.currentTarget;e.success&&(t&&(t.touchEnabled=!0,t.touchChildren=!0),e.success(n.response))},this),r.addEventListener(egret.IOErrorEvent.IO_ERROR,function(){e.error&&(t&&(t.touchEnabled=!0,t.touchChildren=!0),e.error())},this),r.addEventListener(egret.ProgressEvent.PROGRESS,function(){e.progress&&(t&&(t.touchEnabled=!0,t.touchChildren=!0),e.progress())},this)},t}(egret.HttpRequest);__reflect(HttpReq.prototype,"HttpReq");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.skinName='<?xml version="1.0" encoding="utf-8"?><e:Skin class="NewFile" width="750" height="1334" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing"><e:Image source="bg_d_png" left="0" right="0" top="0" bottom="0" width="0" height="0"/><e:Group anchorOffsetX="0" anchorOffsetY="0" horizontalCenter="0" verticalCenter="-72"><e:Image source="wutong_json.tree_10_d" scaleX="1" scaleY="1" horizontalCenter="0" verticalCenter="0"/><e:Image source="wutong_json.fruit_m_10_d" scaleX="1" scaleY="1" horizontalCenter="-16" verticalCenter="-133"/></e:Group><e:Group left="0" right="0" anchorOffsetY="0" bottom="147" top="996"><e:Rect right="0" left="0" top="0" bottom="0" fillColor="0x000000" fillAlpha="0.4"/><e:Image source="wutong_json.undercolor" horizontalCenter="0" verticalCenter="0"/><e:Group width="708" height="51" horizontalCenter="0" verticalCenter="0"><e:Image id="prog_bar" source="wutong_json.load_bar" width="0" scaleX="1" scaleY="1" verticalCenter="0.5" left="118" anchorOffsetX="0"/></e:Group><e:Label text="Loading..." anchorOffsetX="0" width="162" anchorOffsetY="0" height="42" fontFamily="HXBNRBJ" size="34" italic="true" verticalCenter="0.5" horizontalCenter="-33"/><e:Label id="percent" text="Label" fontFamily="HXBNRBJ" size="34" height="42" verticalAlign="middle" textAlign="center" anchorOffsetX="0" width="120" horizontalCenter="84" verticalCenter="0.5" italic="true"/></e:Group></e:Skin>',t}return __extends(t,e),t.prototype.createView=function(){this.width=this.stage.stageWidth,this.height=this.stage.stageHeight},t.prototype.onProgress=function(e,t){var i=Math.floor(e/t*100);this.percent.text=i.toString()+"%",this.prog_bar.width=e/t*472},t}(eui.Component);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.loadResource()];case 1:return e.sent(),this.createGameScene(),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,RES.loadGroup("loading")];case 2:return i.sent(),e=new LoadingUI,this.stage.addChild(e),e.createView(),[4,this.loadTheme()];case 3:return i.sent(),[4,RES.loadGroup("wutong",0,e)];case 4:return i.sent(),this.stage.removeChild(e),[3,6];case 5:return t=i.sent(),console.error(t),[3,6];case 6:return[2]}})})},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,i){var n=new eui.Theme("resource/default.thm.json",e.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.createGameScene=function(){return __awaiter(this,void 0,void 0,function(){var e,i;return __generator(this,function(n){switch(n.label){case 0:return e=document.createElement("link"),e.rel="stylesheet",e.type="text/css",e.href="resource/assets/style.css",document.getElementsByTagName("head")[0].appendChild(e),this.getConfig(),[4,this.getMemberInfo()];case 1:return n.sent(),i=localStorage.getItem("lang"),t.Shared().lang="0"==i?"cn":"2"==i?"tcn":"en",t.Shared().lang_config=RES.getRes("lang_"+t.Shared().lang+"_json"),this.addChild(Index.Shared()),[2]}})})},t.prototype.getConfig=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){e=RES.getRes("config_json");for(t in e)localStorage.setItem(t,e[t]);return[2]})})},t.prototype.getMemberInfo=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){return[2,new Promise(function(t,i){try{var n=new egret.HttpRequest;n.withCredentials=!0,n.responseType=egret.HttpResponseType.TEXT,n.open("/index.php",egret.HttpMethod.POST),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(),n.addEventListener(egret.Event.COMPLETE,function(e){var n=e.currentTarget;if(n.response){var r=JSON.parse(n.response);for(var o in r)localStorage.setItem(o,r[o]);t()}else i()},e)}catch(r){i()}})]})})},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},t}(eui.UILayer);__reflect(Main.prototype,"Main");var Params=function(){function e(e){var t=localStorage.getItem("lang");this.lang=t?t:1;var i=localStorage.getItem("uid");this.uid=i?i:1696538,this.action=e;var n=localStorage.getItem("clientType");this.clientType=n?n:0;var r=localStorage.getItem("network");this.network=r?r:1;var o=localStorage.getItem("version");this.version=o?o:"9.9.9";var a=localStorage.getItem("token");this.token=a?a:"f29b9ee1c1405bdbb8fff776972895ed",this.timestamp=(new Date).getTime(),this.uuid=this.timestamp.toString()+Common.Shared().getRndNum(5).toString(),this.params="clientType="+this.clientType+"&lang="+this.lang+"&network="+this.network+"&timestamp="+this.timestamp+"&uid="+this.uid+"&version="+this.version,this.sign=hex_md5(this.params+"token="+this.token+"uuid="+this.uuid+"action="+this.action)}return e.prototype.getParamsByJson=function(){var e={clientType:this.clientType,lang:this.lang,network:this.network,timestamp:this.timestamp,uid:this.uid,version:this.version,sign:this.sign,token:this.token,uuid:this.uuid,action:this.action};return e},e.prototype.mergeDataByJsonStr=function(e){return JSON.stringify(Common.Shared().mergeObj(this.getParamsByJson(),e))},e}();__reflect(Params.prototype,"Params");var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"uid"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,i,n){function r(e){t.call(n,e)}function o(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),i.call(n))}"undefined"!=typeof generateEUI?egret.callLater(function(){t.call(n,generateEUI)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_TEXT))},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var WsReq=function(){function e(){this.serverTimeoutObj=null,this.timeoutObj=null,this.isReconnect=!1,this.setReconnect=null,this.afterReceivePool=[],this.isReady=!1,this.isClose=!0,this.initWebSocket()}return e.Shared=function(){return null==this.share&&(this.share=new e),this.share},e.prototype.resetTime=function(){this.timeoutObj&&egret.clearTimeout(this.timeoutObj),this.serverTimeoutObj&&egret.clearTimeout(this.serverTimeoutObj),this.socketTimeOut()},e.prototype.socketTimeOut=function(){this.timeoutObj=egret.setTimeout(function(){e.Shared().serverTimeoutObj=egret.setTimeout(function(){console.log("与服务器断开连接"),e.Shared().ws.close()},e.Shared(),3e4);var t=new Params("ping"),i=t.mergeDataByJsonStr({});e.Shared().sendData({data:i})},e.Shared(),3e4)},e.prototype.initWebSocket=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.ws=new WebSocket(localStorage.getItem("ws_url")),this.ws.onopen=this.onSocketOpen,this.ws.onerror=this.onSocketError,this.ws.onmessage=this.onReceiveMessage,this.ws.onclose=this.onSocketClose,[2]})})},e.prototype.reconnect=function(){var e=this;this.setReconnect=egret.setTimeout(function(){console.log("ws连接重连!"),e.ws=new WebSocket(localStorage.getItem("ws_url")),e.ws.onopen=e.onSocketOpen,e.ws.onerror=e.onSocketError,e.ws.onmessage=e.onReceiveMessage,e.ws.onclose=e.onSocketClose,egret.clearTimeout(e.setReconnect)},this,3e3)},e.prototype.sendData=function(t){var i=JSON.parse(t.data);if(e.Shared().isReady){if(e.Shared().isClose)return!1;"close"===i.action&&(e.Shared().isClose=!0),this.afterReceivePool[i.action]=t.receiveCallBack,this.ws.send(t.data),e.Shared().isClose&&(e.share=null)}else var n=egret.setInterval(function(){if(e.Shared().isReady){if(e.Shared().isClose)return!1;"close"===i.action&&(e.Shared().isClose=!0),e.Shared().afterReceivePool[i.action]=t.receiveCallBack,e.Shared().ws.send(t.data),egret.clearInterval(n),e.Shared().isClose&&(e.share=null)}},this,100)},e.prototype.onReceiveMessage=function(t){var i=JSON.parse(t.data);switch(e.Shared().resetTime(),i.action){case"system":Working.Shared().system(i.data);break;case"system_prop":Working.Shared().updateSkin(Working.Shared().speed,Working.Shared().minerStatus,i.data.suit.level,i.data.tool.level)}e.Shared().afterReceivePool[i.action]&&(e.Shared().afterReceivePool[i.action](i),delete e.Shared().afterReceivePool[i.action])},e.prototype.onSocketOpen=function(t){e.Shared().isReady=!0,e.Shared().isClose=!1,console.log("ws连接创建成功!")},e.prototype.onSocketClose=function(t){e.Shared().isClose?(e.Shared().isReady=!1,e.share=null,console.log("ws连接已关闭!")):(e.Shared().isReady=!1,console.log("ws连接意外中断!"),e.Shared().reconnect())},e.prototype.onSocketError=function(t){console.log("ws连接失败!"),e.Shared().reconnect()},e.share=null,e}();__reflect(WsReq.prototype,"WsReq");var AuctionBanner=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/auction/AuctionBanner.exml",t.data=Main.Shared().lang_config,t.img_banner.source=Creation.Shared().ads.image,t.auction_content.text=Creation.Shared().ads.desc,t}return __extends(t,e),t}(eui.ItemRenderer);__reflect(AuctionBanner.prototype,"AuctionBanner");var AuctionResultCount=function(e){function t(t,i){var n=e.call(this)||this;n.skinName="resource/garden_skin/auction/AuctionResultCount.exml",n.data=Main.Shared().lang_config,n.cacheAsBitmap=!0,n.y=340,n.time=t,n.resultDate.text=i,Creation.Shared().prevList.length>0?n.group_result.visible=!0:n.group_result.visible=!1;var r=setInterval(function(){n.time>=0?(n.time--,n.setTime(Common.Shared().secondToTime(n.time))):clearInterval(r)},900);return n}return __extends(t,e),t.prototype.setTime=function(e){var t=0;this.count.$children.forEach(function(i,n){n>5&&(i.text=e[t],t++)})},t}(eui.ItemRenderer);__reflect(AuctionResultCount.prototype,"AuctionResultCount");var AuctionResultList=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/auction/AuctionResultList.exml",t.cacheAsBitmap=!0,t.langData=Main.Shared().lang_config,t}return __extends(t,e),t.prototype.dataChanged=function(){this.id=this.data.id,this.type=this.data.type,this.gender.source=Common.Shared().getPh(this.data.level,this.data.gender,this.data.type),this.ph_img.source=Common.Shared().getPhImg(this.data.type,this.data.gender),this.g_text.text=this.data.title,this.g_text.horizontalCenter=Common.Shared().getPhText(this.data.type,this.data.level),this.ph_num.text=this.data.NO,this.ph_xp.text=this.data.lifeValue,this.high_price.text=this.data.maxPrice},t}(eui.ItemRenderer);__reflect(AuctionResultList.prototype,"AuctionResultList");var Bid=function(e){function t(){var t=e.call(this)||this;return t.list=new eui.List,t.serverTimeoutObj=null,t.timeoutObj=null,t.isReconnect=!1,t.setReconnect=null,t.skinName="resource/garden_skin/auction/Bid.exml",t.data=Main.Shared().lang_config,t.top=0,t.left=0,t.right=0,t.bottom=0,t.cacheAsBitmap=!0,t.tips=new Tips,t.addChild(t.tips),t.btn_go_back.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onGoBackCreation,t),t.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onGoBackCreation,t),t.btn_add.addEventListener(egret.TouchEvent.TOUCH_TAP,t.addBid,t),t.btn_go_pay.addEventListener(egret.TouchEvent.TOUCH_TAP,t.goPayAuc,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.resetTime=function(){this.timeoutObj&&egret.clearTimeout(this.timeoutObj),this.serverTimeoutObj&&egret.clearTimeout(this.serverTimeoutObj),this.socketTimeOut()},t.prototype.socketTimeOut=function(){this.timeoutObj=egret.setTimeout(function(){t.Shared().serverTimeoutObj=egret.setTimeout(function(){t.Shared().ws.close()},t.Shared(),3e4);var e=new Params("heartBeat"),i=e.mergeDataByJsonStr({});t.Shared().sendData(i)},t.Shared(),3e4)},t.prototype.initWebSocket=function(e){this.bidId=e,this.ws=new WebSocket(localStorage.getItem("ws_url")),this.ws.onopen=this.onSocketOpen,this.ws.onerror=this.onSocketError,this.ws.onmessage=this.onReceiveMessage,this.ws.onclose=this.onSocketClose},t.prototype.reconnect=function(){var e=this;this.setReconnect=egret.setTimeout(function(){e.ws=new WebSocket(localStorage.getItem("ws_url")),e.ws.onopen=e.onSocketOpen,e.ws.onerror=e.onSocketError,e.ws.onmessage=e.onReceiveMessage,e.ws.onclose=e.onSocketClose,egret.clearTimeout(e.setReconnect)},t.Shared(),3e3)},t.prototype.onBidTap=function(e){},t.prototype.sendData=function(e){this.ws.send(e)},t.prototype.onReceiveMessage=function(e){var i=JSON.parse(e.data);switch(t.Shared().resetTime(),i.action){case"ping":break;case"auctionBid":0==i.code?(t.Shared().bidInfo=i.data.bidInfo,t.Shared().highPrice(t.Shared().bidInfo),t.Shared().bidList(),i.uid==localStorage.getItem("uid")&&(t.Shared().has_mgb.text=String(Number(t.Shared().has_mgb.text)-t.Shared().myPrice),t.Shared().tips.showTips(i.msg))):i.uid==localStorage.getItem("uid")&&t.Shared().tips.showTips(i.msg);break;case"getAuctionInfo":0==i.code?(t.Shared().auctionInfo=i.data.auctionInfo,t.Shared().auctionLogs=i.data.auctionLogs,t.Shared().raiseRate=i.data.raiseRate,t.Shared().memberAccount=i.data.memberAccount,t.Shared().onShowBidInfo(t.Shared().auctionInfo),t.Shared().onShowBidLog(t.Shared().auctionLogs)):t.Shared().tips.showTips(i.msg);break;case"getAuctionLogs":0==i.code?(t.Shared().auctionLogs=i.data.auctionLogs,t.Shared().contains(this.list)&&t.Shared().removeChild(this.list),t.Shared().onShowBidLog(t.Shared().auctionLogs)):t.Shared().tips.showTips(i.msg)}},t.prototype.onSocketOpen=function(e){var i=new Params("getAuctionInfo"),n=i.mergeDataByJsonStr({auctionId:t.Shared().bidId});t.Shared().sendData(n)},t.prototype.onSocketClose=function(e){t.Shared().reconnect()},t.prototype.onSocketError=function(e){t.Shared().reconnect()},t.prototype.onGoBackCreation=function(){this.sendData(JSON.stringify({action:"close"})),this.parent.addChild(Creation.Shared()),Creation.Shared().onShowCreation(),this.parent.removeChild(this)},t.prototype.onShowBidInfo=function(e){this.gender.source=Common.Shared().getPh(this.data.level,this.data.gender,this.data.goodsType),this.ph_img.source=Common.Shared().getPhImg(this.data.goodsType,this.data.gender),this.g_text.text=this.data.title,this.g_text.horizontalCenter=Common.Shared().getPhText(this.data.goodsType,this.data.level),this.ph_num.text=e.NO,this.bid_num=Math.ceil(Number(e.maxPrice)),this.high_price.text=String(this.bid_num),this.bid_text.text=String(this.bid_num),this.high_price_name.text=e.bidUserName,this.has_mgb.text=this.memberAccount,this.percentage.text=this.data.bidTs.incer+Math.floor(100*this.raiseRate)+"%",this.timer=e.countDown,this.showCountDown()},t.prototype.showCountDown=function(){var e=this;return this.t?!1:void(this.t=setInterval(function(){e.timer>0?(e.count_down.text=Common.Shared().secondToTime(e.timer),e.timer--):(clearTimeout(e.t),e.count_down.text="00:00:00")},1e3))},t.prototype.onShowBidLog=function(e){this.list.itemRenderer=BidList,this.list.dataProvider=new eui.ArrayCollection(e),this.bid_list.addChild(this.list)},t.prototype.addBid=function(){var e=this.bid_num+this.bid_num*t.Shared().raiseRate,i=this.bid_num*t.Shared().raiseRate;i>this.memberAccount?(t.Shared().tips.showTips(this.data.bidTs.no_shared),this.btn_go_pay.touchEnabled=!1,this.btn_go_pay.touchChildren=!1,this.btn_go_pay.alpha=.5):(this.btn_go_pay.touchEnabled=!0,this.btn_go_pay.touchChildren=!0,this.btn_go_pay.alpha=1,this.bid_num=e,this.bid_text.text=String(Math.ceil(this.bid_num)))},t.prototype.goPayAuc=function(){var e=new Params("auctionBid"),i=e.mergeDataByJsonStr({auctionId:t.Shared().bidId,price:t.Shared().bid_text.text});this.myPrice=Number(t.Shared().bid_text.text),t.Shared().sendData(i)},t.prototype.highPrice=function(e){this.high_price.text=e.maxPrice,this.high_price_name.text=e.username,this.bid_num=e.maxPrice,this.bid_text.text=String(this.bid_num)},t.prototype.bidList=function(){var e=new Params("getAuctionLogs"),i=e.mergeDataByJsonStr({auctionId:t.Shared().bidId,limit:5});t.Shared().sendData(i)},t}(eui.ItemRenderer);__reflect(Bid.prototype,"Bid");var BidList=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/auction/BidList.exml",t.cacheAsBitmap=!0,t}return __extends(t,e),t.prototype.dataChanged=function(){this.price_text.text=this.data.price,this.bidder_text.text=this.data.username,this.auc_time.text=this.data.datetime},t}(eui.ItemRenderer);__reflect(BidList.prototype,"BidList");var BirthTip=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/auction/BirthTip.exml",t.data=Main.Shared().lang_config,t.cacheAsBitmap=!0,t}return __extends(t,e),t}(eui.ItemRenderer);__reflect(BirthTip.prototype,"BirthTip");var Creation=function(e){function t(){var t=e.call(this)||this;return t.tips=new Tips,t.wait=new Wait,t.skinName="resource/garden_skin/auction/Creation.exml",t.data=Main.Shared().lang_config,t.top=0,t.left=0,t.right=0,t.bottom=0,t.addChild(t.tips),t.addChild(t.wait),t.btn_go_back.addEventListener(egret.TouchEvent.TOUCH_TAP,t.goBackIndex,t),t.my_auc.addEventListener(egret.TouchEvent.TOUCH_TAP,t.goMyAucInter,t),t.btn_close_tip.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseTip,t),t.btn_go_pay.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onGoPayMargin,t),t.btn_rule.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onBtnRule,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.goBackIndex=function(){this.parent.addChild(Index.Shared()),this.parent.removeChild(this)},t.prototype.onCloseTip=function(){this.tip_groups.visible=!1,this.tip_txt.text=""},t.prototype.onShowTip=function(e){this.tip_groups.visible=!0,this.tip_txt.text=this.data.creationTs.pay_shared+e+this.data.creationTs.margin},t.prototype.goMyAucInter=function(){MyAuction.Shared().onBidMoneyList(),this.parent.addChild(MyAuction.Shared()),this.parent.removeChild(this)},t.prototype.onShowCreation=function(){var e=this;this.the_group.contains(this.creation_scroller)&&this.the_group.removeChild(this.creation_scroller),this.wait.show();var t=new HttpReq,i="v1.1/bird/auction/creation_list";t.GET({url:i,data:{},success:function(t){var t=JSON.parse(t);if(0==t.code){var i=t.data.auctionList;e.prevList=t.data.prevList,e.prevTime=t.data.prevTime,e.ads=t.data.ads,i.length>0&&-1==t.data.countDown?(e.no_auction.visible=!1,e.creation_scroller=ScrollerCreation.Shared(i,t.data.countDown),e.the_group.addChild(e.creation_scroller),e.auc_bottom.visible=!0):t.data.countDown>0?(e.no_auction.visible=!1,e.auc_bottom.visible=!1,e.creation_scroller=ScrollerCreation.Shared(e.prevList,t.data.countDown),e.the_group.addChild(e.creation_scroller)):(e.no_auction.visible=!0,e.auc_bottom.visible=!0)}else e.tips.showTips(t.msg);e.wait.hide()},error:function(t){e.wait.hide(),e.tips.showTips(e.data.creationTs.network_error)}})},t.prototype.onGoPayMargin=function(){Common.Shared().secondPwd(this.afterPayMargin,t.Shared().tip_groups,!0)},t.prototype.afterPayMargin=function(e,i){var n=this,r=hex_md5(e);t.Shared().wait.show();var o=new HttpReq,a="v1.1/bird/auction/member/put_deposit";o.POST({url:a,data:{auctionId:t.Shared().currentBirdId,pinCode:r},success:function(e){var e=JSON.parse(e);0==e.code?(n.onShowTip(),n.tip_txt.text=n.data.creationTs.pay_success,n.tip_groups.visible=!1):t.Shared().tips.showTips(e.msg),t.Shared().wait.hide()},error:function(e){t.Shared().wait.hide(),t.Shared().tips.showTips(n.data.CteationTs.network_error)}})},t.prototype.onBtnRule=function(e){this.contains(AuctionRule.Shared())||this.addChild(AuctionRule.Shared()),AuctionRule.Shared().showRule()},t}(eui.ItemRenderer);__reflect(Creation.prototype,"Creation");var CreationList=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/auction/CreationList.exml",t.langData=Main.Shared().lang_config,t.cacheAsBitmap=!0,t.btn_go_pay.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onGoPayClick,t),t.btn_go_pay_again.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onGoPayClick,t),t}return __extends(t,e),t.prototype.onGoPayClick=function(e){Common.Shared().secondPwd(this.afterPwd,null,null,this.bidId)},t.prototype.afterPwd=function(e,t){var i=this,n=new HttpReq,r="v1.1/member/check_secpwd";n.POST({url:r,data:{secPwd:hex_md5(e)},success:function(e){var e=JSON.parse(e);0==e.code?(Creation.Shared().currentBirdId=t,Creation.Shared().parent.addChild(Bid.Shared()),Bid.Shared().initWebSocket(t),Creation.Shared().parent.removeChild(Creation.Shared())):Creation.Shared().tips.showTips(e.msg),Creation.Shared().wait.hide()},error:function(e){Creation.Shared().wait.hide(),Creation.Shared().tips.showTips(i.langData.creationListTs.network_error)}})},t.prototype.dataChanged=function(){var e=this;this.bidId=this.data.id,this.gender.source=Common.Shared().getPh(this.data.level,this.data.gender,this.data.goodsType),this.ph_img.source=Common.Shared().getPhImg(this.data.goodsType,this.data.gender),this.g_text.text=this.data.title,this.g_text.horizontalCenter=Common.Shared().getPhText(this.data.goodsType,this.data.level),this.caseDeposit=this.data.caseDeposit,1==this.data.isTop?this.the_first.visible=!0:this.the_first.visible=!1,0==this.data.hasBid?(this.btn_go_pay.visible=!0,this.btn_go_pay_again.visible=!1):(this.btn_go_pay.visible=!1,this.btn_go_pay_again.visible=!0);var t=this.data.countDown,i=setInterval(function(){t>0?(e.time_down.text=Common.Shared().secondToTime(t),t--):(clearTimeout(i),e.time_down.text="00:00:00")},1e3);this.start_price.text=this.data.basePrice,this.high_price.text=this.data.maxPrice,this.ph_num.text=this.data.NO,this.ph_xp.text=this.data.lifeValue},t}(eui.ItemRenderer);__reflect(CreationList.prototype,"CreationList");var DifferentCloose=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/auction/DifferentCloose.exml",t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t}(eui.ItemRenderer);__reflect(DifferentCloose.prototype,"DifferentCloose");var DifferentClooseScroller=function(e){function t(){var t=e.call(this)||this;return t.list=new eui.List,t.skinName="resource/garden_skin/auction/DifferentClooseScroller.exml",t.langData=Main.Shared().lang_config,t.list.addEventListener(egret.Event.CHANGE,t.onListClick,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.initShow=function(e){this.list.itemRenderer=DifferentList,this.collection=e,this.list.dataProvider=new eui.ArrayCollection(this.collection),this.differentClooseScroller.viewport=this.list,this.cacheAsBitmap=!1,this.list.useVirtualLayout=!0},t.prototype.onListClick=function(e){switch(Transaction.Shared().theNum=this.list.selectedIndex,Transaction.Shared().theName){case"type":0==Transaction.Shared().theNum?(Transaction.Shared().theDataList.lastId=0,Transaction.Shared().theDataList.level=-1,Transaction.Shared().theDataList.goodsType=0,Transaction.Shared().theDataList.orderBy="",Transaction.Shared().theDataList.sort="",Transaction.Shared().no_1.text=this.langData.transaction.type):1==Transaction.Shared().theNum?(Transaction.Shared().theDataList.lastId=0,Transaction.Shared().theDataList.goodsType=2):2==Transaction.Shared().theNum?(Transaction.Shared().theDataList.lastId=0,Transaction.Shared().theDataList.goodsType=1):3==Transaction.Shared().theNum&&(Transaction.Shared().theDataList.lastId=0,Transaction.Shared().theDataList.goodsType=3),Transaction.Shared().no_1.text=this.langData.differentCloose.typeList[Transaction.Shared().theNum],Transaction.Shared().no_2.text=this.langData.transaction.algebra,Transaction.Shared().no_3.text=this.langData.transaction.sorting;break;case"algebra":3==Transaction.Shared().theDataList.goodsType?(Transaction.Shared().theDataList.lastId=0,Transaction.Shared().theDataList.level=-1,0==Transaction.Shared().theNum&&(Transaction.Shared().no_2.text=this.langData.differentCloose.typeList[0])):(Transaction.Shared().theDataList.lastId=0,Transaction.Shared().theDataList.level=Transaction.Shared().theNum,Transaction.Shared().no_2.text=this.langData.differentCloose.algebraList[Transaction.Shared().theNum]);
break;case"sorting":0==Transaction.Shared().theNum?(Transaction.Shared().theDataList.lastId=0,Transaction.Shared().theDataList.orderBy="date",Transaction.Shared().theDataList.sort="desc"):(Transaction.Shared().theDataList.lastId=0,Transaction.Shared().theDataList.orderBy="price",Transaction.Shared().theDataList.sort="asc"),Transaction.Shared().no_3.text=this.langData.differentCloose.sortingList[Transaction.Shared().theNum]}Transaction.Shared().onTransactionLists(Transaction.Shared().theDataList),this.list.selectedIndex=null},t}(eui.Scroller);__reflect(DifferentClooseScroller.prototype,"DifferentClooseScroller");var DifferentList=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/auction/DifferentList.exml",t}return __extends(t,e),t}(eui.ItemRenderer);__reflect(DifferentList.prototype,"DifferentList");var GetAutionItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/auction/GetAutionItem.exml",t.langData=Main.Shared().lang_config,t.top=0,t.left=0,t.right=0,t.bottom=0,t.btn_get.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onBtnGetTap,t),t}return __extends(t,e),t.prototype.onBtnGetTap=function(e){var t=this,i=new HttpReq,n="v1.1/bird/auction/receive_auction";i.POST({url:n,data:{auctionId:Index.Shared().auctionInfo.auctionId},success:function(e){var e=JSON.parse(e);0==e.code?(Index.Shared().tips.showTips(t.langData.getAutionItemTs.recei_success),t.visible=!1):Index.Shared().tips.showTips(e.msg),Index.Shared().wait.hide()},error:function(e){Index.Shared().wait.hide(),Index.Shared().tips.showTips(t.langData.getAutionItemTs.network_error)}})},t}(eui.ItemRenderer);__reflect(GetAutionItem.prototype,"GetAutionItem");var MyAuction=function(e){function t(){var t=e.call(this)||this;return t.empty=new Empty,t.skinName="resource/garden_skin/auction/MyAuction.exml",t.data=Main.Shared().lang_config,t.top=0,t.left=0,t.right=0,t.bottom=0,t.tips=new Tips,t.wait=new Wait,t.addChild(t.tips),t.addChild(t.wait),t.bid_money.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onBidMoneyList,t),t.cre.addEventListener(egret.TouchEvent.TOUCH_TAP,t.goCreInter,t),t.btn_go_back.addEventListener(egret.TouchEvent.TOUCH_TAP,t.goBackIndex,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.goBackIndex=function(){this.parent.addChild(Index.Shared()),this.parent.removeChild(this)},t.prototype.goCreInter=function(){this.parent.addChild(Creation.Shared()),Creation.Shared().onShowCreation(),this.parent.removeChild(this)},t.prototype.onBidMoneyList=function(){var e=this;this.list_group.contains(this.bid_scroller)&&this.list_group.removeChild(this.bid_scroller),this.list_group.contains(this.shelf_scroller)&&this.list_group.removeChild(this.shelf_scroller),this.list_group.contains(this.empty)&&this.list_group.removeChild(this.empty),this.shelf_one.visible=!1,this.bid_one.visible=!0,t.Shared().wait.show();var i=new HttpReq,n="v1.1/bird/auction/member/bid_list";i.GET({url:n,data:{},success:function(i){var i=JSON.parse(i);if(0==i.code){var n=i.data.bidList,r=i.data.lastTime;n.length>0?(e.bid_scroller=new ScrollerBidMoney(n,r),e.list_group.addChild(e.bid_scroller)):(e.empty.onShowEmpty(),e.empty.empty_text.text=e.data.myAuctionTs.no_bid,e.empty.horizontalCenter=0,e.list_group.addChild(e.empty))}else t.Shared().tips.showTips(i.msg);t.Shared().wait.hide()},error:function(i){t.Shared().wait.hide(),t.Shared().tips.showTips(e.data.myAuctionTs.network_error)}})},t}(eui.ItemRenderer);__reflect(MyAuction.prototype,"MyAuction");var MyBidMoneyList=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/auction/MyBidMoneyList.exml",t.langData=Main.Shared().lang_config,t.cacheAsBitmap=!0,t.btn_go_on.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onGoPayClick,t),t.btn_get_auction_back.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onBtnGetAuctionBack,t),t}return __extends(t,e),t.prototype.onGoPayClick=function(){Common.Shared().secondPwd(this.afterPwd,null,null,this.bidId)},t.prototype.afterPwd=function(e,t){var i=this,n=new HttpReq,r="v1.1/member/check_secpwd";n.POST({url:r,data:{secPwd:hex_md5(e)},success:function(e){var e=JSON.parse(e);0==e.code?(MyAuction.Shared().parent.addChild(Bid.Shared()),Bid.Shared().initWebSocket(t),MyAuction.Shared().parent.removeChild(MyAuction.Shared())):MyAuction.Shared().tips.showTips(e.msg),MyAuction.Shared().wait.hide()},error:function(e){MyAuction.Shared().wait.hide(),MyAuction.Shared().tips.showTips(i.langData.myBidMoneyListTs.network_error)}})},t.prototype.onBtnGetAuctionBack=function(){var e=this,t=new HttpReq,i="v1.1/bird/auction/receive_deposit",n=this.bidId;MyAuction.Shared().wait.show(),t.POST({url:i,data:{auctionId:n},success:function(t){var t=JSON.parse(t);0==t.code?(MyAuction.Shared().tips.showTips(e.langData.myBidMoneyListTs.reco_success),e.btn_get_auction_back.visible=!1,e.has_get.visible=!0):MyAuction.Shared().tips.showTips(t.msg),MyAuction.Shared().wait.hide()},error:function(t){MyAuction.Shared().wait.hide(),MyAuction.Shared().tips.showTips(e.langData.myBidMoneyListTs.network_error)}})},t.prototype.dataChanged=function(){this.bidId=this.data.id,this.gender.source=Common.Shared().getPh(this.data.level,this.data.gender,this.data.goodsType),this.ph_img.source=Common.Shared().getPhImg(this.data.goodsType,this.data.gender),this.g_text.text=this.data.title,this.g_text.horizontalCenter=Common.Shared().getPhText(this.data.goodsType,this.data.level),this.high_price.text=this.data.maxPrice,this.ph_num.text=this.data.NO,this.ph_xp.text=this.data.lifeValue,this.ph_host.text=this.data.ownName;var e=this.data.result;switch(e){case-1:this.the_high_group.visible=!0,this.status_img.source="auction_json.auc_lose",this.status_text.text=this.langData.myBidMoneyListTs.f_auc,this.status_text.textColor=10517321,this.status_group.visible=!0,this.btn_go_on.visible=!1,this.btn_get_auction_back.visible=!1,this.has_get.visible=!1;break;case 0:this.the_high_group.visible=!0,this.the_text.text=this.langData.myBidMoneyListTs.high_bid,this.btn_go_on.visible=!0,this.btn_get_auction_back.visible=!1,this.has_get.visible=!1;break;case 1:this.the_high_group.visible=!0,this.the_text.text=this.langData.myBidMoneyListTs.final_price,this.status_group.visible=!1,this.btn_go_on.visible=!1,this.btn_get_auction_back.visible=!0,this.has_get.visible=!1;break;case 2:this.the_high_group.visible=!0,this.the_text.text=this.langData.myBidMoneyListTs.final_price,this.status_img.source="auction_json.auc_success",this.status_text.text=this.langData.myBidMoneyListTs.success_auc,this.status_text.textColor=16211973,this.status_group.visible=!0,this.btn_go_on.visible=!1,this.btn_get_auction_back.visible=!1,this.has_get.visible=!1;break;case 3:this.the_high_group.visible=!0,this.the_text.text=this.langData.myBidMoneyListTs.final_price,this.status_group.visible=!1,this.btn_go_on.visible=!1,this.btn_get_auction_back.visible=!1,this.has_get.visible=!0,this.has_get.text=this.langData.myBidMoneyListTs.reco_success}},t}(eui.ItemRenderer);__reflect(MyBidMoneyList.prototype,"MyBidMoneyList");var ScrollerBidMoney=function(e){function t(t,i){var n=e.call(this)||this;return n.list=new eui.List,n.list_group=new eui.Group,n.is_need_more=0,n.skinName="resource/garden_skin/auction/ScrollerBidMoney.exml",n.top=0,n.left=0,n.right=0,n.bottom=0,n.langData=Main.Shared().lang_config,n.list.itemRenderer=MyBidMoneyList,n.bidList=t,n.list.dataProvider=new eui.ArrayCollection(n.bidList),n.list_group.addChild(n.list),n.lastTime=i,n.scroller_group.viewport=n.list_group,n.list.useVirtualLayout=!1,n.scroller_group.addEventListener(eui.UIEvent.CHANGE,n.moveHandler,n),n.scroller_group.addEventListener(eui.UIEvent.CHANGE_END,n.outHandler,n),n}return __extends(t,e),t.prototype.moveHandler=function(e){this.scroller_group.viewport.scrollV>this.scroller_group.viewport.contentHeight-this.scroller_group.viewport.height+40&&(this.is_need_more>-1?this.is_need_more=1:MyAuction.Shared().tips.showTips(this.langData.scrollerBidMoneyTs.no_more))},t.prototype.outHandler=function(e){this.is_need_more>0&&(this.is_need_more=0,this.loreMore())},t.prototype.loreMore=function(){var e=this;MyAuction.Shared().wait.show();var t=new HttpReq,i="v1.1/bird/auction/member/bid_list";t.GET({url:i,data:{lastTime:this.lastTime},success:function(t){var t=JSON.parse(t);if(0==t.code){var i=t.data.bidList,n=t.data.lastTime;if(i.length>0){for(var r=0;r<i.length;r++)e.bidList.push(i[r]);e.lastTime=n}else MyAuction.Shared().tips.showTips(e.langData.scrollerBidMoneyTs.no_more),e.is_need_more=-1}else MyAuction.Shared().tips.showTips(t.msg);MyAuction.Shared().wait.hide()},error:function(){MyAuction.Shared().wait.hide(),MyAuction.Shared().tips.showTips(e.langData.scrollerBidMoneyTs.network_error)}})},t}(eui.Scroller);__reflect(ScrollerBidMoney.prototype,"ScrollerBidMoney");var ScrollerCreation=function(e){function t(t,i){var n=e.call(this)||this;if(n.list_group=new eui.Group,n.list=new eui.List,n.skinName="resource/garden_skin/auction/ScrollerCreation.exml",n.top=0,n.left=0,n.right=0,n.bottom=0,n.content_img=new AuctionBanner,n.list_group.addChild(n.content_img),n.list.useVirtualLayout=!1,i>0){n.list.itemRenderer=AuctionResultList;var r=new AuctionResultCount(i,Creation.Shared().prevTime);t.length>0,n.list_group.addChild(r)}else-1==i&&(n.list.itemRenderer=CreationList);return n.creationList=t,n.list.dataProvider=new eui.ArrayCollection(n.creationList),n.list_group.addChild(n.list),n.scrollerCreation.viewport=n.list_group,n.list.y=i>0?640:340,n}return __extends(t,e),t.Shared=function(e,i){return new t(e,i)},t}(eui.Scroller);__reflect(ScrollerCreation.prototype,"ScrollerCreation");var MyBuyHistoryList=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/deal/MyBuyHistoryList.exml",t.langData=Main.Shared().lang_config,t.cacheAsBitmap=!0,t}return __extends(t,e),t.prototype.dataChanged=function(){3==this.data.goodsType?(this.wt_group.visible=!0,this.myBidMoneyList.visible=!1,this.wt_name.text=this.data.title,this.wt_num.text=this.data.num,this.wt_price.text=String(Math.floor(Number(this.data.amount))),this.wt_shelf_time.text=this.data.finishtime):(this.wt_group.visible=!1,this.myBidMoneyList.visible=!0,this.gender.source=Common.Shared().getPh(this.data.level,this.data.gender,this.data.goodsType),this.ph_img.source=Common.Shared().getPhImg(this.data.goodsType,this.data.gender),this.g_text.text=this.data.title,this.g_text.horizontalCenter=Common.Shared().getPhText(this.data.goodsType,this.data.level),this.ph_host.text=String(Math.floor(Number(this.data.amount))),this.ph_num.text=this.data.goodsNO,1==this.data.goodsType?(this.life_txt.text=this.langData.myBuyHistoryList.life_limit,this.ph_xp.text=this.data.lifeValue):(this.life_txt.text=this.langData.myBuyHistoryList.life,this.ph_xp.text=this.data.lifeValue+"/"+this.data.maxLifeValue),this.shelf_time.text=this.data.finishtime)},t}(eui.ItemRenderer);__reflect(MyBuyHistoryList.prototype,"MyBuyHistoryList");var MyShelfHistoryList=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/deal/MyShelfHistoryList.exml",t.langData=Main.Shared().lang_config,t.cacheAsBitmap=!0,t.btn_off.addEventListener(egret.TouchEvent.TOUCH_TAP,t.offShelf,t),t.btn_off_wt.addEventListener(egret.TouchEvent.TOUCH_TAP,t.offShelf,t),t}return __extends(t,e),t.prototype.offShelf=function(){MyTransaction.Shared().showPointTip(this.bidId)},t.prototype.dataChanged=function(){if(this.bidId=this.data.id,3==this.data.goodsType)switch(this.myShelfHistoryList.visible=!1,this.wt_group.visible=!0,this.wt_name.text=this.data.title,this.wt_num.text=this.data.num,this.wt_price.text=String(Math.floor(Number(this.data.amount))),this.wt_shelf_time.text=this.data.datetime,this.data.status){case-1:this.wt_status_group.visible=!0,this.wt_status_text.text=this.langData.myShelfHistoryListTs.drop_off,this.btn_off_wt.visible=!1;break;case 0:this.wt_status_group.visible=!1,this.wt_status_text.text="",this.btn_off_wt.visible=!0;break;case 1:this.wt_status_group.visible=!0,this.wt_status_text.text=this.langData.myShelfHistoryListTs.already_sold,this.btn_off_wt.visible=!1}else{switch(this.myShelfHistoryList.visible=!0,this.wt_group.visible=!1,this.gender.source=Common.Shared().getPh(this.data.level,this.data.gender,this.data.goodsType),this.ph_img.source=Common.Shared().getPhImg(this.data.goodsType,this.data.gender),this.g_text.text=this.data.title,this.g_text.horizontalCenter=Common.Shared().getPhText(this.data.goodsType,this.data.level),this.data.status){case-1:this.status_group.visible=!0,this.status_text.text=this.langData.myShelfHistoryListTs.drop_off,this.btn_off.visible=!1;break;case 0:this.status_group.visible=!1,this.status_text.text="",this.btn_off.visible=!0;break;case 1:this.status_group.visible=!0,this.status_text.text=this.langData.myShelfHistoryListTs.already_sold,this.btn_off.visible=!1}this.high_price.text=String(Math.floor(Number(this.data.amount))),this.ph_num.text=this.data.goodsNO,1==this.data.goodsType?(this.life_txt.text=this.langData.myBuyHistoryList.life_limit,this.ph_xp.text=this.data.lifeValue):(this.life_txt.text=this.langData.myBuyHistoryList.life,this.ph_xp.text=this.data.lifeValue+"/"+this.data.maxLifeValue),this.shelf_time.text=this.data.datetime}},t}(eui.ItemRenderer);__reflect(MyShelfHistoryList.prototype,"MyShelfHistoryList");var MyTransaction=function(e){function t(){var t=e.call(this)||this;return t.empty=new Empty,t.skinName="resource/garden_skin/deal/MyTransaction.exml",t.data=Main.Shared().lang_config,t.top=0,t.left=0,t.right=0,t.bottom=0,t.tips=new Tips,t.wait=new Wait,t.addChild(t.tips),t.addChild(t.wait),t.bid_money.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onBidMoneyList,t),t.shelf_money.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onShelfShow,t),t.swap.addEventListener(egret.TouchEvent.TOUCH_TAP,t.ShowSwap,t),t.shelf_detail.addEventListener(egret.TouchEvent.TOUCH_TAP,t.shelfDetail,t),t.btn_cancel.addEventListener(egret.TouchEvent.TOUCH_TAP,t.hidePointTip,t),t.btn_dete.addEventListener(egret.TouchEvent.TOUCH_TAP,t.detailPointTips,t),t.btn_go_back.addEventListener(egret.TouchEvent.TOUCH_TAP,t.goBackIndex,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.goBackIndex=function(){this.parent.addChild(Index.Shared()),this.parent.removeChild(this)},t.prototype.ShowSwap=function(){this.parent.addChild(Transaction.Shared()),Transaction.Shared().onTransactionLists({}),this.parent.removeChild(this)},t.prototype.shelfDetail=function(){this.parent.addChild(ShelfDetail.Shared()),ShelfDetail.Shared().onShowAucDeta(),this.parent.removeChild(this)},t.prototype.showPointTip=function(e){this.point.visible=!0,this.listId=e},t.prototype.hidePointTip=function(){this.point.visible=!1},t.prototype.detailPointTips=function(){var e=this;this.point.visible=!1,t.Shared().wait.show();var i=new HttpReq,n="v1.1/bird/trade/off_sale";i.POST({url:n,data:{tradeId:this.listId},success:function(i){var i=JSON.parse(i);0==i.code?(t.Shared().tips.showTips(e.data.myTransactionTs.succ_left),t.Shared().onShelfShow()):t.Shared().tips.showTips(i.msg),t.Shared().wait.hide()},error:function(i){t.Shared().wait.hide(),t.Shared().tips.showTips(e.data.myTransactionTs.network_error)}})},t.prototype.onBidMoneyList=function(){var e=this;this.list_group.contains(this.bid_scroller)&&this.list_group.removeChild(this.bid_scroller),this.list_group.contains(this.shelf_scroller)&&this.list_group.removeChild(this.shelf_scroller),this.list_group.contains(this.empty)&&this.list_group.removeChild(this.empty),this.shelf_one.visible=!1,this.bid_one.visible=!0,t.Shared().wait.show();var i=new HttpReq,n="v1.1/bird/trade/buy_list";i.GET({url:n,data:{},success:function(i){var i=JSON.parse(i);if(0==i.code){var n=i.data.buyList;n.length>0?(e.bid_scroller=new ScrollerMyBuyHistory(n,n[n.length-1].id),e.list_group.addChild(e.bid_scroller)):(e.empty.onShowEmpty(),e.empty.empty_text.text=e.data.myTransactionTs.no_pay,e.empty.horizontalCenter=0,e.list_group.addChild(e.empty))}else t.Shared().tips.showTips(i.msg);t.Shared().wait.hide()},error:function(i){t.Shared().wait.hide(),t.Shared().tips.showTips(e.data.myTransactionTs.network_error)}})},t.prototype.onShelfShow=function(){var e=this;this.list_group.contains(this.bid_scroller)&&this.list_group.removeChild(this.bid_scroller),this.list_group.contains(this.shelf_scroller)&&this.list_group.removeChild(this.shelf_scroller),this.list_group.contains(this.empty)&&this.list_group.removeChild(this.empty),this.shelf_one.visible=!0,this.bid_one.visible=!1,t.Shared().wait.show();var i=new HttpReq,n="v1.1/bird/trade/sell_list";i.GET({url:n,data:{},success:function(i){var i=JSON.parse(i);if(0==i.code){var n=i.data.sellList;n.length>0?(e.shelf_scroller=new ScrollerMyShelfHistory(n,n[n.length-1].id),e.list_group.addChild(e.shelf_scroller)):(e.empty.onShowEmpty(),e.empty.empty_text.text=e.data.myTransactionTs.no_shelves,e.empty.horizontalCenter=0,e.list_group.addChild(e.empty))}else t.Shared().tips.showTips(i.msg);t.Shared().wait.hide()},error:function(i){t.Shared().wait.hide(),t.Shared().tips.showTips(e.data.myTransactionTs.network_error)}})},t}(eui.ItemRenderer);__reflect(MyTransaction.prototype,"MyTransaction");var ScrollerMyBuyHistory=function(e){function t(t,i){var n=e.call(this)||this;return n.list=new eui.List,n.is_need_more=0,n.lastId=0,n.skinName="resource/garden_skin/deal/ScrollerMyBuyHistory.exml",n.top=0,n.left=0,n.right=0,n.bottom=0,n.lastId=i,n.langData=Main.Shared().lang_config,n.list.itemRenderer=MyBuyHistoryList,n.transactionArr=t,n.list.dataProvider=new eui.ArrayCollection(n.transactionArr),n.scroller_group.viewport=n.list,n.cacheAsBitmap=!1,n.scroller_group.addEventListener(eui.UIEvent.CHANGE,n.moveHandler,n),n.scroller_group.addEventListener(eui.UIEvent.CHANGE_END,n.outHandler,n),n}return __extends(t,e),t.Shared=function(e,i){return this.shared||(this.shared=new t(e,i)),this.shared},t.prototype.moveHandler=function(e){this.scroller_group.viewport.scrollV>this.scroller_group.viewport.contentHeight-this.scroller_group.viewport.height+40&&(this.is_need_more>-1?this.is_need_more=1:MyTransaction.Shared().tips.showTips(this.langData.scrollerMyBuyHistoryTs.no_more))},t.prototype.outHandler=function(e){this.is_need_more>0&&(this.is_need_more=0,this.loreMore())},t.prototype.loreMore=function(){var e=this;MyTransaction.Shared().wait.show();var t=new HttpReq,i="v1.1/bird/trade/buy_list";t.GET({url:i,data:{lastId:this.lastId},success:function(t){var t=JSON.parse(t);if(0==t.code){var i=t.data.buyList;if(i.length>0){for(var n=0;n<i.length;n++)e.transactionArr.push(i[n]);e.lastId=i[i.length-1].id}else MyTransaction.Shared().tips.showTips(e.langData.scrollerMyBuyHistoryTs.no_more),e.is_need_more=-1}else MyTransaction.Shared().tips.showTips(t.msg);MyTransaction.Shared().wait.hide()},error:function(){MyTransaction.Shared().wait.hide(),MyTransaction.Shared().tips.showTips(e.langData.scrollerMyBuyHistoryTs.network_error)}})},t}(eui.Scroller);__reflect(ScrollerMyBuyHistory.prototype,"ScrollerMyBuyHistory");var ScrollerMyShelfHistory=function(e){function t(t,i){var n=e.call(this)||this;return n.list=new eui.List,n.is_need_more=0,n.lastId=0,n.skinName="resource/garden_skin/deal/ScrollerMyShelfHistory.exml",n.top=0,n.left=0,n.right=0,n.bottom=0,n.langData=Main.Shared().lang_config,n.list.itemRenderer=MyShelfHistoryList,n.transactionArr=t,n.lastId=i,n.list.dataProvider=new eui.ArrayCollection(n.transactionArr),n.scroller_group.viewport=n.list,n.scroller_group.addEventListener(eui.UIEvent.CHANGE,n.moveHandler,n),n.scroller_group.addEventListener(eui.UIEvent.CHANGE_END,n.outHandler,n),n}return __extends(t,e),t.Shared=function(e,i){return this.shared||(this.shared=new t(e,i)),this.shared},t.prototype.moveHandler=function(e){this.scroller_group.viewport.scrollV>this.scroller_group.viewport.contentHeight-this.scroller_group.viewport.height+40&&(this.is_need_more>-1?this.is_need_more=1:MyTransaction.Shared().tips.showTips(this.langData.scrollerMyShelfHistoryTs.no_more))},t.prototype.outHandler=function(e){this.is_need_more>0&&(this.is_need_more=0,this.loreMore())},t.prototype.loreMore=function(){var e=this;MyTransaction.Shared().wait.show();var t=new HttpReq,i="v1.1/bird/trade/sell_list";t.GET({url:i,data:{lastId:this.lastId},success:function(t){var t=JSON.parse(t);if(0==t.code){var i=t.data.sellList;if(i.length>0){for(var n=0;n<i.length;n++)e.transactionArr.push(i[n]);e.lastId=i[i.length-1].id}else MyTransaction.Shared().tips.showTips(e.langData.scrollerMyShelfHistoryTs.no_more),e.is_need_more=-1}else MyTransaction.Shared().tips.showTips(t.msg);MyTransaction.Shared().wait.hide()},error:function(){MyTransaction.Shared().wait.hide(),MyTransaction.Shared().tips.showTips(e.langData.scrollerMyShelfHistoryTs.network_error)}})},t}(eui.Scroller);__reflect(ScrollerMyShelfHistory.prototype,"ScrollerMyShelfHistory");var ScrollerShelfDetail=function(e){function t(t,i){var n=e.call(this)||this;return n.list=new eui.List,n.is_need_more=0,n.lastId=0,n.skinName="resource/garden_skin/deal/ScrollerShelfDetail.exml",n.top=0,n.left=0,n.right=0,n.bottom=0,n.lastId=i,n.langData=Main.Shared().lang_config,n.collection=t,n.list.itemRenderer=ShelfDetailList,n.scroller_auctionDeta.viewport=n.list,n.list.dataProvider=new eui.ArrayCollection(n.collection),n.cacheAsBitmap=!1,n.scroller_auctionDeta.addEventListener(eui.UIEvent.CHANGE,n.moveHandler,n),n.scroller_auctionDeta.addEventListener(eui.UIEvent.CHANGE_END,n.outHandler,n),n}return __extends(t,e),t.Shared=function(e,i){return null==this.shared&&(this.shared=new t(e,i)),this.shared},t.prototype.moveHandler=function(e){this.scroller_auctionDeta.viewport.scrollV>this.scroller_auctionDeta.viewport.contentHeight-this.scroller_auctionDeta.viewport.height+40&&(this.is_need_more>-1?this.is_need_more=1:ShelfDetail.Shared().tips.showTips(this.langData.scrollerShelfDetailTs.no_more))},t.prototype.outHandler=function(e){this.is_need_more>0&&(this.is_need_more=0,this.loreMore())},t.prototype.loreMore=function(){var e=this;ShelfDetail.Shared().wait.show();var t=new HttpReq,i="v1.1/bird/trade/package_list";t.GET({url:i,data:{lastId:this.lastId},success:function(t){var t=JSON.parse(t);if(0==t.code){var i=t.data.packageList;if(i.length>0){for(var n=0;n<i.length;n++)e.collection.push(i[n]);e.lastId=i[i.length-1].id}else ShelfDetail.Shared().tips.showTips(e.langData.scrollerShelfDetailTs.no_more),e.is_need_more=-1}else ShelfDetail.Shared().tips.showTips(t.msg);ShelfDetail.Shared().wait.hide()},error:function(){ShelfDetail.Shared().wait.hide(),ShelfDetail.Shared().tips.showTips(e.langData.scrollerShelfDetailTs.network_error)}})},t}(eui.Scroller);__reflect(ScrollerShelfDetail.prototype,"ScrollerShelfDetail");var ScrollerTransaction=function(e){function t(t,i){var n=e.call(this)||this;return n.list=new eui.List,n.is_need_more=0,n.lastId=0,n.skinName="resource/garden_skin/deal/ScrollerTransaction.exml",n.top=0,n.left=0,n.right=0,n.bottom=0,n.langData=Main.Shared().lang_config,Transaction.Shared().theDataList.lastId=i,n.list.itemRenderer=TransactionList,n.transactionArr=t,n.list.dataProvider=new eui.ArrayCollection(n.transactionArr),n.scroller_transaction.viewport=n.list,n.cacheAsBitmap=!1,n.scroller_transaction.addEventListener(eui.UIEvent.CHANGE,n.moveHandler,n),n.scroller_transaction.addEventListener(eui.UIEvent.CHANGE_END,n.outHandler,n),n}return __extends(t,e),t.Shared=function(e,i){return this.shared||(this.shared=new t(e,i)),this.shared},t.prototype.moveHandler=function(e){this.scroller_transaction.viewport.scrollV>this.scroller_transaction.viewport.contentHeight-this.scroller_transaction.viewport.height+40&&(this.is_need_more>-1?this.is_need_more=1:Transaction.Shared().tips.showTips(this.langData.scrollerTransactionTs.no_more))},t.prototype.outHandler=function(e){this.is_need_more>0&&(this.is_need_more=0,this.loreMore())},t.prototype.loreMore=function(){var e=this;Transaction.Shared().wait.show();var t=new HttpReq,i="v1.1/bird/trade/trade_list";t.GET({url:i,data:Transaction.Shared().theDataList,success:function(t){var t=JSON.parse(t);if(0==t.code){var i=t.data.tradeList;if(i.length>0){for(var n=0;n<i.length;n++)e.transactionArr.push(i[n]);Transaction.Shared().theDataList.lastId=i[i.length-1].id}else Transaction.Shared().tips.showTips(e.langData.scrollerTransactionTs.no_more),e.is_need_more=-1}else Transaction.Shared().tips.showTips(t.msg);Transaction.Shared().wait.hide()},error:function(){Transaction.Shared().wait.hide(),Transaction.Shared().tips.showTips(e.langData.scrollerTransactionTs.work_error)}})},t}(eui.Scroller);__reflect(ScrollerTransaction.prototype,"ScrollerTransaction");var ShelfDetail=function(e){function t(){var t=e.call(this)||this;return t.tips=new Tips,t.wait=new Wait,t.skinName="resource/garden_skin/deal/ShelfDetail.exml",t.top=0,t.left=0,t.right=0,t.bottom=0,t.addChild(t.tips),t.addChild(t.wait),t.data=Main.Shared().lang_config,t.btn_go_back.addEventListener(egret.TouchEvent.TOUCH_TAP,t.goBackMyAuc,t),t.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseTip,t),t.btn_dete.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseTip,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.onCloseTip=function(){this.auc_info_tips.visible=!1,this.tip_txt.text="",this.full_mask.visible=!1},t.prototype.onShowTips=function(){this.auc_info_tips.visible=!0,this.full_mask.visible=!0},t.prototype.goBackMyAuc=function(){this.parent.addChild(MyTransaction.Shared()),MyTransaction.Shared().onBidMoneyList(),this.parent.removeChild(this)},t.prototype.onShowAucDeta=function(){var e=this;this.the_group.contains(this.the_scroller)&&this.the_group.removeChild(this.the_scroller),t.Shared().wait.show();var i=new HttpReq,n="v1.1/bird/trade/package_list";i.GET({url:n,data:{},success:function(i){var i=JSON.parse(i);if(0==i.code){var n=i.data.packageList;n.length>0&&(e.the_scroller=new ScrollerShelfDetail(n,n[n.length-1].id),e.the_group.addChild(e.the_scroller))}else t.Shared().tips.showTips(i.msg);t.Shared().wait.hide()},error:function(i){t.Shared().wait.hide(),t.Shared().tips.showTips(e.data.shelfDetailTs.network_error)}})},t}(eui.ItemRenderer);__reflect(ShelfDetail.prototype,"ShelfDetail");var ShelfDetailInfo=function(e){function t(){var t=e.call(this)||this;return t.tips=new Tips,t.wait=new Wait,t.unit_number=0,t.start_number=0,t.skinName="resource/garden_skin/deal/ShelfDetailInfo.exml",t.top=0,t.left=0,t.right=0,t.bottom=0,t.start_price.prompt="0",t.start_price.promptColor=16211973,t.start_price.restrict="0-9",t.start_num.restrict="0-9",t.unit_price.restrict="0-9.",t.start_num.inputType=egret.TextFieldInputType.TEL,t.unit_price.inputType=egret.TextFieldInputType.TEL,t.cacheAsBitmap=!0,t.addChild(t.tips),t.addChild(t.wait),t.data=Main.Shared().lang_config,t.btn_go_back.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onBtnReturn,t),t.btn_wt_go_back.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onBtnReturn,t),t.btn_pay_fee.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPayFee,t),t.start_price.addEventListener(egret.Event.CHANGE,t.startChang,t),t.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseTip,t),t.btn_dete.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseTip,t),t.unit_price.addEventListener(egret.Event.CHANGE,t.wutongguoChang,t),t.start_num.addEventListener(egret.Event.CHANGE,t.wutongguoChang,t),t.btn_pay_wt.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPayWT,t),t.start_num.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onClick,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.onClick=function(e){this.start_num.setFocus();var t=document.documentElement.clientWidth,i=document.documentElement.clientHeight;document.body.style.width=t+"px",document.body.style.height=i-20+"px"},t.prototype.onBtnReturn=function(){this.unit_price.text="",this.start_num.text="",this.total_price.text="0",this.wt_fee.text=0+this.data.shelfDetailInfo.shared_value,this.start_price.text="",this.parent.addChild(ShelfDetail.Shared()),this.parent.removeChild(this)},t.prototype.onCloseTip=function(){this.auc_info_tips.visible=!1,this.tip_txt.text="",this.full_mask.visible=!1},t.prototype.onShowBidInfo=function(e,t){this.auction.visible=!0,this.wutong_group.visible=!1,this.gender.source=Common.Shared().getPh(e.level,e.gender,e.type),this.ph_img.source=Common.Shared().getPhImg(e.type,e.gender),this.g_text.text=e.title,this.g_text.horizontalCenter=Common.Shared().getPhText(e.type,e.level),this.auction_fee.text=0+this.data.shelfDetailInfoTs.shared_value,this.shouxufei.text=this.data.shelfDetailInfoTs.fees+100*t+"%",this.shouxuNMB=t,this.ph_num.text=e.NO,1==e.type?(this.life_txt.text=this.data.myBuyHistoryList.life_limit,this.ph_xp.text=e.lifeValue):(this.life_txt.text=this.data.myBuyHistoryList.life,this.ph_xp.text=e.lifeValue+"/"+e.maxLifeValue),this.id=e.id,this.type=e.type},t.prototype.startChang=function(){this.start_price.text.length<=9?this.start_price.text=this.start_price.text:this.start_price.text=this.start_price.text.slice(0,9),0==Number(this.start_price.text)?this.start_price.text="":this.auction_fee.text=Math.ceil(this.shouxuNMB*Number(this.start_price.text))+this.data.shelfDetailInfoTs.shared_value},t.prototype.onShowWTInfo=function(e,i){this.auction.visible=!1,this.wutong_group.visible=!0,this.id=e.id,this.wt_title.text=e.name;var n=e.tips;this.wt_tips.addChild(Common.Shared().getITextElement(n,t.Shared().wt_tips.width,t.Shared().wt_tips.height,24,0,0)),this.now_num.text=e.num+this.data.shelfDetailInfoTs.one,this.allNum=e.num,this.fee_status.text=this.data.shelfDetailInfo.head_fee+100*i+"%",this.wt_fee.text=0+this.data.shelfDetailInfo.shared_value,this.rate=i,this.shouxuNMB=i},t.prototype.wutongguoChang=function(){this.unit_number=Number(this.unit_price.text),this.start_number=Number(this.start_num.text),this.total_number=this.unit_number*this.start_number,this.total_price.text=String(Math.ceil(this.total_number)),this.start_number>this.allNum?(this.wt_status.text=this.data.shelfDetailInfoTs.number_fruit,this.btn_pay_wt.touchChildren=!1,this.btn_pay_wt.touchEnabled=!1):(this.wt_status.text=this.data.shelfDetailInfo.than_zero,this.btn_pay_wt.touchChildren=!0,this.btn_pay_wt.touchEnabled=!0),this.wt_fee.text=String(Math.ceil(this.total_number*this.rate))+this.data.shelfDetailInfo.shared_value},t.prototype.onPayFee=function(){var e=this;if(""==this.start_price.text||"0"==this.start_price.text)this.onShowTips(),this.tip_txt.text=this.data.shelfDetailInfoTs.enter_price;else{t.Shared().wait.show();var i=new HttpReq,n="v1.1/bird/trade/on_sale";i.POST({url:n,data:{packageId:this.id,goodsType:this.type,price:this.start_price.text},success:function(i){var i=JSON.parse(i);0==i.code?(e.onBtnReturn(),ShelfDetail.Shared().onShowTips(),ShelfDetail.Shared().tip_txt.text=e.data.shelfDetailInfoTs.success,ShelfDetail.Shared().onShowAucDeta()):t.Shared().tips.showTips(i.msg),t.Shared().wait.hide()},error:function(i){t.Shared().wait.hide(),t.Shared().tips.showTips(e.data.shelfDetailInfoTs.network_error)}})}},t.prototype.onPayWT=function(){var e=this;if("0"==this.unit_price.text||""==this.unit_price.text)this.onShowTips(),this.tip_txt.text=this.data.shelfDetailInfoTs.enter_price;else if("0"==this.start_num.text||""==this.start_num.text)this.onShowTips(),this.tip_txt.text=this.data.shelfDetailInfoTs.please_fruit;else{t.Shared().wait.show();var i=new HttpReq,n="v1.1/bird/trade/on_sale";i.POST({url:n,data:{goodsType:3,price:this.unit_price.text,goodsNum:this.start_num.text},success:function(i){var i=JSON.parse(i);0==i.code?(e.onBtnReturn(),ShelfDetail.Shared().onShowTips(),ShelfDetail.Shared().tip_txt.text=e.data.shelfDetailInfoTs.success,ShelfDetail.Shared().onShowAucDeta()):t.Shared().tips.showTips(i.msg),t.Shared().wait.hide()},error:function(i){t.Shared().wait.hide(),t.Shared().tips.showTips(e.data.shelfDetailInfoTs.network_error)
}})}},t.prototype.onShowTips=function(){this.auc_info_tips.visible=!0,this.full_mask.visible=!0},t}(eui.ItemRenderer);__reflect(ShelfDetailInfo.prototype,"ShelfDetailInfo");var ShelfDetailList=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/deal/ShelfDetailList.exml",t.cacheAsBitmap=!0,t.langData=Main.Shared().lang_config,t.btn_pay.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onShowInfo,t),t.btn_pay_wt.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onShowWTInfo,t),t}return __extends(t,e),t.prototype.onShowInfo=function(e){var t=this;ShelfDetail.Shared().wait.show();var i=new HttpReq,n="v1.1/bird/trade/package_info";i.GET({url:n,data:{packageId:this.id,type:this.type},success:function(e){var e=JSON.parse(e);0==e.code?(ShelfDetail.Shared().parent.addChild(ShelfDetailInfo.Shared()),ShelfDetailInfo.Shared().onShowBidInfo(e.data.packageInfo,e.data.tradeTaxRate),ShelfDetail.Shared().parent.removeChild(ShelfDetail.Shared())):ShelfDetail.Shared().tips.showTips(e.msg),ShelfDetail.Shared().wait.hide()},error:function(e){ShelfDetail.Shared().wait.hide(),ShelfDetail.Shared().tips.showTips(t.langData.shelfDetailListTs.network_error)}})},t.prototype.onShowWTInfo=function(){var e=this;ShelfDetail.Shared().wait.show();var t=new HttpReq,i="v1.1/bird/trade/wutongguo_info";t.GET({url:i,data:{},success:function(e){var e=JSON.parse(e);0==e.code?(ShelfDetail.Shared().parent.addChild(ShelfDetailInfo.Shared()),ShelfDetailInfo.Shared().onShowWTInfo(e.data.packageInfo,e.data.tradeTaxRate),ShelfDetail.Shared().parent.removeChild(ShelfDetail.Shared())):ShelfDetail.Shared().tips.showTips(e.msg),ShelfDetail.Shared().wait.hide()},error:function(t){ShelfDetail.Shared().wait.hide(),ShelfDetail.Shared().tips.showTips(e.langData.shelfDetailListTs.network_error)}})},t.prototype.dataChanged=function(){this.id=this.data.id,this.type=this.data.type,3==this.data.type?(this.auctionDetaList.visible=!1,this.wutongguoList.visible=!0,this.wt_num.text=this.data.num,this.wt_name.text=this.data.title):(this.auctionDetaList.visible=!0,this.wutongguoList.visible=!1,this.gender.source=Common.Shared().getPh(this.data.level,this.data.gender,this.data.type),this.ph_img.source=Common.Shared().getPhImg(this.data.type,this.data.gender),this.g_text.text=this.data.title,this.g_text.horizontalCenter=Common.Shared().getPhText(this.data.type,this.data.level),1==this.data.status?(this.btn_pay.visible=!0,this.status_text.visible=!1):(this.btn_pay.visible=!1,this.status_text.text=this.data.reason),this.ph_num.text=this.data.NO,1==this.data.type?(this.life_txt.text=this.langData.myBuyHistoryList.life_limit,this.ph_xp.text=this.data.lifeValue):(this.life_txt.text=this.langData.myBuyHistoryList.life,this.ph_xp.text=this.data.lifeValue+"/"+this.data.maxLifeValue))},t}(eui.ItemRenderer);__reflect(ShelfDetailList.prototype,"ShelfDetailList");var Transaction=function(e){function t(){var t=e.call(this)||this;return t.tips=new Tips,t.wait=new Wait,t.empty=new Empty,t.theDataList={level:-1,goodsType:0,orderBy:"",sort:"",lastId:0},t.skinName="resource/garden_skin/deal/Transaction.exml",t.data=Main.Shared().lang_config,t.top=0,t.left=0,t.right=0,t.bottom=0,t.addChild(t.wait),t.addChild(t.tips),t.btn_go_back.addEventListener(egret.TouchEvent.TOUCH_TAP,t.goBackIndex,t),t.my_auc.addEventListener(egret.TouchEvent.TOUCH_TAP,t.goMyAucInter,t),t.type.theName="type",t.algebra.theName="algebra",t.sorting.theName="sorting",t.transaction_nav.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onShowList,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.goBackIndex=function(){switch(this.no_1.text=this.data.transaction.type,this.no_2.text=this.data.transaction.algebra,this.no_3.text=this.data.transaction.sorting,this.theStatus){case 1:this.parent.addChild(Index.Shared()),this.parent.removeChild(this);break;case 2:this.parent.addChild(Working.Shared()),this.parent.removeChild(this),Working.Shared().showTheGoods();break;default:this.parent.addChild(Index.Shared()),this.parent.removeChild(this)}},t.prototype.goMyAucInter=function(){this.parent.addChild(MyTransaction.Shared()),MyTransaction.Shared().onBidMoneyList(),this.parent.removeChild(this)},t.prototype.onTransactionLists=function(e,i){var n=this;e=={}&&(this.no_1.text=this.data.transaction.type,this.no_2.text=this.data.transaction.algebra,this.no_3.text=this.data.transaction.sorting),this.theStatus=i,this.list_group.contains(this.transaction_scroller)&&this.list_group.removeChild(this.transaction_scroller),this.list_group.contains(this.empty)&&this.list_group.removeChild(this.empty),this["default"](),t.Shared().wait.show();var r=new HttpReq,o="v1.1/bird/trade/trade_list";r.GET({url:o,data:e,success:function(e){var e=JSON.parse(e);if(0==e.code){var i=e.data.tradeList;i.length>0?(n.transaction_scroller=new ScrollerTransaction(i,i[i.length-1].id),n.list_group.addChild(n.transaction_scroller)):(n.empty.onShowEmpty(),n.empty.empty_text.text=n.data.transactionTs.no_history,n.empty.horizontalCenter=0,n.list_group.addChild(n.empty))}else t.Shared().tips.showTips(e.msg);t.Shared().wait.hide()},error:function(e){t.Shared().wait.hide(),t.Shared().tips.showTips(n.data.transactionTs.network_error)}})},t.prototype["default"]=function(){this.type_c.visible=!1,this.type_v.skewX=0,this.algebra_c.visible=!1,this.algebra_v.skewX=0,this.sorting_c.visible=!1,this.sorting_v.skewX=0,this.diff_show="",this.diff_group.visible=!1,this.theName=""},t.prototype.onShowList=function(e){e.target.$children?this.theName=e.target.theName:this.theName=e.target.parent.theName,this.diff_show==this.theName?this["default"]():this.distinguish()},t.prototype.distinguish=function(){switch(this.theName){case"type":this.diff_show=this.theName,this.onTypeList();break;case"algebra":this.diff_show=this.theName,this.onAlgebraList();break;case"sorting":this.diff_show=this.theName,this.onSortingList()}},t.prototype.onTypeList=function(){this.type_c.visible=!0,this.type_v.skewX=180,this.algebra_c.visible=!1,this.algebra_v.skewX=0,this.sorting_c.visible=!1,this.sorting_v.skewX=0,DifferentClooseScroller.Shared().initShow(this.data.differentCloose.typeList),this.diffArr=DifferentClooseScroller.Shared(),this.diff_group.addChild(this.diffArr),this.diff_group.visible=!0},t.prototype.onAlgebraList=function(){this.type_c.visible=!1,this.type_v.skewX=0,this.algebra_c.visible=!0,this.algebra_v.skewX=180,this.sorting_c.visible=!1,this.sorting_v.skewX=0,3==t.Shared().theDataList.goodsType?DifferentClooseScroller.Shared().initShow([this.data.differentCloose.typeList[0]]):DifferentClooseScroller.Shared().initShow(this.data.differentCloose.algebraList),this.diffArr=DifferentClooseScroller.Shared(),this.diff_group.addChild(this.diffArr),this.diff_group.visible=!0},t.prototype.onSortingList=function(){this.type_c.visible=!1,this.type_v.skewX=0,this.algebra_c.visible=!1,this.algebra_v.skewX=0,this.sorting_c.visible=!0,this.sorting_v.skewX=180,DifferentClooseScroller.Shared().initShow(this.data.differentCloose.sortingList),this.diffArr=DifferentClooseScroller.Shared(),this.diff_group.addChild(this.diffArr),this.diff_group.visible=!0},t}(eui.ItemRenderer);__reflect(Transaction.prototype,"Transaction");var TransactionList=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/deal/TransactionList.exml",t.langData=Main.Shared().lang_config,t.cacheAsBitmap=!0,t.btn_go_pay.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onGoPayClick,t),t.btn_go_pay_wt.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onGoPayClick,t),t}return __extends(t,e),t.prototype.onGoPayClick=function(){var e=this;Transaction.Shared().wait.show();var t=new HttpReq,i="v1.1/bird/trade/put_order";t.POST({url:i,data:{tradeId:this.tradeId},success:function(t){var t=JSON.parse(t);if(0==t.code){var i=t.data;Common.Shared().secondPwd(e.afterPwd,null,null,i)}else Transaction.Shared().tips.showTips(t.msg);Transaction.Shared().wait.hide()},error:function(t){Transaction.Shared().wait.hide(),Transaction.Shared().tips.showTips(e.langData.transactionListTs.network_error)}})},t.prototype.afterPwd=function(e,t){var i=hex_md5(e);Transaction.Shared().wait.show();var n=new HttpReq,r="v1.1/pay/confirm_pay";n.POST({url:r,data:{orderId:t.orderId,payType:t.payType,payOrder:t.payOrder,pinCode:i},success:function(e){var e=JSON.parse(e);0==e.code?(Transaction.Shared().tips.showTips("购买成功！"),Transaction.Shared().onTransactionLists({})):Transaction.Shared().tips.showTips(e.msg),Transaction.Shared().wait.hide()},error:function(e){Transaction.Shared().wait.hide(),Transaction.Shared().tips.showTips(Transaction.Shared().data.transactionListTs.network_error)}})},t.prototype.dataChanged=function(){this.tradeId=this.data.id,3==this.data.goodsType?(this.ph_group.visible=!1,this.wt_group.visible=!0,this.wt_name.text=this.data.title,this.wt_num.text=this.data.num,this.wt_price.text=String(Math.floor(Number(this.data.amount))),this.wt_shelf_time.text=this.data.datetime):(this.ph_group.visible=!0,this.wt_group.visible=!1,this.gender.source=Common.Shared().getPh(this.data.level,this.data.gender,this.data.goodsType),this.ph_img.source=Common.Shared().getPhImg(this.data.goodsType,this.data.gender),this.g_text.text=this.data.title,this.g_text.horizontalCenter=Common.Shared().getPhText(this.data.goodsType,this.data.level),this.high_price.text=String(Math.floor(Number(this.data.amount))),this.ph_num.text=this.data.goodsNO,1==this.data.goodsType?(this.life_txt.text=this.langData.myBuyHistoryList.life_limit,this.ph_xp.text=this.data.lifeValue):(this.life_txt.text=this.langData.myBuyHistoryList.life,this.ph_xp.text=this.data.lifeValue+"/"+this.data.maxLifeValue),this.shelf_time.text=this.data.datetime)},t}(eui.ItemRenderer);__reflect(TransactionList.prototype,"TransactionList");var Email=function(e){function t(){var t=e.call(this)||this;return t.empty=new Empty,t.list=new eui.List,t.last_id=0,t.top=0,t.left=0,t.right=0,t.bottom=0,t.skinName="resource/garden_skin/email/EmailSkin.exml",t.data=Main.Shared().lang_config,t.btn_close_email.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseEmail,t),t.empty.onShowEmpty(),t.email_tool.addChild(t.empty),t}return __extends(t,e),t.Shared=function(){return null==this.share&&(this.share=new t),this.share},t.prototype.CloseEmail=function(){this.group_email.visible=!1},t.prototype.showEmail=function(){var e=this;this.email_tool.removeChildren(),this.group_email.visible=!0,Index.Shared().wait.show();var t=new HttpReq,i="v1.1/wutong/email_list";t.GET({url:i,data:{},success:function(t){var t=JSON.parse(t);if(0==t.code){var i=t.data.emailList;i.length>0?(e.scroller_email=new ScrollerEmail(i,i[i.length-1].id),e.email_tool.addChild(e.scroller_email)):(e.empty.onShowEmpty(),e.empty.empty_text.text=e.data.emailTs.no_mail,e.empty.horizontalCenter="0",e.email_tool.addChild(e.empty))}else Index.Shared().tips.showTips(t.msg);Index.Shared().wait.hide()},error:function(t){Index.Shared().wait.hide(),Index.Shared().tips.showTips(e.data.emailTs.network_error)}})},t.prototype.onCloseEmail=function(){this.CloseEmail(),Index.Shared().full_mask.visible=!1},t.share=null,t}(eui.ItemRenderer);__reflect(Email.prototype,"Email");var EmailInstr=function(e){function t(){var t=e.call(this)||this;return t.email_img=new eui.Image,t.skinName="resource/garden_skin/email/EmailInstr.exml",t.data=Main.Shared().lang_config,t.top=0,t.left=0,t.right=0,t.bottom=0,t.cacheAsBitmap=!0,t.btn_close_instr.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onBtn_close_instr,t),t}return __extends(t,e),t.Shared=function(){return null==this.share&&(this.share=new t),this.share},t.prototype.onBtn_close_instr=function(){this.email_instr.visible=!1,this.title.text="",this.datatime.text="",this.content.removeChild(this.contentText),Index.Shared().full_mask.visible=!0,Index.Shared().addChildAt(Email.Shared(),-1)},t.prototype.showEmailInstr=function(e){return __awaiter(this,void 0,void 0,function(){var t,i,n;return __generator(this,function(r){switch(r.label){case 0:if(this.title.text=e.title,t=e.datetime.slice(0,10),this.datatime.text=t,this.datatime_1.text=e.datetime.slice(10),this.contentText=Common.Shared().getITextElement(e.content,480,358,24,0,0),this.content.addChild(this.contentText),this.id=e.id,!(e.attach.length>0))return[3,5];this.group_img.removeChildren(),i=0,r.label=1;case 1:return i<e.attach.length?(n=this.email_img,[4,Common.Shared().loadImg(e.attach[i])]):[3,4];case 2:n.source=r.sent(),this.email_img.height=270,this.email_img.width=480,this.email_img.y=280*(i+1),this.group_img.addChild(this.email_img),r.label=3;case 3:return i++,[3,1];case 4:return this.group_img.y=this.contentText.height+10,this.group_img.visible=!0,[3,6];case 5:this.group_img.visible=!1,r.label=6;case 6:return this.isReceive=e.isReceive,[2]}})})},t}(eui.ItemRenderer);__reflect(EmailInstr.prototype,"EmailInstr");var EmailList=function(e){function t(){var t=e.call(this)||this;return t.top=0,t.right=0,t.left=0,t.bottom=0,t.skinName="resource/garden_skin/email/EmailList.exml",t.cacheAsBitmap=!0,t.group_email_list.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onEmailInClick,t),t}return __extends(t,e),t.prototype.onEmailInClick=function(e){Index.Shared().wait.show();var t=new HttpReq,i="v1.1/wutong/email_info";t.GET({url:i,data:{emailId:this.id},success:function(e){var e=JSON.parse(e);if(0==e.code){var t=e.data.emailInfo;EmailInstr.Shared().showEmailInstr(t),EmailInstr.Shared().email_instr.visible=!0,Index.Shared().full_mask.visible=!0,Index.Shared().addChildAt(EmailInstr.Shared(),-1)}else Index.Shared().tips.showTips(e.msg);Index.Shared().wait.hide()},error:function(e){Index.Shared().wait.hide(),Index.Shared().tips.showTips("网络错误！请重新尝试！")}},e.currentTarget)},t.prototype.dataChanged=function(){this.e_time.text=this.data.datetime.slice(0,10),this.e_content.text=this.data.content,this.e_title.text=this.data.title,this.isReceive=this.data.isReceive,this.e_icon.source="auction_json.email_type_"+this.data.curType,this.id=this.data.id},t}(eui.ItemRenderer);__reflect(EmailList.prototype,"EmailList");var ScrollerEmail=function(e){function t(t,i){var n=e.call(this)||this;return n.list=new eui.List,n.is_need_more=0,n.news_last_id=0,n.skinName="resource/garden_skin/email/ScrollerEmail.exml",n.langData=Main.Shared().lang_config,n.list.itemRenderer=EmailList,n.collection=t,n.news_last_id=i,n.list.dataProvider=new eui.ArrayCollection(n.collection),n.scroller_email.viewport=n.list,n.scroller_email.addEventListener(eui.UIEvent.CHANGE,n.moveHandler,n),n.scroller_email.addEventListener(eui.UIEvent.CHANGE_END,n.outHandler,n),n}return __extends(t,e),t.Shared=function(e,i){return this.share&&(this.share=new t(e,i)),this.share},t.prototype.moveHandler=function(e){this.scroller_email.viewport.scrollV>this.scroller_email.viewport.contentHeight-this.scroller_email.viewport.height+40&&(this.is_need_more>-1?this.is_need_more=1:Index.Shared().tips.showTips(this.langData.scrollerEmailTs.no_more))},t.prototype.outHandler=function(e){this.is_need_more>0&&(this.is_need_more=0,this.loreMore())},t.prototype.loreMore=function(){var e=this;Index.Shared().wait.show();var t=new HttpReq,i="v1.1/wutong/email_list";return t.GET({url:i,data:{lastId:this.news_last_id},success:function(t){var t=JSON.parse(t);if(0==t.code){var i=t.data.emailList;if(i.length>0){for(var n=0;n<i.length;n++)e.collection.push(i[n]);e.news_last_id=i[i.length-1].id}else Index.Shared().tips.showTips(e.langData.scrollerEmailTs.no_more),e.is_need_more=-1}else Index.Shared().tips.showTips(t.msg);Index.Shared().wait.hide()},error:function(){Index.Shared().wait.hide(),Index.Shared().tips.showTips(e.langData.scrollerEmailTs.network_error)}})},t}(eui.Scroller);__reflect(ScrollerEmail.prototype,"ScrollerEmail");var Exchange=function(e){function t(){var t=e.call(this)||this;return t.svc_val=0,t.gold_val=0,t.tips=new Tips,t.wait=new Wait,t.timeCount=!1,t.top=0,t.left=0,t.right=0,t.bottom=0,t.skinName="resource/garden_skin/goldCoin/Exchange.exml",t.data=Main.Shared().lang_config,t.addChild(t.tips),t.addChild(t.wait),t.confirm.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onConfirmExchange,t),t.goBack.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onGoBack,t),t.add.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onAddBegin,t),t.add.addEventListener(egret.TouchEvent.TOUCH_END,t.onTouchEnd,t),t.add.addEventListener(egret.TouchEvent.TOUCH_CANCEL,t.onTouchEnd,t),t.del.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onDelBegin,t),t.del.addEventListener(egret.TouchEvent.TOUCH_END,t.onTouchEnd,t),t.del.addEventListener(egret.TouchEvent.TOUCH_CANCEL,t.onTouchEnd,t),t}return __extends(t,e),t.Shared=function(){return null==this.share&&(this.share=new t),this.share},t.prototype.onShowExchange=function(){var e=this;this.wait.show();var t=new HttpReq,i="v1.1/coin/get_exchange_ratio";return t.GET({url:i,data:{lastId:0},success:function(t){var t=JSON.parse(t);0==t.code?(e.change_ratio.text=t.data.svcExchangeRatio,e.change_ratio_val=t.data.svcExchangeRatio,e.svc=t.data.svcAmount>0?t.data.svcAmount:0):e.tips.showTips(t.msg),e.wait.hide()},error:function(){e.wait.hide(),e.tips.showTips(e.data.scrollerEmailTs.network_error)}})},t.prototype.onSvcAdd=function(e){return this.svc_val+100>this.svc?(this.tips.showTips(this.data.goldCoin.not_enough_svc),this.onTouchEnd(e),!1):(this.svc_val+=100,this.gold_val=this.svc_val*this.change_ratio_val,this.svc_inp.text=this.svc_val+"",void(this.gold_inp.text=this.gold_val+""))},t.prototype.onSvcDel=function(e){return 0==this.svc_val?(this.onTouchEnd(e),!1):(this.svc_val-=100,this.gold_val=this.svc_val*this.change_ratio_val,this.svc_inp.text=this.svc_val+"",void(this.gold_inp.text=this.gold_val+""))},t.prototype.onAddBegin=function(e){return this.timeCount?!1:(this.onSvcAdd(e),void(this.timeCount=egret.setInterval(this.onSvcAdd,this,100)))},t.prototype.onDelBegin=function(e){return this.timeCount?!1:(this.onSvcDel(e),void(this.timeCount=egret.setInterval(this.onSvcDel,this,100)))},t.prototype.onTouchEnd=function(e){return this.timeCount?(egret.clearInterval(this.timeCount),void(this.timeCount=!1)):!1},t.prototype.onConfirmExchange=function(e){var t=this;if(0==this.svc_val)return this.tips.showTips(this.data.goldCoin.svc_empyt),!1;this.wait.show();var i=new HttpReq,n="v1.1/coin/put_order";return i.POST({url:n,data:{exchangeNum:this.svc_val},success:function(e){var e=JSON.parse(e);if(0==e.code){var i=e.data;Common.Shared().setCookie("app_method",'{"type":"svcPay","orderId":"'+i.orderId+'","payOrder":"'+i.payOrder+'"}',30),setTimeout(function(){t.svc_val=0,t.gold_val=0,t.svc_inp.text=t.svc_val+"",t.gold_inp.text=t.gold_val+""},2e3)}else t.tips.showTips(e.msg);t.wait.hide()},error:function(){t.wait.hide(),t.tips.showTips(t.data.scrollerEmailTs.network_error)}})},t.prototype.onGoBack=function(){this.parent.addChild(Gold.Shared()),this.parent.removeChild(this),Gold.Shared().onShowGold()},t}(eui.ItemRenderer);__reflect(Exchange.prototype,"Exchange");var Gold=function(e){function t(){var t=e.call(this)||this;return t.goldAmountVal=0,t.empty=new Empty,t.tips=new Tips,t.wait=new Wait,t.top=0,t.left=0,t.right=0,t.bottom=0,t.skinName="resource/garden_skin/goldCoin/Gold.exml",t.data=Main.Shared().lang_config,t.addChild(t.tips),t.addChild(t.wait),t.confirmExchange.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onToExchange,t),t.goBack.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onGoBack,t),t}return __extends(t,e),t.Shared=function(){return null==this.share&&(this.share=new t),this.share},t.prototype.onShowGold=function(){var e=this;this.goldLog.contains(this.scroller_log)&&this.goldLog.removeChild(this.scroller_log);var t=new HttpReq,i="v1.1/coin/show_logs";return this.wait.show(),t.GET({url:i,data:{lastId:0},success:function(t){var t=JSON.parse(t);if(0==t.code){var i=t.data.coinLogs;e.goldAmount.text=t.data.coin,e.goldAmountVal=t.data.coin,i.length>0?(e.scroller_log=new ScrollerLog(i,i[i.length-1].id),e.goldLog.addChild(e.scroller_log)):(e.empty.onShowEmpty(),e.empty.empty_text.text=e.data.goldCoin.no_log,e.empty.horizontalCenter="0",e.empty.verticalCenter="0",e.goldLog.addChild(e.empty))}else e.tips.showTips(t.msg);e.wait.hide()},error:function(){e.wait.hide(),e.tips.showTips(e.langData.scrollerEmailTs.network_error)}})},t.prototype.onToExchange=function(e){this.parent.addChild(Exchange.Shared()),this.parent.removeChild(this),Exchange.Shared().onShowExchange()},t.prototype.onGoBack=function(){this.parent.addChild(Index.Shared()),this.parent.removeChild(this)},t}(eui.ItemRenderer);__reflect(Gold.prototype,"Gold");var GoldLogList=function(e){function t(){var t=e.call(this)||this;return t.top=0,t.left=0,t.right=0,t.bottom=0,t.skinName="resource/garden_skin/goldCoin/GoldLogList.exml",t.data=Main.Shared().lang_config,t.cacheAsBitmap=!0,t}return __extends(t,e),t.Shared=function(){return null==this.share&&(this.share=new t),this.share},t.prototype.dataChanged=function(){1==this.data.changeType?this.logChange.text="+"+this.data.changeNum:this.logChange.text="-"+this.data.changeNum,this.logText.text=this.data.content,this.logTime.text=this.data.datetime},t}(eui.ItemRenderer);__reflect(GoldLogList.prototype,"GoldLogList");var ScrollerLog=function(e){function t(t,i){var n=e.call(this)||this;return n.list=new eui.List,n.is_need_more=0,n.log_last_id=0,n.top=0,n.left=0,n.right=0,n.bottom=0,n.skinName="resource/garden_skin/goldCoin/ScrollerLog.exml",n.langData=Main.Shared().lang_config,n.list.itemRenderer=GoldLogList,n.collection=t,n.log_last_id=i,n.list.dataProvider=new eui.ArrayCollection(n.collection),n.scroller_log.viewport=n.list,n.scroller_log.addEventListener(eui.UIEvent.CHANGE,n.moveHandler,n),n.scroller_log.addEventListener(eui.UIEvent.CHANGE_END,n.outHandler,n),n}return __extends(t,e),t.Shared=function(e,i){return null==this.share&&(this.share=new t(e,i)),this.share},t.prototype.moveHandler=function(e){this.scroller_log.viewport.scrollV>this.scroller_log.viewport.contentHeight-this.scroller_log.viewport.height+40&&(this.is_need_more>-1?this.is_need_more=1:Gold.Shared().tips.showTips(this.langData.scrollerEmailTs.no_more))},t.prototype.outHandler=function(e){this.is_need_more>0&&(this.is_need_more=0,this.loreMore())},t.prototype.loreMore=function(){var e=this;Gold.Shared().wait.show();var t=new HttpReq,i="v1.1/coin/show_logs";return t.GET({url:i,data:{lastId:this.log_last_id},success:function(t){var t=JSON.parse(t);if(0==t.code){var i=t.data.coinLogs;if(i.length>0){for(var n=0;n<i.length;n++)e.collection.push(i[n]);e.log_last_id=i[i.length-1].id}else Gold.Shared().tips.showTips(e.langData.scrollerEmailTs.no_more),e.is_need_more=-1}else Gold.Shared().tips.showTips(t.msg);Gold.Shared().wait.hide()},error:function(){Gold.Shared().wait.hide(),Gold.Shared().tips.showTips(e.langData.scrollerEmailTs.network_error)}})},t}(eui.Scroller);__reflect(ScrollerLog.prototype,"ScrollerLog");var Binding=function(e){function t(){var t=e.call(this)||this;return t.tips=new Tips,t.wait=new Wait,t.top=0,t.left=0,t.right=0,t.bottom=0,t.skinName="resource/garden_skin/miner/Binding.exml",t.data=Main.Shared().lang_config,t.addChild(t.tips),t.addChild(t.wait),t.adderss.restrict="A-Za-z0-9",t.adderss.textColor=11633486,t.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseBinding,t),t.btn_success.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseBinding,t),t.btn_close_status.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseStatus,t),t.btn_goBinding.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onGotoBinding,t),t.btn_down.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onGoToWallet,t),t.btn_down_group.addEventListener(egret.TouchEvent.TOUCH_TAP,t.goWallet,t),t.btn_close_down.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseWallet,t),t.btn_close_goto.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseGoto,t),t.btn_binding.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onBtnBinding,t),t.btn_goPlay.addEventListener(egret.TouchEvent.TOUCH_TAP,t.goToPlay,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.goWallet=function(e){Common.Shared().setCookie("app_method",'{"type":"goWallet","url":"http://www.maiguoer.com/data/download"}',30)},t.prototype.onNextTime=function(){this.head_img.source=this.data.binding.heat_img,this.binding.visible=!0,this.goto_group.visible=!1,this.binding_status.visible=!1,this.status_txt.text=this.data.binding.unfortunately,this.btn_success.visible=!0,this.btn_goBinding.visible=!1,this.btn_down.visible=!1},t.prototype.onHasBinding=function(){this.head_img.source=this.data.binding.binding_img,this.binding.visible=!0,this.goto_group.visible=!1,this.binding_status.visible=!1,this.status_txt.text=this.data.binding.successfully,this.btn_goBinding.visible=!0,this.btn_down.visible=!0,this.btn_success.visible=!1},t.prototype.onCloseBinding=function(){this.binding.visible=!1,this.btn_goBinding.visible=!1,this.btn_down.visible=!1,this.btn_success.visible=!1,this.down_group.visible=!1,this.status_txt.text="",Index.Shared().full_mask.visible=!1,Records.Shared().full_mask.visible=!1},t.prototype.onGotoBinding=function(){this.binding.visible=!1,this.goto_group.visible=!0,this.binding_status.visible=!1,this.binding.visible=!1},t.prototype.onGoToWallet=function(){this.down_group.visible=!0,this.binding.visible=!1},t.prototype.onCloseWallet=function(){this.down_group.visible=!1,this.binding.visible=!0},t.prototype.onCloseGoto=function(){this.adderss.text="",this.goto_group.visible=!1,this.binding.visible=!0},t.prototype.onBtnBinding=function(){var e=this,t=new Params("miner/wallet/bind_wallet"),i=t.mergeDataByJsonStr({walletAddr:this.adderss.text});Records.Shared().ws.sendData({data:i,receiveCallBack:function(t){e.wait.hide(),0==t.code?(e.binding.visible=!1,e.goto_group.visible=!1,e.binding_status.visible=!0,Records.Shared().onShowIncome()):Records.Shared().tips.showTips(t.msg)}})},t.prototype.onCloseStatus=function(){this.binding_status.visible=!1,Index.Shared().full_mask.visible=!1},t.prototype.goToPlay=function(){},t}(eui.ItemRenderer);__reflect(Binding.prototype,"Binding");var ChangeLink=function(e){function t(){var t=e.call(this)||this;return t.theLink="",t.codeStatus=0,t.top=0,t.left=0,t.right=0,t.bottom=0,t.skinName="resource/garden_skin/miner/ChangeLink.exml",t.code_input.maxChars=6,t.code_input.restrict="0-9",t.code_input.inputType=egret.TextFieldInputType.TEL,t.address_input.restrict="A-Da-d0-9",t.data=Main.Shared().lang_config,t.btn_getCode.addEventListener(egret.TouchEvent.TOUCH_TAP,t.getTheCode,t),t.btn_close_code.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseCode,t),t.btn_close_address.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseCode,t),t.btn_close_pay.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseCode,t),t.btn_close_status.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseCode,t),t.btn_status_confrim.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseCode,t),t.btn_push_code.addEventListener(egret.TouchEvent.TOUCH_TAP,t.btnPushCode,t),t.btn_wallet.addEventListener(egret.TouchEvent.TOUCH_TAP,t.showPayHand,t),t.btn_confrim.addEventListener(egret.TouchEvent.TOUCH_TAP,t.pushNewWallet,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.getTheCode=function(e){var i=this;this.code_input.text="",Records.Shared().wait.show(),this.contdown=60;var n=new Params("miner/sms/send_sms"),r=n.mergeDataByJsonStr({});Records.Shared().ws.sendData({data:r,receiveCallBack:function(e){Records.Shared().wait.hide(),0==e.code?(t.Shared().codeStatus=1,t.Shared().inputEnabled(),t.Shared().timer=setInterval(function(){t.Shared().contdown>0?(t.Shared().contdown--,t.Shared().btn_getCode.touchEnabled=!1,t.Shared().btn_getCode.touchChildren=!1,t.Shared().btn_get_txt.text=t.Shared().contdown+"S"):t.Shared().clearTimer()},1e3),Records.Shared().tips.showTips(i.data.changeLink.sms_has)):Records.Shared().tips.showTips(e.msg)}})},t.prototype.clearTimer=function(){this.btn_getCode.touchChildren=!0,this.btn_getCode.touchEnabled=!0,this.btn_get_txt.text=t.Shared().data.changeLink.get_code,clearInterval(this.timer)},t.prototype.btnPushCode=function(){if(""==this.code_input.text)Records.Shared().tips.showTips(this.data.changeLink.enter_code);else{Records.Shared().wait.show();var e=Number(this.code_input.text),i=new Params("miner/sms/verify_code"),n=i.mergeDataByJsonStr({verifycode:e});Records.Shared().ws.sendData({data:n,receiveCallBack:function(e){Records.Shared().wait.hide(),0==e.code?(t.Shared().code_input.text="",t.Shared().showWalletAddress()):Records.Shared().tips.showTips(e.msg)}})}},t.prototype.pushNewWallet=function(){Common.Shared().secondPwd(this.afterPwd,t.Shared().go_pay,!0,this.theLink)},t.prototype.afterPwd=function(e,i){Records.Shared().wait.show();var n=hex_md5(e),r=new Params("miner/wallet/change_wallet"),o=r.mergeDataByJsonStr({wallet:i,pinCode:n});Records.Shared().ws.sendData({data:o,receiveCallBack:function(e){Records.Shared().wait.hide(),0==e.code?t.Shared().onSuccessStatus():t.Shared().onLoserStatus()}})},t.prototype.showGetCode=function(e){this.contdown=0,this.inputEnabled(),this.get_code.visible=!0,this.wallet_address.visible=!1,this.go_pay.visible=!1,this.pay_status.visible=!1},t.prototype.showWalletAddress=function(){this.get_code.visible=!1,this.wallet_address.visible=!0,this.go_pay.visible=!1,this.pay_status.visible=!1},t.prototype.showPayHand=function(){this.theLink=this.address_input.text,this.the_dec.text=this.data.changeLink.you_have+Records.Shared().taxNum+this.data.changeLink.the_money,this.get_code.visible=!1,this.wallet_address.visible=!1,this.go_pay.visible=!0,this.pay_status.visible=!1},t.prototype.onCloseCode=function(){this.codeStatus=0,this.clearTimer(),this.code_input.text="",this.get_code.visible=!1,this.wallet_address.visible=!1,this.go_pay.visible=!1,this.pay_status.visible=!1,Records.Shared().full_mask.visible=!1},t.prototype.onSuccessStatus=function(){this.get_code.visible=!1,this.wallet_address.visible=!1,this.go_pay.visible=!1,this.pay_status.visible=!0,this.status_txt.text=this.data.changeLink.pay_succe+this.theLink,ScrollerRecordsIncome.Shared().the_link.text=this.theLink},t.prototype.onLoserStatus=function(){this.get_code.visible=!1,this.wallet_address.visible=!1,this.go_pay.visible=!1,this.pay_status.visible=!0,this.status_txt.text=this.data.changeLink.faild},t.prototype.inputEnabled=function(){0==this.codeStatus?(console.log(1),this.code_input.touchEnabled=!1):(console.log(2),this.code_input.touchEnabled=!0)},t}(eui.ItemRenderer);__reflect(ChangeLink.prototype,"ChangeLink");var Character=function(e){function t(){var t=e.call(this)||this;return t.tips=new Tips,t.wait=new Wait,t.skinName="resource/garden_skin/miner/Character.exml",t.data=Main.Shared().lang_config,t.addChild(t.tips),t.addChild(t.wait),t.ws=WsReq.Shared(),t.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,t.closeSelf,t),t.tips_close.addEventListener(egret.TouchEvent.TOUCH_TAP,t.closeGroupTips,t),t.btn_buy.addEventListener(egret.TouchEvent.TOUCH_TAP,t.paySkin,t),t.btn_service.addEventListener(egret.TouchEvent.TOUCH_TAP,t.serveceInfo,t),t.introduction.addEventListener(egret.TouchEvent.TOUCH_TAP,t.showIntroduction,t),t.btn_close_intro.addEventListener(egret.TouchEvent.TOUCH_TAP,t.closeIntroduction,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.showCharacter=function(){var e=this;Working.Shared().wait.show();var i=new Params("miner/skins"),n=i.mergeDataByJsonStr({});this.ws.sendData({data:n,receiveCallBack:function(i){Working.Shared().wait.hide(),0==i.code?(Working.Shared().full_mask.visible=!0,console.log(i.data),e.showRendering(i.data.skins)):t.Shared().tips.showTips(i.msg)}})},t.prototype.closeSelf=function(){Working.Shared().removeChild(t.Shared()),Working.Shared().full_mask.visible=!1},t.prototype.showRendering=function(e){this.list_box.removeChildren();var t=new eui.List,i=e;t.itemRenderer=CharacterList,t.dataProvider=new eui.ArrayCollection(i),this.list_box.addChild(t)
},t.prototype.showIntroduction=function(){this.group_intro.visible=!0},t.prototype.closeIntroduction=function(){this.group_intro.visible=!1},t.prototype.showGroup=function(e,t,i){this.group_tips.visible=!0,1==t?(this.btn_service.visible=!1,this.btn_buy.visible=!0,this.tips_text.text="尚未拥有该皮肤，是否花费"+e+"购买"):(this.btn_service.visible=!0,this.btn_buy.visible=!1,this.tips_text.text="是否花费"+e+"进行维修皮肤?"),i&&(this.skinId=i)},t.prototype.closeGroupTips=function(){this.group_tips.visible=!1},t.prototype.paySkin=function(){var e=this,i=new Params("miner/skin/buy_skin"),n=i.mergeDataByJsonStr({skinId:this.skinId});this.ws.sendData({data:n,receiveCallBack:function(i){Working.Shared().wait.hide(),0==i.code?(e.payDetail=i.data,t.Shared().payToolInfo(e.payDetail)):t.Shared().tips.showTips(i.msg)}})},t.prototype.payToolInfo=function(e){Common.Shared().secondPwd(this.payAfterPwd,t.Shared().group_tips,!1,e)},t.prototype.payAfterPwd=function(e,i){Working.Shared().wait.show();var n=hex_md5(e),r=new Params("pay/confirm_pay"),o=r.mergeDataByJsonStr({orderId:i.orderId,payOrder:i.payOrder,payType:i.payType,pinCode:n});Working.Shared().ws.sendData({data:o,receiveCallBack:function(e){Working.Shared().wait.hide(),0==e.code?(t.Shared().showCharacter(),Working.Shared().tips.showTips(t.Shared().data.character.buy_succ)):Working.Shared().tips.showTips(e.msg)}})},t.prototype.servecePay=function(e){this.payDetail=e},t.prototype.serveceInfo=function(){Common.Shared().secondPwd(this.payAfterPwd,t.Shared().group_tips,!1,this.payDetail)},t}(eui.ItemRenderer);__reflect(Character.prototype,"Character");var CharacterList=function(e){function t(){var t=e.call(this)||this;return t.list_data=Main.Shared().lang_config,t.ws=WsReq.Shared(),t.skinName="resource/garden_skin/miner/CharacterList.exml",t.chara_service.addEventListener(egret.TouchEvent.TOUCH_TAP,t.service,t),t.chara_replace.addEventListener(egret.TouchEvent.TOUCH_TAP,t.replace,t),t}return __extends(t,e),t.prototype.dataChanged=function(){this.chara_img.source=this.data.icon,this.chara_isUse=this.data.isUse,1==this.data.isUse?this.chara_using.visible=!0:this.chara_using.visible=!1,1==this.data.gender?this.chara_name.text="人物-男":2==this.data.gender&&(this.chara_name.text="人物-女"),this.chara_gain.text=this.data.weight,this.chara_durable.text=this.data.duration,this.chara_price.text=this.data.price+"金币",this.chara_id=this.data.id,this.chara_isOwn=this.data.isOwn},t.prototype.service=function(){if(console.log(this.chara_isOwn),0==this.chara_isOwn)Character.Shared().showGroup(this.chara_price.text,1,this.chara_id);else{if(1==this.chara_isUse)return Working.Shared().tips.showTips("当前正在使用"),!1;var e=new Params("miner/skin/change_skin"),t=e.mergeDataByJsonStr({skinId:this.chara_id});this.ws.sendData({data:t,receiveCallBack:function(e){Working.Shared().wait.hide(),0==e.code?Character.Shared().showCharacter():Character.Shared().tips.showTips(e.msg)}})}},t.prototype.replace=function(){var e=new Params("miner/skin/repair_skin"),t=e.mergeDataByJsonStr({skinId:this.chara_id});this.ws.sendData({data:t,receiveCallBack:function(e){Working.Shared().wait.hide(),0==e.code?(Character.Shared().showGroup(e.data.amount+"金币",2),Character.Shared().servecePay(e.data)):Character.Shared().tips.showTips(e.msg)}})},t.prototype.paySkin=function(){var e=new Params("miner/skin/buy_skin"),t=e.mergeDataByJsonStr({skinId:this.chara_id});this.ws.sendData({data:t,receiveCallBack:function(e){Working.Shared().wait.hide(),0==e.code||Character.Shared().tips.showTips(e.msg)}})},t}(eui.ItemRenderer);__reflect(CharacterList.prototype,"CharacterList");var Extract=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/miner/Extract.exml",t.data=Main.Shared().lang_config,t.num_input.inputType=egret.TextFieldInputType.TEL,t.num_input.restrict="0-9",t.btn_go_back.addEventListener(egret.TouchEvent.TOUCH_TAP,t.go_back,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.go_back=function(){this.parent.contains(Records.Shared())||this.parent.addChild(Records.Shared()),this.parent.removeChild(this),Records.Shared().onShowIncome()},t}(eui.ItemRenderer);__reflect(Extract.prototype,"Extract");var GainContent=function(e){function t(){var t=e.call(this)||this;return t.top=0,t.left=0,t.right=0,t.bottom=0,t.skinName="resource/garden_skin/miner/GainContent.exml",t.data=Main.Shared().lang_config,t.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseGain,t),t.btn_success.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseGain,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.showGainContent=function(e){this.gain_group.visible=!0,Working.Shared().full_mask.visible=!0;var t=0,i="";for(var n in e)if(0!=e[n]){switch(n){case"basic":i=this.data.gainContent.basic_user;break;case"phoenix":i=this.data.gainContent.ph_bird;break;case"fruitToken":i=this.data.gainContent.fruit;break;case"unionMember":i=this.data.gainContent.alliance_maker;break;case"unionMerchant":i=this.data.gainContent.member;break;case"minerSkin":i=this.data.gainContent.miner_skin;break;case"medalAward":i=this.data.gainContent.invite}if("total"!=n){var r=new GainList;r.the_text.text=i+"x"+e[n],r.y=45*t,t++,r.x=0,this.list_box.addChild(r)}}switch(t){case 6:this.gain_group.height=690;break;case 5:this.gain_group.height=650;break;case 4:this.gain_group.height=610;break;case 3:this.gain_group.height=560;break;case 2:this.gain_group.height=520;break;case 1:this.gain_group.height=480}},t.prototype.onCloseGain=function(){this.list_box.removeChildren(),this.gain_group.visible=!1,Working.Shared().full_mask.visible=!1},t}(eui.ItemRenderer);__reflect(GainContent.prototype,"GainContent");var GainList=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/miner/GainList.exml",t}return __extends(t,e),t}(eui.ItemRenderer);__reflect(GainList.prototype,"GainList");var GoodsIntro=function(e){function t(){var t=e.call(this)||this;return t.top=0,t.left=0,t.right=0,t.bottom=0,t.skinName="resource/garden_skin/miner/GoodsIntro.exml",t.data=Main.Shared().lang_config,t.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseGoodsIntro,t),t.btn_use_tool.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onUseTool,t),t.btn_use_tool_1.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onUseTool,t),t.btn_buy_tool.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPayTool,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.onCloseGoodsIntro=function(){this.goods_name.text="",this.props.visible=!1,MinerGoods.Shared().minerGoods.visible=!0},t.prototype.onShowIntro=function(e,t){var i=this;Working.Shared().wait.show(),this.goods_intro.removeChildren(),this.props.visible=!0,this.key=e,this.num=0,this.goodId=0;var n=MinerGoods.Shared().toolList[e].id;if(17==n?this.use_prop_bg.source="minerV1_json.clz_jwj _2x":this.use_prop_bg.source="auction_json.baidikuang",-1==e.indexOf("egg")){var r=new Params("miner/tool/tool_info"),o=r.mergeDataByJsonStr({toolId:n});Working.Shared().ws.sendData({data:o,receiveCallBack:function(e){if(Working.Shared().wait.hide(),0==e.code){MinerGoods.Shared().toolList[i.key]=e.data.toolInfo,i.toolInfo=MinerGoods.Shared().toolList[i.key],Common.Shared().loadImg(e.data.toolInfo.icon).then(function(e){i.use_prop_img.source=e});i.toolInfo.extra;i.num=i.toolInfo.num,i.goodId=i.toolInfo.id,console.log(i.goodId),20==i.goodId?i.goods_name.text=parseInt(i.toolInfo.price)+i.data.goodsIntro.mge_num:i.goods_name.text=parseInt(i.toolInfo.price)+i.data.goodsIntro.shared_num,i.egg_num_group.visible=!1,1==i.toolInfo.isBuy?(i.btn_buy_tool.visible=!0,i.btn_use_tool.visible=!0,i.btn_use_tool_1.visible=!1,i.goods_name.visible=!0):(i.btn_buy_tool.visible=!1,i.btn_use_tool.visible=!1,i.btn_use_tool_1.visible=!0,i.goods_name.visible=!1),i.introHtml=Common.Shared().getITextElement(i.toolInfo.tips,427,i.goods_intro.height,30,0,0),i.goods_intro.addChild(i.introHtml),console.log(i.goods_intro.height);var t=i.introHtml.height-100;i.goods_intro.height=t+100,i.props.height=t+640,i.intro_group.height=t+30}else Working.Shared().tips.showTips(e.msg)}})}else{var r=new Params("miner/tool/egg_info"),o=r.mergeDataByJsonStr({eggId:n});Working.Shared().ws.sendData({data:o,receiveCallBack:function(e){if(Working.Shared().wait.hide(),0==e.code){MinerGoods.Shared().toolList[i.key]=e.data.eggInfo,i.toolInfo=MinerGoods.Shared().toolList[i.key],Common.Shared().loadImg(e.data.eggInfo.icon).then(function(e){i.use_prop_img.source=e});var t=i.toolInfo.extra;i.num=i.toolInfo.num,i.goodId=i.toolInfo.id,i.goods_name.text=t.fullName,i.egg_num_group.visible=!0,i.egg_num.text=t.NO,i.btn_buy_tool.visible=!0,i.btn_use_tool.visible=!0,i.btn_use_tool_1.visible=!1,i.introHtml=Common.Shared().getITextElement('<font color="#3C2405" face="PingFang SC">  增加'+i.toolInfo.extra.minerAddHP+"点体力值</font>",427,i.goods_intro.height,30,0,0),i.goods_intro.addChild(i.introHtml);var n=i.introHtml.height-100;i.goods_intro.height=n+180,i.props.height=n+680,i.intro_group.height=n+150}else Working.Shared().tips.showTips(e.msg)}})}},t.prototype.onUseTool=function(){if(0==this.toolInfo.num)return Working.Shared().tips.showTips(this.data.propsIntroTs.not_enough),!1;this.props.visible=!1;var e=GoodsUse.Shared();e.onShowTheUse(this.toolInfo,this.key),Working.Shared().addChild(e)},t.prototype.onPayTool=function(){if(-1==this.key.indexOf("egg")){this.props.visible=!1;var e=GoodsPay.Shared();e.onShowGoodsPay(this.toolInfo,this.key),Working.Shared().addChild(e)}else this.onCloseGoodsIntro(),MinerGoods.Shared().onCloseTheGoods(),Working.Shared().parent.addChild(Transaction.Shared()),Working.Shared().parent.removeChild(Working.Shared()),Transaction.Shared().onTransactionLists({},2)},t}(eui.ItemRenderer);__reflect(GoodsIntro.prototype,"GoodsIntro");var Common=function(){function e(){this.lang_config=Main.Shared().lang_config,this.inputStr=""}return e.Shared=function(){return null==this.share&&(this.share=new e),this.share},e.prototype.secondToTime=function(e,t){t||(t=3);var i="";if(e>-1){var n=Math.floor(e/3600),r=Math.floor(e/60)%60,o=e%60;10>n&&(n="0"+n.toString()),10>r&&(r="0"+r.toString()),10>o&&(o="0"+o.toFixed(0).toString());for(var a=[n,r,o],s=0;t>s;s++)i+=""==i?a[s]:":"+a[s]}return i},e.prototype.createCircleMask=function(e,t,i,n,r,o){return __awaiter(this,void 0,void 0,function(){var a,s,h;return __generator(this,function(d){switch(d.label){case 0:return a=new eui.Group,n=n>0?n:0,r=r>0?r:0,[4,this.createImage(e,t,i,n,r,o)];case 1:return s=d.sent(),h=new egret.Shape,h.graphics.beginFill(0,1),h.graphics.drawCircle(e/2+n,e/2+r,e/2),s.mask=h,a.addChild(h),a.addChild(s),[2,a]}})})},e.prototype.createImage=function(t,i,n,r,o,a){return __awaiter(this,void 0,void 0,function(){var s,h;return __generator(this,function(d){switch(d.label){case 0:return"string"!=typeof n?[3,4]:(s=new eui.Image,s.cacheAsBitmap=!0,a?(h=s,[4,e.Shared().loadImg(n)]):[3,2]);case 1:return h.source=d.sent(),[3,3];case 2:s.source=n,d.label=3;case 3:return[3,5];case 4:s=n,d.label=5;case 5:return s.width=t,s.height=i,s.x=r>0?r:0,s.y=o>0?o:0,[2,s]}})})},e.prototype.setCookie=function(e,t,i){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3);var r="expires="+n.toUTCString();document.cookie=e+"="+encodeURI(t)+"; "+r},e.prototype.getCookie=function(e){var t,i=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(i))?decodeURI(t[2]):null},e.prototype.delCookie=function(e){var t=new Date;t.setTime(t.getTime()-1);var i=this.getCookie(e);null!=i&&(document.cookie=e+"="+i+";expires="+t.toISOString())},e.prototype.getRndNum=function(e){var t="";e=e?e:1;for(var i=0;e>i;i++)t+=Math.floor(10*Math.random());return t},e.prototype.mergeObj=function(e,t){for(var i in t)e[i]=t[i];return e},e.prototype.mc=function(e,t,i,n,r){return __awaiter(this,void 0,void 0,function(){var o,a,s,h,o,a,s,h;return __generator(this,function(d){switch(d.label){case 0:return r?[4,this.loadImg(localStorage.getItem("imgUrl")+"mc/"+e+"_tex.png")]:[3,3];case 1:return o=d.sent(),[4,this.loadText(localStorage.getItem("imgUrl")+"mc/"+e+"_mc.json",RES.ResourceItem.TYPE_JSON)];case 2:return a=d.sent(),s=new egret.MovieClipDataFactory(a,o),h=new egret.MovieClip(s.generateMovieClipData(e+"_mc_1")),h.x=t,h.y=i,n&&h.addEventListener(egret.Event.COMPLETE,function(e){n.removeChild(h)},n),[2,h];case 3:return o=RES.getRes(e+"_tex_png"),a=RES.getRes(e+"_mc_json"),s=new egret.MovieClipDataFactory(a,o),h=new egret.MovieClip(s.generateMovieClipData(e+"_mc_1")),h.x=t,h.y=i,n&&h.addEventListener(egret.Event.COMPLETE,function(e){n.removeChild(h)},n),[2,h]}})})},e.prototype.dbMc=function(e,t){return __awaiter(this,void 0,void 0,function(){var i,n,r,o,i,n,r,o;return __generator(this,function(a){switch(a.label){case 0:return t?[4,this.loadImg(localStorage.getItem("imgUrl")+"mc/"+e+"_tex.png")]:[3,4];case 1:return i=a.sent(),[4,this.loadText(localStorage.getItem("imgUrl")+"mc/"+e+"_ske.dbbin",RES.ResourceItem.TYPE_BIN)];case 2:return n=a.sent(),[4,this.loadText(localStorage.getItem("imgUrl")+"mc/"+e+"_tex.json",RES.ResourceItem.TYPE_JSON)];case 3:return r=a.sent(),this.egretFactory||(this.egretFactory=dragonBones.EgretFactory.factory),this.egretFactory.parseDragonBonesData(n),this.egretFactory.parseTextureAtlasData(r,i),o=this.egretFactory.buildArmatureDisplay(e),o.armature.cacheFrameRate=20,[2,o];case 4:return i=RES.getRes(e+"_tex_png"),n=RES.getRes(e+"_ske_dbbin"),r=RES.getRes(e+"_tex_json"),this.egretFactory||(this.egretFactory=dragonBones.EgretFactory.factory),this.egretFactory.parseDragonBonesData(n),this.egretFactory.parseTextureAtlasData(r,i),o=this.egretFactory.buildArmatureDisplay(e),o.armature.cacheFrameRate=20,[2,o]}})})},e.prototype.loadImg=function(e){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(i){return egret.ImageLoader.crossOrigin="anonymous",[2,new Promise(function(i,n){RES.getResByUrl(e,function(e){i(e)},t,RES.ResourceItem.TYPE_IMAGE)})]})})},e.prototype.loadText=function(e,t){return __awaiter(this,void 0,void 0,function(){var i=this;return __generator(this,function(n){return[2,new Promise(function(n,r){RES.getResByUrl(e,function(e){n(e)},i,t)})]})})},e.prototype.getTimeStatus=function(){var e=new Date,t=e.getFullYear(),i=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():e.getDate(),r=new Date(t+"-"+i+"-"+n+" 00:00:00").getTime();r||(r=new Date(t+"/"+i+"/"+n+" 00:00:00").getTime());var o=r+216e5,a=r+252e5,s=r+648e5,h=r+72e6,d=(new Date).getTime();return d>a&&s>d?"d":d>h||o>d?"n":"e"},e.prototype.getImgByStatus=function(e,t,i){t&&(t=10==t?10:t>6&&10>t?7:t>3&&7>t?4:1);var n=this.getTimeStatus();return 3==e?"fruit_"+i+"_"+t+"_"+n+".png":2==e?"tree_"+t+"_"+n+".png":1==e?"bg_"+n+"_png":void 0},e.prototype.getPh=function(e,t,i){if(0!=e&&1==i)return"auction_json.auc_n_u";var n="";n=0==e?"z":"n";var r="";return 0==t?(r="u","auction_json.auc_"+n+"_"+r):1==t?(r="m","auction_json.auc_"+n+"_"+r):2==t?(r="w","auction_json.auc_"+n+"_"+r):void 0},e.prototype.getPhImg=function(e,t){var i="",n="";return 1==e?(i="e",n="u"):1==t?(i="f",n="m"):2==t?(i="f",n="w"):(i="e",n="u"),"auction_json.ph_"+i+"_"+n},e.prototype.getPhText=function(e,t){var i=0;return i=1==e?0:0==t?0:26},e.prototype.getChar=function(e,t){return e.substring(0,t+1)},e.prototype.getITextElement=function(e,t,i,n,r,o,a){var s=new egret.TextField;return s.width=t,s.x=r,s.y=o,s.size=n,s.lineSpacing=20,1==a&&(s.bold=!0),s.textColor=3941381,s.fontFamily="PingFang-SC-Medium",s.textAlign=egret.HorizontalAlign.LEFT,s.textFlow=(new egret.HtmlTextParser).parser(e),s},e.prototype.getCountDays=function(e){var t=(new Date).getTime(),i=new Date(e).getTime(),n=i+1296e6,r=Math.ceil((n-t)/864e5),o="剩余"+r+"天";return o},e.prototype.onInput=function(t){if("cell"==t.target.className)switch(e.Shared().keyboard.classList.add("disabled"),t.target.classList.add("cell_hover"),setTimeout(function(){e.Shared().keyboard.classList.remove("disabled")},90),setTimeout(function(){t.target.classList.remove("cell_hover")},100),t.target.innerHTML){case"删除":e.Shared().inputStr=e.Shared().inputStr.substr(0,e.Shared().inputStr.length-1),e.Shared().addNum();break;case"清空":e.Shared().inputStr="",e.Shared().addNum();break;default:if(e.Shared().inputStr.length>6)return!1;e.Shared().inputStr+=t.target.innerHTML,e.Shared().addNum(),6==e.Shared().inputStr.length&&(e.Shared().goBack&&(e.Shared().preTarget.visible=!0),e.Shared().afterSecondPwd&&e.Shared().afterSecondPwd(e.Shared().inputStr,e.Shared().afterData),setTimeout(function(){e.Shared().onHidePwd(),e.Shared().keyboard.removeEventListener("touchstart",e.Shared().onInput),e.Shared().afterSecondPwd=null},100),e.Shared().inputStr="",e.Shared().addNum())}},e.prototype.onHidePwd=function(){this.full_mask.style.display="none",this.keyboard.style.display="none"},e.prototype.secondPwd=function(t,i,n,r){var o=this;if(!this.keyboard){var a=document.createElement("div");a.id="keyboard",a.classList.add("keyboard");var s='<div class="secondPwd"><div id="close" class="close">X</div><div class="title">'+this.lang_config.common.keyboard_title+'</div><div class="tips">'+this.lang_config.common.keyboard_tips+'</div><div class="pwd_content"><div class="pwd"></div><div class="pwd"></div><div class="pwd"></div><div class="pwd"></div><div class="pwd"></div><div class="pwd"></div></div></div><div class="keyboard_bg"><div class="keyboard_content"><div class="number"><div class="cell">1</div></div><div class="number"><div class="cell">2</div></div><div class="number"><div class="cell">3</div></div><div class="number"><div class="cell">4</div></div><div class="number"><div class="cell">5</div></div><div class="number"><div class="cell">6</div></div><div class="number"><div class="cell">7</div></div><div class="number"><div class="cell">8</div></div><div class="number"><div class="cell">9</div></div><div class="number"><div class="cell">'+this.lang_config.common.keyboard_empty+'</div></div><div class="number"><div class="cell">0</div></div><div class="number"><div class="cell">'+this.lang_config.common.keyboard_del+"</div></div></div></div>";a.innerHTML=s,document.getElementsByTagName("body")[0].appendChild(a),this.keyboard=document.getElementById("keyboard"),this.pwdArr=document.getElementsByClassName("pwd");var h=document.createElement("div");h.id="theFullMask",h.classList.add("theFullMask"),h.innerHTML="<div></div>",document.getElementsByTagName("body")[0].appendChild(h),this.full_mask=document.getElementById("theFullMask")}this.preTarget=i,this.goBack=n,this.preTarget&&(this.preTarget.visible=!1),this.afterSecondPwd=t,this.afterData=r,this.keyboard.style.display="block",this.full_mask.style.display="block",this.keyboard.addEventListener("touchstart",this.onInput),document.getElementById("close").addEventListener("click",function(){o.goBack&&o.preTarget&&(o.preTarget.visible=!0),o.inputStr="",o.addNum(),e.Shared().onHidePwd(),o.keyboard.removeEventListener("touchstart",o.onInput),o.afterSecondPwd=null})},e.prototype.addNum=function(){for(var e=0;e<this.pwdArr.length;e++)this.inputStr[e]?this.pwdArr[e].innerHTML="●":this.pwdArr[e].innerHTML=""},e.prototype.createPick=function(e){var t=this;if(this.picker)return this.picker.show(),!1;this.callBack=e,this.year=[],this.month=[],this.day=[],this.hour=[],this.minute=[],this.selectedIndex=[0,0,0,0,0],this.checked=[0,0,0,0,0],this.creatYear(),this.creatMonth(),this.creatDay(),this.creatHour(),this.creatMinute(),this.picker=picker({data:[this.year,this.month,this.day,this.hour,this.minute],selectedIndex:this.selectedIndex,title:"　"});var i=document.getElementsByClassName("picker-choose")[0],n=document.createElement("div");n.classList.add("date_title");var r=document.createElement("div"),o=document.createElement("div"),a=document.createElement("div"),s=document.createElement("div"),h=document.createElement("div");r.innerText="年",o.innerText="月",a.innerText="日",s.innerText="时",h.innerText="分",r.classList.add("cell_title"),o.classList.add("cell_title"),a.classList.add("cell_title"),s.classList.add("cell_title"),h.classList.add("cell_title"),n.appendChild(r),n.appendChild(o),n.appendChild(a),n.appendChild(s),n.appendChild(h),i.appendChild(n);var d=document.createElement("div");d.classList.add("selected"),i.appendChild(d),i.appendChild(n),this.picker.on("picker.select",function(e,i){var n=t.year[t.selectedIndex[0]].text,r=t.month[t.selectedIndex[1]].text,o=t.day[t.selectedIndex[2]].text?t.day[t.selectedIndex[2]].text:"",a=t.hour[t.selectedIndex[3]].text,s=t.minute[t.selectedIndex[4]].text,h=n+"-"+r+"-"+o+" "+a+":"+s+":00";h||(h=n+"/"+r+"/"+o+" "+a+":"+s+":00"),t.callBack(h)}),this.picker.on("picker.change",function(e,i){1===e&&t.secondChange()}),this.picker.show()},e.prototype.creatYear=function(){for(var e=new Date,t=e.getFullYear(),i=0,n=0;2>n;n++){var r=new Object;r.text=t+n,r.value=t+n,this.year.push(r),0==n&&(this.selectedIndex[0]=i),i++}},e.prototype.creatMonth=function(){for(var e=new Date,t=e.getMonth()+1,i=1;13>i;i++){var n=new Object;n.text=10>i?"0"+i:i,n.value=i,this.month.push(n),t==i&&(this.selectedIndex[1]=i-1)}},e.prototype.creatDay=function(){var e=new Date,t=e.getDate(),i=this.mGetDate(this.checked[0],this.month[this.selectedIndex[1]].value);this.day=[];for(var n=1;i>=n;n++){var r=new Object;r.text=10>n?"0"+n:n,r.value=n,this.day.push(r),t==n&&(this.selectedIndex[2]=n-1)}},e.prototype.creatHour=function(){for(var e=new Date,t=e.getHours(),i=1;25>i;i++){var n=new Object;n.text=10>i?"0"+i:i,n.value=i,this.hour.push(n),t==i&&(this.selectedIndex[3]=i-1)}},e.prototype.creatMinute=function(){for(var e=new Date,t=e.getMinutes(),i=0;60>i;i++){var n=new Object;n.text=10>i?"0"+i:i,n.value=i,this.minute.push(n),t==i&&(this.selectedIndex[4]=i)}},e.prototype.mGetDate=function(e,t){var i=new Date(e,t,0);return i.getDate()},e.prototype.secondChange=function(){this.creatDay(),this.checked[1]=this.selectedIndex,this.picker.refillColumn(2,this.day),this.picker.scrollColumn(2,0)},e.prototype.formatNum=function(e){var t="";return e>1e8?t="9999万+":e>=1e4?(e/1e4).toFixed(2).toString()+"万":t=e.toString(),t},e.prototype.toFix=function(e,t){if(void 0===t&&(t=2),0==e)return parseFloat(e).toFixed(t);var i=4.9/Math.pow(10,t+1);return(e-i).toFixed(t)},e.share=null,e}();__reflect(Common.prototype,"Common");var GoodsUse=function(e){function t(){var t=e.call(this)||this;return t.top=0,t.left=0,t.right=0,t.bottom=0,t.data=Main.Shared().lang_config,t.skinName="resource/garden_skin/miner/GoodsUse.exml",t.use_pay_add.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPayAddClick,t),t.use_pay_dec.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPayDecClick,t),t.use_close.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseTheUse,t),t.use_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.useTheTool,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.onCloseTheUse=function(){this.goodsUse.visible=!1,GoodsIntro.Shared().props.visible=!0},t.prototype.onShowTheUse=function(e,t){var i=this;this.goodsUse.visible=!0,this.key=t,this.toolInfo=e,this.toolId=e.id,console.log(this.toolId),17==this.toolId?this.use_prop_bg.source="minerV1_json.clz_jwj _2x":this.use_prop_bg.source="auction_json.baidikuang",this.num=e.num,1==e.isBatch?(this.use_pay.visible=!0,this.use_pay_num.removeChildren(),this.usePayinput=new UsePayInput(this.num),this.use_num=parseInt(this.usePayinput.text_type.text),this.use_pay_num.addChild(this.usePayinput),this.goodsUse.height=600):(this.use_pay.visible=!1,this.goodsUse.height=500),this.num_text.text=MinerGoods.Shared().toolList[this.key].num+"个",Common.Shared().loadImg(e.icon).then(function(e){i.use_prop_img.source=e})},t.prototype.onPayAddClick=function(){this.usePayinput.addClick()},t.prototype.onPayDecClick=function(){this.usePayinput.decClick()},t.prototype.useTheTool=function(){Working.Shared().wait.show();var e=1;if(1==this.toolInfo.isBatch&&(e=Number(this.usePayinput.text_type.text)),-1==this.key.indexOf("egg")){var i=new Params("miner/tool/use_tool"),n=i.mergeDataByJsonStr({toolId:this.toolId,num:e});Working.Shared().ws.sendData({data:n,receiveCallBack:function(e){if(Working.Shared().wait.hide(),0==e.code){t.Shared().goodsUse.visible=!1;var i=e.msg;Working.Shared().tips.showTips(i),Working.Shared().full_mask.visible=!1}else Working.Shared().tips.showTips(e.msg)}})}else Working.Shared().wait.hide(),Common.Shared().secondPwd(this.afterPwd,t.Shared().goodsUse,!0)},t.prototype.afterPwd=function(e,i){var n=hex_md5(e),r=new Params("miner/tool/use_egg"),o=r.mergeDataByJsonStr({eggId:t.Shared().toolId,pinCode:n});Working.Shared().ws.sendData({data:o,receiveCallBack:function(e){if(Working.Shared().wait.hide(),0==e.code){Working.Shared().full_mask.visible=!1,t.Shared().goodsUse.visible=!1;var i=e.msg;Working.Shared().tips.showTips(i)}else Working.Shared().tips.showTips(e.msg)}})},t}(eui.ItemRenderer);__reflect(GoodsUse.prototype,"GoodsUse");var Guidance=function(e){function t(){var t=e.call(this)||this;return t.tips=new Tips,t.wait=new Wait,t.top=0,t.left=0,t.right=0,t.bottom=0,t.addChild(t.tips),t.addChild(t.wait),t.data=Main.Shared().lang_config,t.skinName="resource/garden_skin/miner/Guidance.exml",egret.ImageLoader.crossOrigin="anonymous",RES.getResByUrl(localStorage.getItem("imgUrl")+"miner/guide/guide.json",function(e){t.bg.texture=e._textureMap[t.data.guidance.bg],t.no1.texture=e._textureMap[t.data.guidance.no1],t.no2.texture=e._textureMap[t.data.guidance.no2],t.no3.texture=e._textureMap[t.data.guidance.no3],t.no4.texture=e._textureMap[t.data.guidance.no4],t.no5.texture=e._textureMap[t.data.guidance.no5],t.no6.texture=e._textureMap[t.data.guidance.no6]},t,RES.ResourceItem.TYPE_SHEET),t.guidance.addEventListener(egret.TouchEvent.TOUCH_END,t.onProcess,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.onProcess=function(){var e=this;if(1==this.no1.visible)this.no1.visible=!1,this.no2.visible=!0;else if(1==this.no2.visible)this.no2.visible=!1,this.no3.visible=!0;else if(1==this.no3.visible)this.no3.visible=!1,this.no4.visible=!0;else if(1==this.no4.visible)this.no4.visible=!1,this.no5.visible=!0;else if(1==this.no5.visible)this.no5.visible=!1,this.no6.visible=!0;else if(1==this.no6.visible){this.no6.visible=!1,this.wait.show();var i=new Params("miner/put_guide"),n=i.mergeDataByJsonStr({});Working.Shared().ws.sendData({data:n,receiveCallBack:function(i){0==i.code?(t.Shared().parent.addChild(Working.Shared()),Working.Shared().getMinerData(),t.Shared().parent.removeChild(t.Shared())):Working.Shared().tips.showTips(i.msg),e.wait.hide()}})}},t}(eui.ItemRenderer);__reflect(Guidance.prototype,"Guidance");var HomeTips=function(e){function t(){var t=e.call(this)||this;return t.top=0,t.left=0,t.right=0,t.bottom=0,t.skinName="resource/garden_skin/miner/HomeTips.exml",t.data=Main.Shared().lang_config,t.btn_pay_tools.addEventListener(egret.TouchEvent.TOUCH_TAP,t.payTool,t),t.btn_pay_goods.addEventListener(egret.TouchEvent.TOUCH_TAP,t.payGoods,t),t.btn_close_tool.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onGoBack,t),t.btn_close_goods.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onClose,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.onClose=function(){this.pay_goods.visible=!1,this.pay_tool.visible=!1,Working.Shared().full_mask.visible=!1},t.prototype.onGoBack=function(){Working.Shared().parent.addChild(Index.Shared()),Working.Shared().parent.removeChild(Working.Shared())},t.prototype.showTool=function(e){this.pay_tool.visible=!0,this.pay_goods.visible=!1,this.tool_explain.text=this.data.homeTips.minerDont+e.amount+this.data.homeTips.toBuy},t.prototype.payToolInfo=function(){var e=this,i=new Params("miner/prop/put_prop_order"),n=i.mergeDataByJsonStr({});Working.Shared().ws.sendData({data:n,receiveCallBack:function(i){0==i.code?(e.payDetail=i.data,Working.Shared().contains(t.Shared())||Working.Shared().addChild(t.Shared()),t.Shared().showTool(e.payDetail),Working.Shared().full_mask.visible=!0):Working.Shared().tips.showTips(i.msg)}})},t.prototype.payTool=function(){Common.Shared().secondPwd(this.afterPwd,t.Shared().pay_tool,!0,this.payDetail)},t.prototype.afterPwd=function(e,i){Working.Shared().wait.show();var n=hex_md5(e),r=new Params("pay/confirm_pay"),o=r.mergeDataByJsonStr({orderId:i.orderId,payOrder:i.payOrder,payType:i.payType,pinCode:n});Working.Shared().ws.sendData({data:o,receiveCallBack:function(e){Working.Shared().wait.hide(),0==e.code?t.Shared().onPaySuccess():Working.Shared().tips.showTips(e.msg)}})},t.prototype.onPaySuccess=function(){this.pay_tool.visible=!1,this.pay_goods.visible=!0},t.prototype.payGoods=function(){Working.Shared().removeChild(this),Working.Shared().showTheGoods()},t}(eui.ItemRenderer);__reflect(HomeTips.prototype,"HomeTips");var MinerAppo=function(e){function t(){var t=e.call(this)||this;return t.tips=new Tips,t.wait=new Wait,t.skinName="resource/garden_skin/miner/MinerAppo.exml",t.langData=Main.Shared().lang_config,t.top=0,t.left=0,t.right=0,t.bottom=0,t.addChild(t.tips),t.addChild(t.wait),t.onShowReser(),t.btn_go_back.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onGoBack,t),t.mc_box.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onAppoMine,t),t.btn_go_appo.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onGoPay,t),t.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onHideTip,t),t.btn_success.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onHideTip,t),t}return __extends(t,e),t.Shared=function(){return this.shared||(this.shared=new t),this.shared},t.prototype.onGoBack=function(){this.parent.addChild(Index.Shared()),this.parent.removeChild(this)},t.prototype.onShowReser=function(){var e=this;Common.Shared().mc("reserve_"+Main.Shared().lang,200,200,null,!0).then(function(t){e.mc_res=t,e.mc_box.addChild(e.mc_res),e.mc_res.gotoAndPlay(0,-1)}),this.wait.show();var t=new HttpReq,i="v1.1/miner/show_book";t.GET({url:i,data:{},success:function(t){var t=JSON.parse(t);0==t.code?(e.startTime=t.data.bookInfo.startTime,e.endTime=t.data.bookInfo.endTime,e.bookPrice=t.data.bookInfo.bookPrice,e.res_time.text=e.startTime+e.langData.minerAppoTs.to+e.endTime):e.tips.showTips(t.msg),e.wait.hide()},error:function(t){e.wait.hide(),e.tips.showTips(e.langData.minerAppoTs.network_error)}})},t.prototype.onAppoMine=function(){var e=this;this.full_mask.visible=!0,this.tip.visible=!0,this.btn_go_appo.visible=!0,this.res_time.text=this.startTime+this.langData.minerAppoTs.to+this.endTime,this.reser_txt.text=this.langData.minerAppoTs.booking_miner,this.appo_txt.text=this.langData.minerAppoTs.need_pay+this.bookPrice+this.langData.minerAppoTs.shared_worth,t.Shared().wait.show();var i=new HttpReq,n="v1.1/miner/put_book";i.POST({url:n,data:{},success:function(i){var i=JSON.parse(i);0==i.code?e.payDetail=i.data:111==i.code?(t.Shared().onHideTip(),t.Shared().onFailTip()):t.Shared().tips.showTips(i.msg),t.Shared().wait.hide()},error:function(i){t.Shared().wait.hide(),t.Shared().tips.showTips(e.langData.minerAppoTs.network_error)}})},t.prototype.onHideTip=function(){this.full_mask.visible=!1,this.tip.visible=!1,this.reser_txt.text="",this.appo_txt.text="",this.btn_go_appo.visible=!1,this.btn_success.visible=!1},t.prototype.onSuccessTip=function(){this.full_mask.visible=!0,this.tip.visible=!0,this.btn_go_appo.visible=!1,this.btn_success.visible=!0,this.reser_txt.text=this.langData.minerAppoTs.success_booking,this.appo_txt.visible=!1},t.prototype.onFailTip=function(){this.full_mask.visible=!0,this.tip.visible=!0,this.btn_success.visible=!1,this.btn_go_appo.visible=!1,this.reser_txt.text=this.langData.minerAppoTs.no_repeat_again,this.appo_txt.visible=!1},t.prototype.onGoPay=function(){Common.Shared().secondPwd(this.afterPwd,t.Shared().btn_go_appo,!0,this.payDetail)},t.prototype.afterPwd=function(e,i){var n=this,r=hex_md5(e);t.Shared().wait.show();var o=new HttpReq,a="v1.1/pay/confirm_pay";
o.POST({url:a,data:{orderId:i.orderId,payType:i.payType,payOrder:i.payOrder,pinCode:r},success:function(e){var e=JSON.parse(e);0==e.code?(t.Shared().onHideTip(),t.Shared().onSuccessTip()):t.Shared().tips.showTips(e.msg),t.Shared().wait.hide()},error:function(e){t.Shared().wait.hide(),t.Shared().tips.showTips(n.langData.minerAppoTs.network_error)}})},t}(eui.ItemRenderer);__reflect(MinerAppo.prototype,"MinerAppo");var MinerGoodList=function(e){function t(t,i,n){var r=e.call(this)||this;return r.skinName="resource/garden_skin/miner/MinerGoodList.exml",t&&(r.x=i?i:0,r.y=n?n:0,r.list_name.text=MinerGoods.Shared().toolList[t].toolName,r.list_num.text="X"+MinerGoods.Shared().toolList[t].num,r.num=MinerGoods.Shared().toolList[t].num,r.id=MinerGoods.Shared().toolList[t].id,17==r.id?r.image_bg.source="minerV1_json.clz_dk_2x":r.image_bg.source="wutong_json.frame_white_gray",r.key=t,r.price=MinerGoods.Shared().toolList[t].mgcoin,r.isBuy=MinerGoods.Shared().toolList[t].isBuy,r.isBatch=MinerGoods.Shared().toolList[t].isBatch,Common.Shared().loadImg(MinerGoods.Shared().toolList[t].icon).then(function(e){r.list_image.source=e})),r.toolsList.addEventListener(egret.TouchEvent.TOUCH_TAP,r.onClickIcon,r),r}return __extends(t,e),t.prototype.onClickIcon=function(e){MinerGoods.Shared().onCloseTheGoods(),Working.Shared().addChild(GoodsIntro.Shared()),Working.Shared().full_mask.visible=!0,GoodsIntro.Shared().onShowIntro(this.key,e.currentTarget)},t.prototype.dataChanged=function(){var e=this;this.list_name.text=this.data.toolName,this.list_num.text="X"+this.data.num,this.num=this.data.num,this.id=this.data.id,17==this.id&&(this.image_bg.source="minerV1_json.clz_dk_2x"),this.key=this.data.key,this.price=this.data.mgcoin,this.isBuy=this.data.isBuy,this.isBatch=this.data.isBatch,Common.Shared().loadImg(this.data.icon).then(function(t){e.list_image.source=t}),MinerGoods.Shared().toolArr[this.data.key]=this},t}(eui.ItemRenderer);__reflect(MinerGoodList.prototype,"MinerGoodList");var MinerGoods=function(e){function t(){var t=e.call(this)||this;return t.toolList=[],t.toolArr=[],t.top=0,t.left=0,t.right=0,t.bottom=0,t.skinName="resource/garden_skin/miner/MinerGoods.exml",t.data=Main.Shared().lang_config,t.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseTheGoods,t),t.no_egg.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onGoPayEgg,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.onCloseTheGoods=function(){this.minerGoods.visible=!1,Working.Shared().full_mask.visible=!1},t.prototype.onGoPayEgg=function(){this.onCloseTheGoods(),Working.Shared().parent.addChild(Transaction.Shared()),Working.Shared().parent.removeChild(Working.Shared()),Transaction.Shared().onTransactionLists({},2)},t.prototype.onShowMinerGood=function(e){this.group_egg.removeChildren(),0==e.toolList.eggs.length?this.no_egg.visible=!0:this.no_egg.visible=!1;var t=e.toolList,i=0,n=new eui.List,r=[];n.itemRenderer=MinerGoodList,n.dataProvider=new eui.ArrayCollection(r),n.x=25;var o=new eui.TileLayout;o.horizontalGap=20,o.verticalGap=50,o.requestedColumnCount=4,n.layout=o;for(var a in t){var s=new eui.Image("auction_json.shutiao"),h=new eui.Label;switch(a){case"miner":h.text=this.data.minerGoods.miner;break;case"eggs":h.text=this.data.minerGoods.eggs}for(var d=0;d<t[a].length;d++){this.toolList[a+t[a][d].id]=t[a][d];var l=d%4*130+25;if(i>0)t[a][d].key=a+t[a][d].id,r.push(t[a][d]);else{var c=50+235*Math.floor(d/4),u=new MinerGoodList(a+t[a][d].id,l,c);this.group_good.addChild(u),this.toolArr[a+t[a][d].id]=u}}s.x=25,s.y=265*(2*i),h.textColor=6178313,h.bold=!0,h.x=45,h.y=265*(2*i),this.group_good.addChild(s),this.group_good.addChild(h),i++}this.group_egg.height=270*Math.ceil(d/4),this.group_egg.addChild(n),this.group_egg.cacheAsBitmap=!0,this.group_good.cacheAsBitmap=!0},t}(eui.ItemRenderer);__reflect(MinerGoods.prototype,"MinerGoods");var MinerRule=function(e){function t(){var t=e.call(this)||this;if(t.skinName="resource/garden_skin/miner/MinerRule.exml",t.data=Main.Shared().lang_config,t.cacheAsBitmap=!0,t.right=0,t.left=0,t.top=0,t.bottom=0,"en"==Main.Shared().lang)var i='<font color="#3C2405" size="30px" face="PingFang SC" >1、The higher the physical strength of the miner, the higher the efficiency, the higher the income; the food and the phoenix egg can increase the physical strength of the miner; the smaller the phoenix egg algebra, the higher the physical strength.\n</font><font color="#3C2405" size="30px" face="PingFang SC" >2、Mining revenue is paid at each hour.\n</font><font color="#3C2405" size="30px" face="PingFang SC" >3、Physical exertion: The miners will continue to consume physical strength during work, so be sure to pay attention to the remaining amount of physical strength.\n</font><font color="#3C2405" size="30px" face="PingFang SC" >4、Equipment and tools are durable and consume a little bit per minute.\n</font><font color="#3C2405" size="30px" face="PingFang SC" >5、Rewarding instructions: Users can receive the proceeds at each hour. If they are not received within 24 hours, they will be lost according to the hour.\n</font></font><font color="#3C2405" size="30px" face="PingFang SC" >6、Miners have a small probability of being injured in working conditions, increased physical exertion and reduced returns when injured</font>';else if("cn"==Main.Shared().lang)var i='<font color="#3C2405" size="30px" face="PingFang SC" >1、矿工体力值越高效率越高，收益就越高；食物和凤凰蛋都可增加矿工体力；凤凰蛋代数越小提升体力越高。\n</font><font color="#3C2405" size="30px" face="PingFang SC" >2、挖矿收益在每个整点发放。\n</font><font color="#3C2405" size="30px" face="PingFang SC" >3、体力消耗：矿工工作中会不断消耗体力，请务必注意体力剩余量。\n</font><font color="#3C2405" size="30px" face="PingFang SC" >4、装备和工具耐久每分钟消耗一点。\n</font><font color="#3C2405" size="30px" face="PingFang SC" >5、领取奖励说明：用户可在每个整点领取收益，超过24小时未领取，则按照小时流失。\n</font></font><font color="#3C2405" size="30px" face="PingFang SC" >6、矿工有小概率会在工作状态中受伤，受伤时体力消耗增加且收益减少</font>';else if("tcn"==Main.Shared().lang)var i='<font color="#3C2405" size="30px" face="PingFang SC" >1、礦工體力值越高效率越高，收益就越高；食物和鳳凰蛋都可增加礦工體力；鳳凰蛋代數越小提升體力越高。\n</font><font color="#3C2405" size="30px" face="PingFang SC" >2、挖礦收益在每個整點發放。\n</font><font color="#3C2405" size="30px" face="PingFang SC" >3、體力消耗：礦工工作中會不斷消耗體力，請務必註意體力剩余量。\n</font><font color="#3C2405" size="30px" face="PingFang SC" >4、裝備和工具耐久每分鐘消耗壹點。\n</font><font color="#3C2405" size="30px" face="PingFang SC" >5、領取獎勵說明：用戶可在每個整點領取收益，超過24小時未領取，則按照小時流失。\n</font></font><font color="#3C2405" size="30px" face="PingFang SC" >6、礦工有小概率會在工作狀態中受傷，受傷時體力消耗增加且收益減少</font>';var n=Common.Shared().getITextElement(i,438,460,24,0,0);return t.rule_content.addChild(n),t.btn_know.addEventListener(egret.TouchEvent.TOUCH_TAP,t.hide,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.show=function(){this.visible=!0},t.prototype.hide=function(){this.visible=!1},t}(eui.ItemRenderer);__reflect(MinerRule.prototype,"MinerRule");var MinerTools=function(e){function t(){var t=e.call(this)||this;return t.top=0,t.left=0,t.right=0,t.bottom=0,t.skinName="resource/garden_skin/miner/MinerTools.exml",t.cacheAsBitmap=!0,t.data=Main.Shared().lang_config,t.btn_close_theTool.addEventListener(egret.TouchEvent.TOUCH_TAP,t.closeTheTools,t),t.service.addEventListener(egret.TouchEvent.TOUCH_TAP,t.servicePush,t),t.btn_pay.addEventListener(egret.TouchEvent.TOUCH_TAP,t.payToolInfo,t),t.btn_close_pay.addEventListener(egret.TouchEvent.TOUCH_TAP,t.closePayTips,t),t.btn_success.addEventListener(egret.TouchEvent.TOUCH_TAP,t.btnPaySuccess,t),t.rise.addEventListener(egret.TouchEvent.TOUCH_TAP,t.riseClick,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.closeTheTools=function(){this.theTools.visible=!1,Working.Shared().full_mask.visible=!1},t.prototype.onShowTheTool=function(e){var t=this;this.type=e,Working.Shared().wait.show();var i=new Params("miner/prop/prop_info"),n=i.mergeDataByJsonStr({propType:e});Working.Shared().ws.sendData({data:n,receiveCallBack:function(e){Working.Shared().wait.hide(),0==e.code?(Working.Shared().full_mask.visible=!0,t.theTools.visible=!0,t.refresh(e.data)):Working.Shared().tips.showTips(e.msg)}})},t.prototype.refresh=function(e){var t=this,i=e.propInfo;Common.Shared().loadImg(i.icon).then(function(e){t.now_img.source=e}),this.now_name.text=i.name,this.now_duration.text=i.duration+"/"+i.maxDuration,this.now_useTime.text=i.useTime,this.now_addWeight.text=i.addWeight+"%";var n=e.nextPropInfo;0!=n.length?(this.rise.visible=!0,this.next_list.visible=!0,this.arrow_img.visible=!0,this.theTools.height=888,Common.Shared().loadImg(n.icon).then(function(e){t.next_img.source=e}),this.next_name.text=n.name,this.next_duration.text=n.duration+"/"+n.maxDuration,this.next_useTime.text=n.useTime,this.next_addWeight.text=n.addWeight+"%"):(this.theTools.height=500,this.rise.visible=!1,this.arrow_img.visible=!1,this.next_list.visible=!1),1==this.type?(this.head_img.source=this.data.minerTools.tool,this.now_addWeight.text=i.addWeight+"%",this.the_now_type.text=this.data.minerTools.improve,this.next_addWeight.text=n.addWeight+"%",this.the_next_type.text=this.data.minerTools.improve):(this.head_img.source=this.data.equips.equip,this.now_addWeight.text=i.cutExpend+"%",this.the_now_type.text=this.data.equips.reduce,this.next_addWeight.text=n.cutExpend+"%",this.the_next_type.text=this.data.equips.reduce)},t.prototype.servicePush=function(){var e=this;this.features=1,Working.Shared().wait.show();var i=new Params("miner/prop/put_repair_order"),n=i.mergeDataByJsonStr({propType:t.Shared().type});Working.Shared().ws.sendData({data:n,receiveCallBack:function(i){Working.Shared().wait.hide(),0==i.code?(e.payDetail=i.data,t.Shared().serviceClick(e.payDetail)):Working.Shared().tips.showTips(i.msg)}})},t.prototype.serviceClick=function(e){this.pay.visible=!0,this.theTools.visible=!1,this.btn_pay.visible=!0,this.btn_success.visible=!1;1==this.type?this.head_pay_img.source=this.data.minerTools.tool:this.head_pay_img.source=this.data.equips.equip,1==this.features?this.status_txt.text=this.data.minerTools.does+e.amount+this.data.minerTools.shared+this.now_name.text+"?":this.status_txt.text=this.data.minerTools.upgarde+e.amount+this.data.minerTools.sharedUp+this.now_name.text+this.data.minerTools.to+this.next_name.text+"?"},t.prototype.payToolInfo=function(){Common.Shared().secondPwd(this.afterPwd,t.Shared().pay,!0,this.payDetail)},t.prototype.afterPwd=function(e,i){Working.Shared().wait.show();var n=hex_md5(e),r=new Params("pay/confirm_pay"),o=r.mergeDataByJsonStr({orderId:i.orderId,payOrder:i.payOrder,payType:i.payType,pinCode:n});Working.Shared().ws.sendData({data:o,receiveCallBack:function(e){Working.Shared().wait.hide(),0==e.code?t.Shared().btnGoPayClick():Working.Shared().tips.showTips(e.msg)}})},t.prototype.btnGoPayClick=function(){this.pay.visible=!0,this.theTools.visible=!1,this.btn_pay.visible=!1,this.btn_success.visible=!0,2==this.features?this.status_txt.text=this.data.minerTools.up_success:1==this.type?this.status_txt.text=this.data.minerTools.congratulations:this.status_txt.text=this.data.equips.congratulations,1==this.type?this.head_pay_img.source=this.data.minerTools.tool:this.head_pay_img.source=this.data.equips.equip},t.prototype.btnPaySuccess=function(){this.pay.visible=!1,Working.Shared().full_mask.visible=!1},t.prototype.riseClick=function(){var e=this;this.features=2,Working.Shared().wait.show();var i=new Params("miner/prop/put_upgrade_order"),n=i.mergeDataByJsonStr({propType:t.Shared().type});Working.Shared().ws.sendData({data:n,receiveCallBack:function(i){Working.Shared().wait.hide(),0==i.code?(e.payDetail=i.data,t.Shared().serviceClick(e.payDetail)):Working.Shared().tips.showTips(i.msg)}})},t.prototype.closePayTips=function(){this.pay.visible=!1,this.theTools.visible=!0},t}(eui.ItemRenderer);__reflect(MinerTools.prototype,"MinerTools");var Records=function(e){function t(){var t=e.call(this)||this;return t.taxNum=null,t.logArr=[],t.tips=new Tips,t.wait=new Wait,t.top=0,t.left=0,t.right=0,t.bottom=0,t.ws=WsReq.Shared(),t.addChild(t.tips),t.addChild(t.wait),t.skinName="resource/garden_skin/miner/Records.exml",t.data=Main.Shared().lang_config,t.btn_go_back.addEventListener(egret.TouchEvent.TOUCH_TAP,t.btnGoBack,t),t.use_record.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onShowRecord,t),t.my_income.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onShowIncome,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.btnGoBack=function(){this.parent.addChild(Working.Shared()),this.parent.removeChild(this),Working.Shared().full_mask.visible=!1},t.prototype.onShowRecord=function(){var e=this;this.wait.show(),this.list_group.removeChildren(),this.logArr=[],this.use_one.visible=!0,this.income_one.visible=!1;var i=new Params("miner/tool/log_list"),n=i.mergeDataByJsonStr({});t.Shared().ws.sendData({data:n,receiveCallBack:function(i){if(e.wait.hide(),0==i.code){var n=i.data.logs,r=i.data.lastIds;if(0!=n.length){for(var o in n){-1==t.Shared().logArr.indexOf(o)&&t.Shared().logArr.push(o);for(var a=0;a<n[o].length;a++)t.Shared().logArr.push(n[o][a])}e.list_scroller=new ScrollerRecordsUseList(t.Shared().logArr,r),e.list_group.addChild(e.list_scroller)}else e.list_scroller=new Empty,e.list_scroller.empty_text.text=e.data.records.no_use,e.list_scroller.horizontalCenter=0,e.list_group.addChild(e.list_scroller)}else t.Shared().tips.showTips(i.msg)}})},t.prototype.onShowIncome=function(){var e=this;this.wait.show(),this.list_group.removeChildren(),this.use_one.visible=!1,this.income_one.visible=!0;var i=new Params("miner/wallet/profit_logs"),n=i.mergeDataByJsonStr({});t.Shared().ws.sendData({data:n,receiveCallBack:function(i){if(e.wait.hide(),0==i.code){e.totalProfit=i.data.totalProfit;var n=i.data,r=ScrollerRecordsIncome.Shared();r.init(n),e.list_group.addChild(r),e.taxNum=i.data.taxNum}else t.Shared().tips.showTips(i.msg)}})},t}(eui.ItemRenderer);__reflect(Records.prototype,"Records");var RecordsIncomeList=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/miner/RecordsIncomeList.exml",t}return __extends(t,e),t.prototype.dataChanged=function(){this.txt_num.text=this.data.changeProfit,this.txt_name.text=this.data.content,this.txt_timer.text=this.data.datetime},t}(eui.ItemRenderer);__reflect(RecordsIncomeList.prototype,"RecordsIncomeList");var RecordsUseList=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/miner/RecordsUseList.exml",t}return __extends(t,e),t.prototype.dataChanged=function(){this.data.id?(this.the_timer.visible=!1,this.the_content.visible=!0,this.txt_name.text=this.data.toolName+"x"+this.data.num,this.txt_timer.text=this.data.datetime):(this.the_timer.visible=!0,this.the_content.visible=!1,this.txt_dayTime.text=this.data)},t}(eui.ItemRenderer);__reflect(RecordsUseList.prototype,"RecordsUseList");var ScrollerProfitLogs=function(e){function t(t,i){var n=e.call(this)||this;return n.list=new eui.List,n.is_need_more=0,n.lastId=0,n.skinName="resource/garden_skin/miner/ScrollerProfitLogs.exml",n.langData=Main.Shared().lang_config,n.top=0,n.left=0,n.right=0,n.bottom=0,n.lastId=i,n.transactionArr=t,n.list.itemRenderer=RecordsIncomeList,n.list.dataProvider=new eui.ArrayCollection(n.transactionArr),n.scrollerProfitLogs.viewport=n.list,n.cacheAsBitmap=!1,n.scrollerProfitLogs.addEventListener(eui.UIEvent.CHANGE,n.moveHandler,n),n.scrollerProfitLogs.addEventListener(eui.UIEvent.CHANGE_END,n.outHandler,n),n}return __extends(t,e),t.prototype.moveHandler=function(e){this.scrollerProfitLogs.viewport.scrollV>this.scrollerProfitLogs.viewport.contentHeight-this.scrollerProfitLogs.viewport.height+40&&(this.is_need_more>-1?this.is_need_more=1:Records.Shared().tips.showTips(this.langData.scrollerMyBuyHistoryTs.no_more))},t.prototype.outHandler=function(e){this.is_need_more>0&&(this.is_need_more=0,this.loreMore())},t.prototype.loreMore=function(){var e=this;Records.Shared().wait.show();var t=new Params("miner/wallet/profit_logs"),i=t.mergeDataByJsonStr({lastId:this.lastId});Working.Shared().ws.sendData({data:i,receiveCallBack:function(t){if(0==t.code){var i=t.data.logs;if(0!=i.length){for(var n in i)e.transactionArr.push(i[n]);e.lastId=i[i.length-1].id}else Records.Shared().tips.showTips(e.langData.scrollerMyBuyHistoryTs.no_more),e.is_need_more=-1}else Records.Shared().tips.showTips(t.msg);Records.Shared().wait.hide()}})},t}(eui.ItemRenderer);__reflect(ScrollerProfitLogs.prototype,"ScrollerProfitLogs");var ScrollerRecordsIncome=function(e){function t(){var t=e.call(this)||this;return t.is_need_more=0,t.lastId=0,t.top=0,t.left=0,t.right=0,t.bottom=0,t.skinName="resource/garden_skin/miner/ScrollerRecordsIncome.exml",t.langData=Main.Shared().lang_config,t.exchange.addEventListener(egret.TouchEvent.TOUCH_TAP,t.exchangeVSC,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.init=function(e){this.showLogs(e,e.logs),this.showIncome(e),this.coChainTax=e.config,this.wallet=e.wallet},t.prototype.showLogs=function(e,t){this.scroller_box.removeChildren(),0!=t.length?(this.lastId=e.logs[e.logs.length-1].id,this.scroller_group=new ScrollerProfitLogs(t,this.lastId)):(this.scroller_group=new Empty,this.scroller_group.empty_text.text=this.langData.records.no_charge,this.scroller_group.horizontalCenter=0),this.scroller_box.addChild(this.scroller_group)},t.prototype.showIncome=function(e){this.now_income.text=e.nowProfit,this.cumu_income.text=this.langData.scrollerRecordsIncome.cumulative+e.totalProfit,this.taxNum=e.taxNum},t.prototype.goWinding=function(){0==this.coChainTax.walletAppIsOnline?(Records.Shared().addChild(Winding.Shared()),Winding.Shared().showWaitWind()):""!=this.the_link.text?(Records.Shared().addChild(Winding.Shared()),Winding.Shared().showWinding(t.Shared().coChainTax)):(Records.Shared().addChild(Binding.Shared()),Binding.Shared().onHasBinding(),Records.Shared().full_mask.visible=!0)},t.prototype.changeLinking=function(e){0==this.coChainTax.walletAppIsOnline?Records.Shared().tips.showTips(this.langData.scrollerRecordsIncome.stay_tuned):(Records.Shared().addChild(ChangeLink.Shared()),ChangeLink.Shared().showGetCode(e),Records.Shared().full_mask.visible=!0)},t.prototype.exchangeVSC=function(){Records.Shared().parent.contains(Extract.Shared())||Records.Shared().parent.addChild(Extract.Shared()),Records.Shared().parent.removeChild(Records.Shared()),console.log(22222)},t}(eui.ItemRenderer);__reflect(ScrollerRecordsIncome.prototype,"ScrollerRecordsIncome");var ScrollerRecordsUseList=function(e){function t(t,i){var n=e.call(this)||this;return n.list=new eui.List,n.is_need_more=0,n.lastId=0,n.top=0,n.left=0,n.right=0,n.bottom=0,n.skinName="resource/garden_skin/miner/ScrollerRecordsUseList.exml",n.lastId=i,n.langData=Main.Shared().lang_config,n.list.itemRenderer=RecordsUseList,n.transactionArr=t,n.list.dataProvider=new eui.ArrayCollection(n.transactionArr),n.scroller_use.viewport=n.list,n.cacheAsBitmap=!1,n.scroller_use.addEventListener(eui.UIEvent.CHANGE,n.moveHandler,n),n.scroller_use.addEventListener(eui.UIEvent.CHANGE_END,n.outHandler,n),n}return __extends(t,e),t.Shared=function(e,i){return null==this.shared&&(this.shared=new t(e,i)),this.shared},t.prototype.moveHandler=function(e){this.scroller_use.viewport.scrollV>this.scroller_use.viewport.contentHeight-this.scroller_use.viewport.height+40&&(this.is_need_more>-1?this.is_need_more=1:Records.Shared().tips.showTips(this.langData.scrollerMyBuyHistoryTs.no_more))},t.prototype.outHandler=function(e){this.is_need_more>0&&(this.is_need_more=0,this.loreMore())},t.prototype.loreMore=function(){var e=this;Records.Shared().wait.show();var t=new Params("miner/tool/log_list"),i=t.mergeDataByJsonStr({lastIds:this.lastId});Working.Shared().ws.sendData({data:i,receiveCallBack:function(t){if(0==t.code){var i=t.data.logs;if(0!=i.length){for(var n in i){-1==Records.Shared().logArr.indexOf(n)&&Records.Shared().logArr.push(n);for(var r=0;r<i[n].length;r++)Records.Shared().logArr.push(i[n][r])}e.lastId=t.data.lastIds}else Records.Shared().tips.showTips(e.langData.scrollerMyBuyHistoryTs.no_more),e.is_need_more=-1}else Records.Shared().tips.showTips(t.msg);Records.Shared().wait.hide()}})},t}(eui.Scroller);__reflect(ScrollerRecordsUseList.prototype,"ScrollerRecordsUseList");var Winding=function(e){function t(){var t=e.call(this)||this;return t.top=0,t.left=0,t.right=0,t.bottom=0,t.skinName="resource/garden_skin/miner/Winding.exml",t.data=Main.Shared().lang_config,t.winding_num.restrict="0-9.",t.winding_num.inputType=egret.TextFieldInputType.TEL,t.winding_num.addEventListener(egret.TouchEvent.CHANGE,t.digits,t),t.wind_close.addEventListener(egret.TouchEvent.TOUCH_TAP,t.closeWinding,t),t.btn_close_wait.addEventListener(egret.TouchEvent.TOUCH_TAP,t.closeWinding,t),t.btn_success.addEventListener(egret.TouchEvent.TOUCH_TAP,t.closeWinding,t),t.btn_close_confirm.addEventListener(egret.TouchEvent.TOUCH_TAP,t.closeConfirm,t),t.btn_push_winding.addEventListener(egret.TouchEvent.TOUCH_TAP,t.confirmTheWallet,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.digits=function(e){var t=this.winding_num.text;(""==t||Number(t)<=0)&&(t="");var i=String(t).indexOf(".")+1,n=String(t).length-i;if(n>=5){var r=Number(this.winding_num.text);this.winding_num.text=String(Math.floor(1e5*r)/1e5)}},t.prototype.closeWinding=function(){this.winding.visible=!1,this.wait_wind.visible=!1,this.winding_num.text="",Records.Shared().full_mask.visible=!1},t.prototype.closeConfirm=function(){this.confirm_wind.visible=!1,this.winding.visible=!1,this.the_wallet.text="",Records.Shared().full_mask.visible=!1},t.prototype.showWinding=function(e){this.winding.visible=!0,this.the_1.text=this.data.winding.lowest+e.coChainMinVSCNum,this.the_2.text=this.data.winding.chain+e.walletCoChainTax+this.data.winding.aVSC,this.wait_wind.visible=!1,Records.Shared().full_mask.visible=!0},t.prototype.confirmTheWallet=function(){Number(this.winding_num.text)<100?Records.Shared().tips.showTips(this.data.winding.number_of_windings):(this.winding.visible=!1,this.confirm_wind.visible=!0,this.the_wallet.text=this.data.winding.wallet_address+ScrollerRecordsIncome.Shared().wallet+this.data.winding.confirm_it)},t.prototype.showWaitWind=function(){this.wait_wind.visible=!0,this.winding.visible=!1,Records.Shared().full_mask.visible=!0},t}(eui.ItemRenderer);__reflect(Winding.prototype,"Winding");var Working=function(e){function t(){var t=e.call(this)||this;t.tips=new Tips,t.wait=new Wait,t.toolL=0,t.suitL=0,t.n=1,t.m=1,t.ver=0,t.hor=0,t.skinName="resource/garden_skin/miner/Working.exml",t.data=t.data=Main.Shared().lang_config,t.top=0,t.left=0,t.right=0,t.bottom=0,t.addChild(t.tips),t.addChild(t.wait);var i=document.createElement("canvas");return t.isWebgl=i.getContext("webgl")?!0:!1,t.ws=WsReq.Shared(),t.btn_return.addEventListener(egret.TouchEvent.TOUCH_TAP,t.returnIndex,t),t.rule.addEventListener(egret.TouchEvent.TOUCH_TAP,t.showRule,t),t.gain_group.addEventListener(egret.TouchEvent.TOUCH_TAP,t.showGain,t),t.equips.addEventListener(egret.TouchEvent.TOUCH_TAP,t.showEquips,t),t.minerTools.addEventListener(egret.TouchEvent.TOUCH_TAP,t.showTheTools,t),t.records.addEventListener(egret.TouchEvent.TOUCH_TAP,t.showRecord,t),t.theGoods.addEventListener(egret.TouchEvent.TOUCH_TAP,t.showTheGoods,t),t.chara.addEventListener(egret.TouchEvent.TOUCH_TAP,t.showChara,t),t.miner_status.addEventListener(egret.TouchEvent.TOUCH_TAP,t.dealStatus,t),t.basket.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onNoEarnings,t),t.group_basket.addEventListener(egret.TouchEvent.TOUCH_TAP,t.receiveEarnings,t),t.tips_close.addEventListener(egret.TouchEvent.TOUCH_TAP,t.closeTips,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.closeTips=function(){this.group_tips.visible=!1,this.full_mask.visible=!1,this.tips_text.text=""},t.prototype.showTips=function(e){this.group_tips.visible=!0,this.full_mask.visible=!0,this.tips_text.text=e},t.prototype.system=function(e){this.minerInfo=e,this.renderMinerInfo(e),this.updateSkin(this.speed,this.minerStatus,this.suitL,this.toolL)},t.prototype.returnIndex=function(){this.parent.addChild(Index.Shared()),this.parent.removeChild(this)},t.prototype.getMinerData=function(){var e=this;this.wait.show();var i=new Params("miner/show_main"),n=i.mergeDataByJsonStr({});this.ws.sendData({data:n,receiveCallBack:function(i){e.wait.hide(),0==i.code?(e.minerInfo=i.data.miner,1==e.minerInfo.isNewbie?(e.parent.addChild(Guidance.Shared()),e.parent.removeChild(e)):0==i.data.hasProp?(t.Shared().contains(HomeTips.Shared())||t.Shared().addChild(HomeTips.Shared()),HomeTips.Shared().payToolInfo(),e.full_mask.visible=!0):(e.renderMinerInfo(i.data.miner),e.updateSkin(e.speed,e.minerStatus,e.suitL,e.toolL))):t.Shared().tips.showTips(i.msg)}})},t.prototype.renderMinerInfo=function(e){this.skinGender=e.wearSkin,this.hp_txt.text=e.hp,this.spd_txt.text=e.ev,this.gain_txt.text="x"+e.weights.total,this.updateBasket(e.earningsRate),e.minerStatus>0?(this.miner_status.source="minerV1_json.status_"+e.minerStatus,this.miner_status.visible=!0,this.status_img.source="minerV1_json.kgss_2x",this.updateHeader()):(this.miner_status.visible=!1,this.status_img.source="minerV1_json.wkts_2x"),this.speed=e.speed,this.minerStatus=e.minerStatus,e.props&&(this.toolL=e.props.tool.level,this.suitL=e.props.suit.level)},t.prototype.updateHeader=function(){var e=0,t=0;switch(this.toolL){case 0:e=166,t=-138;break;case 1:e=166,t=-138;break;case 2:e=166,t=-138;break;case 3:e=320,t=-200;break;case 4:e=320,t=-220;break;case 5:e=320,t=-220}this.miner_status.horizontalCenter=e,this.miner_status.verticalCenter=t},t.prototype.updateSkin=function(e,t,i,n){var r=this;if(this.suitL=i,this.toolL=n,0!=this.skinGender)switch(this.toolL){case 0:this.group_miner.horizontalCenter=20,this.group_miner.verticalCenter=0;break;case 1:this.group_miner.horizontalCenter=30,this.group_miner.verticalCenter=0;break;case 2:this.group_miner.horizontalCenter=0,this.group_miner.verticalCenter=100;break;case 3:this.group_miner.horizontalCenter=240,this.group_miner.verticalCenter=-20;break;case 4:this.group_miner.horizontalCenter=240,this.group_miner.verticalCenter=-20;break;case 5:this.group_miner.horizontalCenter=240,this.group_miner.verticalCenter=-20}else switch(this.toolL){case 0:this.group_miner.horizontalCenter=20;break;case 1:this.group_miner.horizontalCenter=30;break;case 2:this.group_miner.horizontalCenter=0;break;case 3:this.group_miner.horizontalCenter=60;break;case 4:this.group_miner.horizontalCenter=-10;break;case 5:this.group_miner.horizontalCenter=-15}console.log(this.group_miner.horizontalCenter),console.log(this.group_miner.verticalCenter);var o="",a=0,s=["1_1","2_1","3_1","4_1","3_2","4_2"],h=i+1+"_"+(n+1),d="",l="";switch(0==this.skinGender?(d=-1==s.indexOf(h)?"work_":this.isWebgl?"work_":"ca_work_",l=this.isWebgl?"rest_":"ca_rest_"):1==this.skinGender?(d="man_work_",l="man_rest_"):2==this.skinGender&&(d="wom_work_",l="wom_rest_"),l+=i+1,d+=i+1+"_"+(n+1),console.log(d),console.log(l),t){case 0:o=d,this.status_discrip.text=this.data.workingTs.miner_work,a=e,this.status_txt.text="";break;case 1:o=l,this.status_discrip.text=this.data.workingTs.miner_hungry,this.status_txt.text=this.data.workingTs.eat_foods,this.group_miner.horizontalCenter=0;break;case 2:o=d,this.status_discrip.text=this.data.workingTs.miner_injured,this.status_txt.text=this.data.workingTs.miner_inefficient_1,a=e;break;case 3:o=l,this.status_discrip.text=this.data.workingTs.miner_tool_broken,this.status_txt.text=this.data.workingTs.miner_work_stop,this.group_miner.horizontalCenter=0;break;case 4:o=d,this.status_discrip.text=this.data.workingTs.miner_inefficient_2,this.status_txt.text=this.data.workingTs.miner_equipment_broken,a=e}console.log(o),Common.Shared().dbMc(o,!0).then(function(e){e.animation.play(e.animation.animationNames[0]),r.group_miner.removeChildren(),r.group_miner.addChild(e),a>0&&(e.animation.timeScale=a)}),0!=t&&this.updateHeader()},t.prototype.test=function(){var e=this,t="",i=1;t="wom_work_"+this.m+"_"+this.n,console.log(t),this.n++,this.n>6&&(this.n=1,this.m++),Common.Shared().dbMc(t,!0).then(function(t){t.animation.play(t.animation.animationNames[0]),e.group_miner.removeChildren(),e.group_miner.addChild(t),i>0&&(t.animation.timeScale=i)})},t.prototype.testHjia=function(){this.group_miner.horizontalCenter=this.group_miner.horizontalCenter+10,console.log(this.group_miner.horizontalCenter)},t.prototype.testHjian=function(){this.group_miner.horizontalCenter=this.group_miner.horizontalCenter-10,console.log(this.group_miner.horizontalCenter)},t.prototype.testVjia=function(){this.group_miner.verticalCenter=this.group_miner.verticalCenter+10,console.log(this.group_miner.verticalCenter)},t.prototype.testVjian=function(){console.log(this.group_miner.verticalCenter),this.group_miner.verticalCenter=this.group_miner.verticalCenter-10},t.prototype.updateBasket=function(e){var t=this;0>=e?(this.group_basket.removeChildren(),this.basket.visible=!0,this.basketMc=null):(this.basket.visible=!1,this.basketMc?this.editBasket(e):Common.Shared().dbMc("minerBasket",!0).then(function(i){t.basketMc=i,i.animation.play("move"),t.group_basket.addChild(i),t.editBasket(e)}))},t.prototype.editBasket=function(e){var t=e.toString();switch(t.length){case 1:t="**"+t;break;case 2:t="*"+t}var i=t.split(""),n=[];n.push(this.basketMc.armature.getSlot("num_1")),n.push(this.basketMc.armature.getSlot("num_2")),n.push(this.basketMc.armature.getSlot("num_3")),n.push(this.basketMc.armature.getSlot("底"));for(var r=0;4>r;r++)if(3==r){var o=new egret.Bitmap;o.texture=RES.getRes("minerV1_json.b2"),o.scaleX=2,o.scaleY=2,o.x=n[r].display.x,o.y=n[r].display.y,o.width=o.width/2*(1-e/100),o.height=o.height/2,o.anchorOffsetX=o.width/2-e/100*90,o.anchorOffsetY=o.height/2,n[r].setDisplay(o)}else{var a=new egret.Bitmap;a.texture=RES.getRes("minerV1_json."+i[r]),a.scaleX=2,a.scaleY=2,a.x=n[r].display.x,a.y=n[r].display.y,a.width=a.width/2,a.height=a.height/2,a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2,n[r].setDisplay(a)}},t.prototype.onNoEarnings=function(){this.tips.showTips(this.data.workingTs.not_arrived)},t.prototype.receiveEarnings=function(){var e=this;this.wait.show();var i=new Params("miner/receive_earnings"),n=i.mergeDataByJsonStr({});this.ws.sendData({data:n,receiveCallBack:function(i){e.wait.hide(),0==i.code?(e.showTips(i.data.receiveEarnings+e.data.workingTs.earning_tips),e.updateBasket(0)):t.Shared().tips.showTips(i.msg)}})},t.prototype.dealStatus=function(e){switch(this.minerInfo.minerStatus){case 3:this.showTheTools();break;case 4:this.showEquips();break;default:this.showTheGoods()}},t.prototype.showRule=function(){this.contains(MinerRule.Shared())||this.addChild(MinerRule.Shared()),MinerRule.Shared().show()},t.prototype.showGain=function(){var e=this;this.wait.show();var i=new Params("miner/show_main"),n=i.mergeDataByJsonStr({propType:2});this.ws.sendData({data:n,receiveCallBack:function(i){if(e.wait.hide(),0==i.code){e.contains(GainContent.Shared())||e.addChild(GainContent.Shared());var n=i.data.miner.weights;GainContent.Shared().showGainContent(n)}else t.Shared().tips.showTips(i.msg)}})},t.prototype.showEquips=function(){this.contains(MinerTools.Shared())||this.addChild(MinerTools.Shared()),MinerTools.Shared().onShowTheTool(2)},t.prototype.showTheTools=function(){this.contains(MinerTools.Shared())||this.addChild(MinerTools.Shared()),MinerTools.Shared().onShowTheTool(1)},t.prototype.showRecord=function(){this.parent.addChild(Records.Shared()),this.parent.removeChild(this),Records.Shared().onShowRecord()},t.prototype.showChara=function(){this.contains(Character.Shared())||this.addChild(Character.Shared()),Character.Shared().showCharacter()},t.prototype.showTheGoods=function(){var e=this;
this.wait.show();var i=new Params("miner/tool/tool_list"),n=i.mergeDataByJsonStr({});this.ws.sendData({data:n,receiveCallBack:function(i){if(e.wait.hide(),0==i.code){var n=i.data;t.Shared().contains(MinerGoods.Shared())||t.Shared().addChild(MinerGoods.Shared()),t.Shared().full_mask.visible=!0,MinerGoods.Shared().onShowMinerGood(n),MinerGoods.Shared().minerGoods.visible=!0}else t.Shared().tips.showTips(i.msg)}})},t}(eui.ItemRenderer);__reflect(Working.prototype,"Working");var ChangeNameCommit=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/phoenix/ChangeNameCommit.exml",t.commit.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCommitTap,t),t}return __extends(t,e),t.Shared=function(){return this.shared||(this.shared=new t),this.shared},t.prototype.onCommitTap=function(e){this.hide()},t.prototype.show=function(){FullMask.Shared().visible=!0,this.visible=!0},t.prototype.hide=function(){FullMask.Shared().visible=!1,this.visible=!1},t}(eui.ItemRenderer);__reflect(ChangeNameCommit.prototype,"ChangeNameCommit");var ChangeNameConfirm=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/phoenix/ChangeNameConfirm.exml",t.wait.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onWaitTap,t),t.confirm.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onConfirmTap,t),t}return __extends(t,e),t.Shared=function(){return this.shared||(this.shared=new t),this.shared},t.prototype.onWaitTap=function(e){this.hide()},t.prototype.onConfirmTap=function(e){this.hide(),Detail.Shared().contains(ChangeNameCommit.Shared())||(Detail.Shared().addChild(ChangeNameCommit.Shared()),ChangeNameCommit.Shared().verticalCenter=0,ChangeNameCommit.Shared().horizontalCenter=0),ChangeNameCommit.Shared().show()},t.prototype.show=function(){FullMask.Shared().visible=!0,this.visible=!0},t.prototype.hide=function(){FullMask.Shared().visible=!1,this.visible=!1},t}(eui.ItemRenderer);__reflect(ChangeNameConfirm.prototype,"ChangeNameConfirm");var Detail=function(e){function t(t){var i=e.call(this)||this;return i.tips=new Tips,i.wait=new Wait,i.log_height=0,i.skinName="resource/garden_skin/phoenix/Detail.exml",i.top=0,i.left=0,i.right=0,i.bottom=0,i.data=Main.Shared().lang_config,i.ph_detail=t,i.addChild(i.tips),i.addChild(i.wait),i.change_name.addEventListener(egret.TouchEvent.TOUCH_TAP,i.onChangeNameTap,i),i.back.addEventListener(egret.TouchEvent.TOUCH_TAP,i.onBackTap,i),i}return __extends(t,e),t.Shared=function(){return this.shared||(this.shared=new t(Index.Shared().ph_detail)),this.shared},t.prototype.init=function(){var e=this;this.log_height=100;var t=new HttpReq;if(2==this.ph_detail.type)var i="v1.1/bird/show";else var i="v1.1/bird/show_egg";var n=this.ph_detail.id;t.GET({url:i,data:{id:n},success:function(t){var t=JSON.parse(t);0==t.code?2==e.ph_detail.type?e.renderPh(t.data.bird):e.renderEgg(t.data):e.tips.showTips(Index.Shared().data.indexTs.network_error)},error:function(t){e.tips.showTips(Index.Shared().data.indexTs.network_error)}});var t=new HttpReq,i="v1.1/bird/show_log",n=this.ph_detail.id;t.GET({url:i,data:{birdId:n},success:function(t){var t=JSON.parse(t);0==t.code&&e.renderPhLog(t.data.birdLog)},error:function(t){e.tips.showTips(Index.Shared().data.indexTs.network_error)}})},t.prototype.renderEgg=function(e){var t=this;this.ph_name_1.text=e.NO,this.ph_name_2.text=e.NO,this.ph_num.text=e.NO,0==e.level&&(this.ph_from.visible=!0,this.group_from.visible=!0),this.gender.source=Common.Shared().getPh(e.level,e.gender),this.g_text.text=e.title,this.egg_img.visible=!0;var i="";switch(e.statusId){case 3:i="(孵化中)",this.egg_img.source="auction_json.csd_2x";break;case 4:i="(重生中)",this.egg_img.source="auction_json.csd_l_2x"}if(this.egg_status.text=i,this.egg_status.x=this.stage.stageWidth/2+this.ph_name_1.width/2-30,this.egg_status.visible=!0,e.countdown>0){var n=e.countdown,r=setInterval(function(){n>0?(t.status_count.text=Common.Shared().secondToTime(n),n--):(clearTimeout(r),t.status_count.text="00:00:00")},1e3);this.status_count.visible=!0}},t.prototype.renderPhLog=function(e){this.group_log.removeChildren();var t=new eui.List;t.itemRenderer=LogList,t.dataProvider=new eui.ArrayCollection(e),this.group_log.height=this.log_height,t.y=130,t.cacheAsBitmap=!0,this.group_log.addChild(t)},t.prototype.renderPh=function(e){this.ph_name_1.text=e.name,this.ph_name_2.text=e.name,this.ph_num.text=e.NO,this.ph_img.source=Common.Shared().getPhImg(2,e.gender),this.ph_img.visible=!0,e.lifeValue=e.lifeValue>e.maxLifeValue?e.maxLifeValue:e.lifeValue,this.ph_xp_now.width=252*(e.lifeValue/e.maxLifeValue),this.ph_xp_desc.text=e.lifeValue+"/"+e.maxLifeValue,this.group_xp.visible=!0,0==e.level&&(this.ph_from.visible=!0,this.group_from.visible=!0),this.gender.source=Common.Shared().getPh(e.level,e.gender),this.g_text.text=e.title},t.prototype.onChangeNameTap=function(e){this.contains(ChangeNameConfirm.Shared())||(this.addChild(ChangeNameConfirm.Shared()),ChangeNameConfirm.Shared().verticalCenter=0,ChangeNameConfirm.Shared().horizontalCenter=0),ChangeNameConfirm.Shared().show(),FullMask.Shared().visible=!0},t.prototype.onMoodTipsTap=function(e){this.contains(MoodTips.Shared())||(this.addChild(MoodTips.Shared()),MoodTips.Shared().verticalCenter=0,MoodTips.Shared().horizontalCenter=0),FullMask.Shared().visible=!0,MoodTips.Shared().open(e)},t.prototype.onBackTap=function(e){this.parent.addChild(Index.Shared()),this.parent.removeChild(this)},t}(eui.ItemRenderer);__reflect(Detail.prototype,"Detail");var LogList=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/phoenix/LogList.exml",t}return __extends(t,e),t.prototype.dataChanged=function(){var e=Common.Shared().getITextElement(this.data.content,480,30,25,182,16);e.height>25?(this.height=120,e.y=50):this.height=62,Detail.Shared().log_height+=this.height,Detail.Shared().group_log.height=Detail.Shared().log_height,this.log_content.addChild(e)},t}(eui.ItemRenderer);__reflect(LogList.prototype,"LogList");var MoodTips=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/phoenix/MoodTips.exml",t.mood_tips_confirm.addEventListener(egret.TouchEvent.TOUCH_TAP,t.close,t),t.mood_tips_close.addEventListener(egret.TouchEvent.TOUCH_TAP,t.close,t),t}return __extends(t,e),t.Shared=function(){return this.shared||(this.shared=new t),this.shared},t.prototype.close=function(e){this.visible=!1,FullMask.Shared().visible=!1},t.prototype.open=function(e){this.visible=!0,FullMask.Shared().visible=!0},t}(eui.ItemRenderer);__reflect(MoodTips.prototype,"MoodTips");var AuctionRule=function(e){function t(){var t=e.call(this)||this;t.skinName="resource/garden_skin/wutong/AuctionRule.exml",t.langData=Main.Shared().lang_config,t.cacheAsBitmap=!0,t.right=0,t.left=0,t.top=0,t.bottom=0;var i='<font color="#3C2405" size="27px" face="PingFang SC" >1、创世凤凰\n有且只有100只，编号唯一，不仅是尊贵的象征，而且 拥有最高的生命上限和拥有者的矿工挖矿效率永久加成\n</font><font color="#3C2405" size="27px" face="PingFang SC" >2、拍卖时间\n拍卖时间为当日10:30到22:30\n</font><font color="#3C2405" size="27px" face="PingFang SC" >3、金币冻结和取回\n参与拍卖后，参与拍卖的金币将冻结。玩家可主动 在其后轮次的出价期间取回，取回位置在出价记录中。\n</font><font color="#3C2405" size="27px" face="PingFang SC" >4、出价\n起拍价为5W金币，每次加价5%，加价的金币 不可大于当前所拥有金币。每次进入出价界面都要 输入PIN码进\n</font><font color="#3C2405" size="27px" face="PingFang SC" >5、数量\n每日只拍卖4只创世凤凰蛋</font>',n=Common.Shared().getITextElement(i,474,460,24,0,0);return t.rule_content.addChild(n),t.btn_know.addEventListener(egret.TouchEvent.TOUCH_TAP,t.hideRule,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.showRule=function(){this.visible=!0},t.prototype.hideRule=function(){this.visible=!1},t}(eui.ItemRenderer);__reflect(AuctionRule.prototype,"AuctionRule");var DynamicList=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/wutong/DynamicList.exml",t}return __extends(t,e),t.prototype.dataChanged=function(){this.height=90,this.dyn_one_text.text=this.data.content,this.dyn_one_time.text=this.data.time,this.dyn_day.text=this.data.date,""==this.data.date&&(this.height=60)},t}(eui.ItemRenderer);__reflect(DynamicList.prototype,"DynamicList");var Empty=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/wutong/Empty.exml",t.data=Main.Shared().lang_config,t}return __extends(t,e),t.prototype.onShowEmpty=function(){this.empty.visible=!0},t.prototype.onHiddenEmpty=function(){this.empty.visible=!1},t}(eui.ItemRenderer);__reflect(Empty.prototype,"Empty");var FriendNew=function(e){function t(t,i,n){var r=e.call(this)||this;return r.skinName="resource/garden_skin/wutong/FriendNew.exml",r.data=Main.Shared().lang_config,r.cacheAsBitmap=!0,r.logInfo=t,r.x=i?i:0,r.y=n?n:0,r}return __extends(t,e),t.prototype.addGroup=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:switch(t=this.logInfo.curType){case 1:return[3,1];case 2:return[3,3];case 3:return[3,5];case 4:return[3,7]}return[3,9];case 1:return this.status_img.source="wutong_json.come",[4,Common.Shared().createCircleMask(78,78,this.logInfo.avatar,null,null,!0)];case 2:return e=i.sent(),this.friend_new.addChild(e),this.friend_new.setChildIndex(this.status_img,-1),this.friend_new.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onListTap,this),[3,9];case 3:return this.status_img.source="wutong_json.water_1",[4,Common.Shared().createCircleMask(78,78,this.logInfo.avatar,null,null,!0)];case 4:return e=i.sent(),this.friend_new.addChild(e),this.friend_new.setChildIndex(this.status_img,-1),this.friend_new.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onListTap,this),[3,9];case 5:return this.status_img.source="wutong_json.pick",[4,Common.Shared().createCircleMask(78,78,this.logInfo.avatar,null,null,!0)];case 6:return e=i.sent(),this.friend_new.addChild(e),this.friend_new.setChildIndex(this.status_img,-1),this.friend_new.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onListTap,this),[3,9];case 7:return this.status_img.visible=!1,this.more_text.visible=!0,[4,Common.Shared().createImage(78,78,"wutong_json.green_lighting")];case 8:e=i.sent(),this.friend_new.addChild(e),this.friend_new.setChildIndex(this.more_text,-1),this.friend_new.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onFriendHeadClick,this),i.label=9;case 9:return[2]}})})},t.prototype.onFriendHeadClick=function(){Index.Shared().full_mask.visible=!0,Index.Shared().addChildAt(NewDynamic.Shared(),-1),NewDynamic.Shared().showNewDynamic()},t.prototype.onListTap=function(e){return 0==Index.Shared().isVisit?!1:(Index.Shared().parent.addChild(new OtherGarden(this.logInfo.uid)),void Index.Shared().parent.removeChild(Index.Shared()))},t}(eui.ItemRenderer);__reflect(FriendNew.prototype,"FriendNew");var FruitList=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/wutong/FruitList.exml",t.langdata=Main.Shared().lang_config,t.cacheAsBitmap=!0,t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this;if(this.fru_number.text=this.data.matureFruit,this.data.count_down>0?this.data.count_down>=72e3?(this.fru_icon.source="wutong_json.flower",this.fru_state.text=this.langdata.fruitListTs.is_flower):this.data.count_down<72e3&&(this.fru_icon.source="wutong_json.fruit_green",this.fru_state.text=this.langdata.fruitListTs.being_fru):(this.fru_icon.source="wutong_json.fruit_1",this.fru_state.text=this.langdata.fruitListTs.already_mature),this.data.count_down<=0);else var t=this.data.count_down,i=setInterval(function(){t>0?(e.fru_time.text=Common.Shared().secondToTime(t),t--):clearInterval(i)},999)},t}(eui.ItemRenderer);__reflect(FruitList.prototype,"FruitList");var FullMask=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/wutong/FullMask.exml",t.visible=!1,t.top=0,t.left=0,t.right=0,t.bottom=0,t}return __extends(t,e),t.Shared=function(){return this.shared||(this.shared=new t),this.shared},t}(eui.Component);__reflect(FullMask.prototype,"FullMask");var GoPay=function(e){function t(){var t=e.call(this)||this;return t.top=0,t.right=0,t.left=0,t.bottom=0,t.skinName="resource/garden_skin/wutong/GoPayGB.exml",t.data=Main.Shared().lang_config,t.btn_close_goPay.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseGoPay,t),t.btn_later_goPay.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseGoPay,t),t.btn_up_goPay.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onGoPayClick,t),t}return __extends(t,e),t.Shared=function(){return null==this.share&&(this.share=new t),this.share},t.prototype.onCloseGoPay=function(){this.goPay.visible=!1,Index.Shared().full_mask.visible=!1,UsePay.Shared().onShow()},t.prototype.onShowGoPay=function(){this.goPay.visible=!0,UsePay.Shared().onHidden()},t.prototype.onGoPayClick=function(){Common.Shared().setCookie("app_method",'{"type":"buyMgecoin","url":"'+localStorage.getItem("buyMgecoinUrl")+'}"',30),setTimeout(function(){PropsIntro.Shared().onShowProps()},5e3)},t.prototype.onCloseAgain=function(){this.goPay.visible=!1},t}(eui.ItemRenderer);__reflect(GoPay.prototype,"GoPay");var Index=function(_super){function Index(){var e=_super.call(this)||this;e.common=Common.Shared(),e.fruitUrl=localStorage.getItem("imgUrl")+"fruit/",e.tips=new Tips,e.notices=new Notices,e.wait=new Wait,e.full_mask=FullMask.Shared(),e.empty=new Empty,e.avatar=new eui.Image,e.DynamicDateArr=[],e.sayTime=0,e.isVisit=1,e.skinName="resource/garden_skin/wutong/Index.exml",e.lang=Main.Shared().lang,e.data=Main.Shared().lang_config,e.top=0,e.left=0,e.right=0,e.bottom=0,e.addChild(e.tips),e.addChild(e.notices),e.addChild(e.wait),e.addChild(e.full_mask);var t=new HttpReq,i="v1.1/wutong/show_main";return t.GET({url:i,data:{},success:function(t){var t=JSON.parse(t);if(0==t.code)e.IndexInit(t);else if(411==t.code){var i=new HttpReq,n="v1.1/wutong/message/activate_tip";i.GET({url:n,data:{},success:function(t){var t=JSON.parse(t);if(0==t.code){var i=t.data.activateTip,n=Common.Shared().getITextElement(i,480,240,30,0,0);1==t.lang?e.open_hint.height=680:e.open_hint.height=510,e.hasFruit=t.data.rebatePrice,e.activateTip.addChild(n),e.open_hint.visible=!0}else Index.Shared().tips.showTips(t.msg);Index.Shared().wait.hide()},error:function(t){Index.Shared().wait.hide(),Index.Shared().tips.showTips(e.data.indexTs.network_error)}})}else e.tips.showTips(t.msg)},error:function(t){e.tips.showTips(e.data.indexTs.network_error)}}),e.go_back.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){Common.Shared().setCookie("app_method",'{"type":"goApp"}',30)},e),e.btn_up_open_hint.addEventListener(egret.TouchEvent.TOUCH_TAP,e.OnBtnUpConfirmClick,e),e.btn_later_open_hint.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){Common.Shared().setCookie("app_method",'{"type":"goApp"}',30)},e),e.btn_close_open_hint.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){Common.Shared().setCookie("app_method",'{"type":"goApp"}',30)},e),e.btn_shared_confirm_open.addEventListener(egret.TouchEvent.TOUCH_TAP,e.OnBtnUpConfirmClick,e),e.btn_close_open.addEventListener(egret.TouchEvent.TOUCH_TAP,e.OnBtnCloseConfirmClick,e),e.btn_dete_success.addEventListener(egret.TouchEvent.TOUCH_TAP,e.OnBtnCloseSuccess,e),e.btn_close_success.addEventListener(egret.TouchEvent.TOUCH_TAP,e.OnBtnCloseSuccess,e),e.btn_close_fail.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onGoPayCloseClick,e),e.btn_conf_fail.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onGoPayCloseClick,e),e.head_img_info.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onStaAndDynClick,e),e.group_mc.addEventListener(egret.TouchEvent.TOUCH_TAP,e.OnGroupPhClick,e),e}return __extends(Index,_super),Index.Shared=function(){return null==this.shared&&(this.shared=new Index),this.shared},Index.prototype.OnBtnUpClick=function(){var e=this;Index.Shared().wait.show();var t=new HttpReq,i="v1.1/wutong/message/activate_tip";t.GET({url:i,data:{},success:function(t){var t=JSON.parse(t);if(0==t.code){var i=t.data;Index.Shared().hasFruit=i.mgCoinPrice,Index.Shared().hasMGB=i.rebatePrice,e.confirm_open.visible=!0}else Index.Shared().tips.showTips(t.msg);Index.Shared().wait.hide()},error:function(t){Index.Shared().wait.hide(),Index.Shared().tips.showTips(e.data.indexTs.network_error)}}),this.open_hint.visible=!1},Index.prototype.OnBtnCloseClick=function(){this.full_mask.visible=!1,this.open_hint.visible=!1},Index.prototype.OnBtnUpConfirmClick=function(){Common.Shared().secondPwd(this.afterPwd,Index.Shared().open_hint,!0)},Index.prototype.afterPwd=function(e,t){var i=hex_md5(e);Index.Shared().wait.show();var n=new HttpReq,r="v1.1/pay/confirm_pay";n.POST({url:r,data:{orderId:"",payType:"1",payOrder:"wtActTree",pinCode:i},success:function(e){var e=JSON.parse(e);0==e.code?(Index.Shared().OnBtnCloseClick(),Index.Shared().onGoPaySucClick("1"),Index.Shared().IndexInit()):Index.Shared().tips.showTips(e.msg),Index.Shared().wait.hide()},error:function(e){Index.Shared().wait.hide(),Index.Shared().tips.showTips(Index.Shared().data.indexTs.network_error)}})},Index.prototype.OnBtnCloseConfirmClick=function(){this.confirm_open.visible=!1,this.full_mask.visible=!1},Index.prototype.OnBtnCloseSuccess=function(){this.success.visible=!1,this.full_mask.visible=!1},Index.prototype.onGoPaySucClick=function(e){this.success.visible=!0,this.conf_txt.text="支付成功！消费"+this.hasFruit+"金币。"},Index.prototype.onGoPayCloseClick=function(){this.fail.visible=!1,this.full_mask.visible=!1},Index.prototype.onStaAndDynClick=function(){this.sta_and_dyn||(this.sta_and_dyn=StaAndDyn.Shared(),Index.Shared().full_mask.visible=!0,this.addChildAt(this.sta_and_dyn,-1)),Index.Shared().full_mask.visible=!0,this.sta_and_dyn.onShowStaAndDyn(),this.sta_and_dyn.onFruitList()},Index.prototype.OnToolsClick=function(){this.tools||(this.tools=Tools.Shared(),this.addChildAt(this.tools,-1)),this.full_mask.visible=!0,this.tools.showTools()},Index.prototype.OnInteractiveClick=function(){this.interactive||(this.full_mask.visible=!0,this.interactive=Interactive.Shared(),this.addChildAt(this.interactive,-1)),this.full_mask.visible=!0,this.interactive.ShowInteractive()},Index.prototype.OnEmailClick=function(){this.emailSkin||(this.emailSkin=Email.Shared(),this.full_mask.visible=!0,this.addChildAt(this.emailSkin,-1)),this.full_mask.visible=!0,this.emailSkin.showEmail()},Index.prototype.OnGoldClick=function(){this.parent.addChild(Gold.Shared()),this.parent.removeChild(this),Gold.Shared().onShowGold()},Index.prototype.onAuctionInTo=function(){this.parent.addChild(Creation.Shared()),this.parent.removeChild(this),Creation.Shared().onShowCreation()},Index.prototype.OnGroupPhClick=function(){var e=this;if(this.touchTime>0)return this.touchTime=null,egret.clearTimeout(this.ph_t),this.parent.addChild(Detail.Shared()),Detail.Shared().init(),this.parent.removeChild(this),!1;var t=(new Date).getTime();this.ph_t=egret.setTimeout(function(){e.ph_tap&&e.ph_tap(),e.touchTime=0,egret.clearTimeout(e.ph_t)},this,300),this.touchTime=t},Index.prototype.showTransaction=function(){this.parent.addChild(Transaction.Shared()),this.parent.removeChild(this),Transaction.Shared().onTransactionLists({},1)},Index.prototype.onMinerClick=function(){var e=this,t=new HttpReq;this.wait.show();var i="v1.1/wutong/show_main";t.GET({url:i,data:{},success:function(t){var t=JSON.parse(t);if(0==t.code){var i=t.data.isMinerOpen,n=t.data.minerStatus;0==i?Index.Shared().tips.showTips("你已成功预约宝矿，宝藏正快马加鞭的向您赶来，请耐心等待！"):-1==n?(Binding.Shared().onNextTime(),e.full_mask.visible=!0,e.binding=Binding.Shared(),e.addChildAt(e.binding,-1)):(e.parent.addChild(Working.Shared()),Working.Shared().getMinerData(),e.parent.removeChild(e))}else e.tips.showTips(t.msg);e.wait.hide()},error:function(t){e.wait.hide(),e.tips.showTips(e.data.indexTs.network_error)}})},Index.prototype.onReward=function(e){var t=this;this.wait.show();var i="v1.0/wutong/put_pick",n=new HttpReq;n.POST({url:i,data:{},success:function(e){var e=JSON.parse(e);if(0==e.code){t.guozishule_mc_1.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onReward,t),t.group_tree.removeChild(t.guozishule_mc_1),t.tips.showTips(t.data.indexTs.harvest+e.data.pickFruit+t.data.indexTs.wutong);var i=new HttpReq,n="v1.0/wutong/list_fruit";i.GET({url:n,data:{},success:function(e){var e=JSON.parse(e);if(0==e.code)if(e.data.fruitList.length>0){for(var i=0;i<e.data.fruitList.length;i++)if(e.data.fruitList[i].count_down>0){var n;n=e.data.fruitList[i].count_down>28800?"f":"g",Common.Shared().loadImg(t.fruitUrl+Common.Shared().getImgByStatus(3,t.treeInfo.level,n)).then(function(e){t.fruit.source=e});break}}else t.fruit.source=null}})}else t.tips.showTips(e.msg);t.wait.hide()},error:function(e){t.wait.hide(),t.tips.showTips(t.data.indexTs.network_error)}},e.currentTarget)},Index.prototype.onWater=function(e){var t=this;this.wait.show();var i="v1.0/wutong/put_water",n=new HttpReq;n.POST({url:i,data:{},success:function(e){var e=JSON.parse(e);if(0==e.code){var i=e.data.xp;Common.Shared().mc("watering",420,590,t.group_tree,!0).then(function(n){t.watering_mc_1=n,t.watering_mc_1.scaleX=1.5,t.watering_mc_1.scaleY=1.5,t.group_tree.addChild(t.watering_mc_1),t.watering_mc_1.gotoAndPlay(0,1),t.watering_mc_1.addEventListener(egret.Event.COMPLETE,function(n){t.ganku_mc_1.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onWater,t),t.group_tree.removeChild(t.ganku_mc_1),t.icon_tip.visible=!0,t.icon_tip_text.text="+"+e.data.xp+t.data.indexTs.life_val,setTimeout(function(){t.icon_tip.visible=!1,t.icon_tip_text.text=""},3e3),t.wutongGrow(i)},t.watering_mc_1)})}else t.tips.showTips(e.msg);t.wait.hide()},error:function(e){t.wait.hide(),t.tips.showTips(t.data.indexTs.network_error)}},e.currentTarget)},Index.prototype.showRewardCount=function(e){var t=this;if(this.matureTime>0)return!1;e&&(this.matureTime=e),this.mature_count.visible=!0,this.mature_img.visible=!0;var i=setInterval(function(){return __awaiter(t,void 0,void 0,function(){var e,t,n,r,o,a,s,h=this;return __generator(this,function(d){switch(d.label){case 0:return this.matureTime>0?(this.mature_count.text=Common.Shared().secondToTime(this.matureTime),this.matureTime--,[3,3]):[3,1];case 1:return clearInterval(i),this.mature_count.visible=!1,this.mature_img.visible=!1,e=this.fruit,[4,Common.Shared().loadImg(this.fruitUrl+Common.Shared().getImgByStatus(3,Index.Shared().treeInfo.level,"m"))];case 2:e.source=d.sent(),this.group_tree.contains(this.guozishule_mc_1)||(t=void 0,n=void 0,this.treeInfo.level<4?(t=400,n=450,r=o=1.1):this.treeInfo.level>3&&this.treeInfo.level<7?(t=400,n=430,r=o=1.25):this.treeInfo.level>6&&this.treeInfo.level<10?(t=400,n=410,r=o=1.38):(t=375,n=380,r=o=1.5),Common.Shared().mc("guozishule",t,n,null,!0).then(function(e){h.guozishule_mc_1=e,h.guozishule_mc_1.scaleX=r,h.guozishule_mc_1.scaleY=o,h.group_tree.addChild(h.guozishule_mc_1),h.guozishule_mc_1.gotoAndPlay(0,-1),h.guozishule_mc_1.touchEnabled=!0,h.guozishule_mc_1.addEventListener(egret.TouchEvent.TOUCH_TAP,h.onReward,h)})),a=new HttpReq,s="v1.0/wutong/list_fruit",a.GET({url:s,data:{},success:function(e){var e=JSON.parse(e);if(0==e.code)for(var t=0;t<e.data.fruitList.length;t++)if(e.data.fruitList[t].count_down>0){Index.Shared().showRewardCount(e.data.fruitList[t].count_down);break}}}),d.label=3;case 3:return[2]}})})},999)},Index.prototype.showAntiThef=function(e){var t=this;e&&(Index.Shared().antiTheftTime=e),this.group_protect.visible=!0;var i,n,r,o;this.treeInfo.level<4?(i=375,n=300,r=o=.7):this.treeInfo.level>3&&this.treeInfo.level<7?(i=375,n=290,r=o=.8):this.treeInfo.level>6&&this.treeInfo.level<10?(i=375,n=270,r=o=.9):(i=375,n=260,r=o=1),Common.Shared().dbMc("protection",!0).then(function(e){t.group_tree.addChild(e),e.x=i,e.y=n,e.scaleX=r,e.scaleY=o,e.animation.play("protection");var a=setInterval(function(){Index.Shared().antiTheftTime>0?(t.protect_count.text=Common.Shared().secondToTime(Index.Shared().antiTheftTime),Index.Shared().antiTheftTime--):(clearInterval(a),t.group_tree.removeChild(e),t.group_protect.visible=!1)},999)})},Index.prototype.IndexInit=function(e){var t=this;if(!this.cute){var i=new HttpReq,n="v1.1/bird/show_say";i.GET({url:n,data:{},success:function(e){var e=JSON.parse(e);0==e.code?(t.cute=e.data.cute,t.dream=e.data.dream):t.tips.showTips(e.msg)},error:function(e){t.tips.showTips(t.data.indexTs.network_error)}})}this.friends_news.contains(this.empty)&&this.friends_news.removeChild(this.empty);var i=new HttpReq,n="v1.0/wutong/be_message";if(i.GET({url:n,data:{},success:function(e){var e=JSON.parse(e);0==e.code?t.renderNews(e):t.tips.showTips(e.msg)},error:function(e){t.tips.showTips(t.data.indexTs.network_error)}}),e)return this.renderData(e),!1;var i=new HttpReq,n="v1.1/wutong/show_main";i.GET({url:n,data:{},success:function(e){var e=JSON.parse(e);0==e.code&&t.renderData(e)},error:function(){t.tips.showTips(t.data.indexTs.network_error)}})},Index.prototype.renderNews=function(e){return __awaiter(this,void 0,void 0,function(){var t,i,n,r,o,a,s;return __generator(this,function(h){switch(h.label){case 0:t=e.data.treeLog,i=t.length,n=0,i>6?n=6:i>0?n=i:(this.empty.onShowEmpty(),this.empty.empty_text.textColor=2368548,this.empty.empty.horizontalCenter=-270,this.friends_news.addChild(this.empty)),r=0,h.label=1;case 1:return n>r?(o=40+120*r,a=30,5==r&&(t[r].curType=4),s=new FriendNew(t[r],o,a),[4,s.addGroup()]):[3,4];case 2:h.sent(),this.friends_news.addChild(s),h.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},Index.prototype.renderData=function(e){return __awaiter(this,void 0,void 0,function(){var t,i,n,r,o,a,s,h,d,l,c,u,d,l,p,_,g,m,d,l,v,f,S=this;return __generator(this,function(y){switch(y.label){case 0:if(this.navControl(e.data.menu),this.isVisit=e.data.isVisit,this.auctionInfo=e.data.auctionInfo,this.auctionInfo.auctionId>0&&(this.contains(this.getAuctionItem)&&this.removeChild(this.getAuctionItem),this.getAuctionItem=new GetAutionItem,this.addChild(this.getAuctionItem)),e.data.bird.id>0?(this.ph_detail=e.data.bird,this.ph_detail.type=2):e.data.egg.id>0&&(this.ph_detail=e.data.egg,this.ph_detail.type=1),this.ph_detail){switch(this.ph_detail.gender){case 1:this.ph_detail.genderText="m";break;case 2:this.ph_detail.genderText="w"}this.phMc(this.ph_detail.statusId)}return this.head_img_info.visible=!0,this.treeInfo=e.data.treeInfo,t=e.data.treeInfo,i=e.data.memberInfo,this.tree.touchEnabled=!1,this.nickname.touchEnabled=!1,this.bg.source=Common.Shared().getImgByStatus(1),n=this.tree,[4,Common.Shared().loadImg(this.fruitUrl+Common.Shared().getImgByStatus(2,t.level))];case 1:return n.source=y.sent(),t.matureFruit>0?(r="m",o=this.fruit,[4,Common.Shared().loadImg(this.fruitUrl+Common.Shared().getImgByStatus(3,t.level,r))]):[3,3];case 2:return o.source=y.sent(),[3,8];case 3:return t.matureTime>0?(r=t.matureTime>28800?"f":"g",a=this.fruit,[4,Common.Shared().loadImg(this.fruitUrl+Common.Shared().getImgByStatus(3,t.level,r))]):[3,5];case 4:return a.source=y.sent(),[3,8];case 5:return 0!=t.matureTime?[3,7]:(r="m",s=this.fruit,[4,Common.Shared().loadImg(this.fruitUrl+Common.Shared().getImgByStatus(3,t.level,r))]);case 6:return s.source=y.sent(),[3,8];case 7:this.fruit.source="",y.label=8;case 8:return this.bg.cacheAsBitmap=!0,this.nickname.cacheAsBitmap=!0,this.nickname.text=i.username,[4,Common.Shared().createCircleMask(58,58,i.avatar,5,5,!0)];case 9:return h=y.sent(),this.group_avatar.addChild(h),this.user_lv.source="wutong_json.LV"+t.level,this.ord_leave_xp=t.nextLevelXP,this.xp_bar.width=t.xp/this.ord_leave_xp*124,this.xp_text.text=t.xp+"/"+this.ord_leave_xp,this.xp_now=t.xp,t.matureTime>0&&this.showRewardCount(t.matureTime),t.antiTheftTime>0&&this.showAntiThef(t.antiTheftTime),t.matureFruit>0&&(d=void 0,l=void 0,this.treeInfo.level<4?(d=400,l=450,c=u=1.1):this.treeInfo.level>3&&this.treeInfo.level<7?(d=400,l=430,c=u=1.25):this.treeInfo.level>6&&this.treeInfo.level<10?(d=400,l=410,c=u=1.38):(d=375,l=380,c=u=1.5),Common.Shared().mc("guozishule",d,l,null,!0).then(function(e){S.guozishule_mc_1=e,S.guozishule_mc_1.scaleX=c,S.guozishule_mc_1.scaleY=u,S.group_tree.addChild(S.guozishule_mc_1),S.guozishule_mc_1.gotoAndPlay(0,-1),S.guozishule_mc_1.touchEnabled=!0,S.guozishule_mc_1.addEventListener(egret.TouchEvent.TOUCH_TAP,S.onReward,S)})),t.nextWaterTime<0?(d=void 0,l=void 0,this.treeInfo.level<4?(d=530,l=270,p=_=.5):this.treeInfo.level>3&&this.treeInfo.level<7?(d=520,l=220,p=_=.57):this.treeInfo.level>6&&this.treeInfo.level<10?(d=530,l=160,p=_=.65):(d=500,l=80,p=_=.7),Common.Shared().mc("ganku",d,l,null,!0).then(function(e){S.ganku_mc_1=e,S.ganku_mc_1.scaleX=p,S.ganku_mc_1.scaleY=_,S.group_tree.addChild(S.ganku_mc_1),S.ganku_mc_1.gotoAndPlay(0,-1),S.ganku_mc_1.touchEnabled=!0,S.ganku_mc_1.addEventListener(egret.TouchEvent.TOUCH_TAP,S.onWater,S)})):(g=t.nextWaterTime,m=setInterval(function(){if(g>0)g--;else{clearInterval(m);var e,t,i=void 0,n=void 0;S.treeInfo.level<4?(i=530,n=270,e=t=.5):S.treeInfo.level>3&&S.treeInfo.level<7?(i=520,n=220,e=t=.57):S.treeInfo.level>6&&S.treeInfo.level<10?(i=510,n=170,e=t=.65):(i=500,n=80,e=t=.7),Common.Shared().mc("ganku",i,n,null,!0).then(function(i){S.ganku_mc_1=i,S.ganku_mc_1.scaleX=e,S.ganku_mc_1.scaleY=t,S.group_tree.addChild(S.ganku_mc_1),S.ganku_mc_1.gotoAndPlay(0,-1),S.ganku_mc_1.touchEnabled=!0,S.ganku_mc_1.addEventListener(egret.TouchEvent.TOUCH_TAP,S.onWater,S)})}},999)),t.hasWormy>0&&(d=void 0,l=void 0,this.treeInfo.level<4?(d=250,l=280,v=f=.8):this.treeInfo.level>3&&this.treeInfo.level<7?(d=250,l=220,v=f=.87):this.treeInfo.level>6&&this.treeInfo.level<10?(d=250,l=160,v=f=.94):(d=250,l=80,v=f=1),Common.Shared().mc("worm",d,l,null,!0).then(function(e){S.worm_mc_1=e,S.worm_mc_1.scaleX=v,S.worm_mc_1.scaleY=f,S.group_tree.addChild(S.worm_mc_1),S.worm_mc_1.gotoAndPlay(0,-1),S.worm_mc_1.touchEnabled=!0,S.worm_mc_1.addEventListener(egret.TouchEvent.TOUCH_TAP,S.OnToolsClick,S)})),e.data.notice.length>0&&(this.noticeData=e.data.notice,this.renderNotice()),[2]}})})},Index.prototype.renderNotice=function(){return Index.Shared().noticeData.length<1?!1:void Index.Shared().notices.showNotices(Index.Shared().noticeData.shift(),this.lang,this.ph_detail?this.ph_detail.genderText:"w")},Index.prototype.commonMc=function(e){var t=this;Common.Shared().dbMc(this.ph_detail.genderText+"_main",!0).then(function(i){t.group_mc.removeChildren();var n=i;t.group_mc.addChild(n),n.y=-140,n.x=0,e?(n.animation.play(e,1),n.once(egret.Event.COMPLETE,function(){n.animation.play("abc")},t)):n.animation.play("abc"),t.commonT1=egret.setInterval(function(){n.animation.fadeIn("blink",.3,2,0,"normalGroup")},t,5e3),t.commonT2=egret.setInterval(function(){t.changeSay(n)},t,15e3),n.touchEnabled=!0,t.ph_tap=function(){t.changeSay(n)}})},Index.prototype.stopCommonMc=function(){egret.clearInterval(this.commonT1),egret.clearInterval(this.commonT2)},Index.prototype.eatMc=function(e,t,i){var n=this,r=this.ph_detail.genderText,o=r+"_eat";i||(i=0),this.stopCommonMc(),Common.Shared().dbMc(o,!0).then(function(o){n.group_mc.removeChildren();var a=o;n.group_mc.addChild(a);var s="";switch(e){case 5:var s="eat_fruit";break;case 7:var s="eat_medicine";break;case 8:var s="eat_spring"}a.y=-140,a.x=15,a.animation.fadeIn(s,.3,1,0,"normalGroup");var h=function(){i>0?Common.Shared().dbMc(r+"_eat_error",!0).then(function(e){n.group_mc.removeChildren();var i=e;n.group_mc.addChild(i),i.y=-142,i.x=15,i.animation.fadeIn(i.animation.animationNames[0],.3,1,0,"normalGroup");var r=function(){n.phMc(t)};i.once(egret.Event.COMPLETE,r,n)}):n.phMc(t,"wave")};a.once(egret.Event.COMPLETE,h,n)})},Index.prototype.changeSay=function(e,t){var i,n=this,r=Common.Shared().getTimeStatus();"n"==r?i=this.dream:(i=this.cute,e&&e.animation.fadeIn("wave",.3,1,0,"normalGroup"));var o;o=t?t:i[Math.floor(Math.random()*i.length)],this.chart_content.text=o,this.group_tips.height=93+this.chart_content.textHeight,this.group_tips.y=-(360+this.chart_content.textHeight),this.group_tips.visible=!0,0==this.sayTime?(this.sayTime=5,this.sayT=egret.setInterval(function(){n.sayTime>0?n.sayTime--:(n.group_tips.visible=!1,egret.clearInterval(n.sayT))},this,1e3)):this.sayTime=5},Index.prototype.phMc=function(e,t){var i=this,n=this.ph_detail.genderText,r="",o=!0,a=0;
switch(this.ph_shadow.visible=!0,0==e&&"n"==Common.Shared().getTimeStatus()&&(e=6),e){case 0:t||(t=null),Index.Shared().commonMc(t);break;case 3:r="on_hatch",this.ph_shadow.visible=!1;break;case 4:r="on_rebirth",this.ph_shadow.visible=!1;break;case 5:r=n+"_ill",a=8e3,this.ph_tap=function(){Index.Shared().OnToolsClick()};break;case 6:r=n+"_sleep",egret.setInterval(function(){i.changeSay()},this,15e3);break;case 7:r=n+"_hungry",this.ph_shadow.visible=!1,a=8e3,this.ph_tap=function(){Index.Shared().OnToolsClick()};break;case 15:r=n+"_baozhedan",a=8e3;break;case 14:o=!1;break;case 16:r=n+"_rebirth_"+this.lang,a=8e3}o&&""!==r?(this.group_mc.removeChildren(),Common.Shared().dbMc(r,!0).then(function(t){switch(e){case 5:t.y=-140,t.x=12;break;case 6:t.y=-140,t.x=12;break;case 7:t.y=-140,t.x=-1;break;case 3:t.y=-140,t.x=-1;break;case 4:t.y=-140,t.x=-1}i.group_mc.addChild(t),a>0?(t.animation.fadeIn(t.animation.animationNames[0],.3,1,0,"normalGroup"),setInterval(function(){t.animation.fadeIn(t.animation.animationNames[0],.3,1,0,"normalGroup")},a)):t.animation.fadeIn(t.animation.animationNames[0],.3,0,0,"normalGroup")})):14==e&&(this.group_mc.addChild(new eui.Image("auction_json.lyz_yw_"+this.lang)),this.group_mc.y=-100)},Index.prototype.updateData=function(){var e=this,t=new HttpReq,i="v1.1/wutong/show_main";t.GET({url:i,data:{},success:function(t){var t=JSON.parse(t);if(0==t.code){t.data.bird?(e.ph_detail=t.data.bird,e.ph_detail.type=2):(e.ph_detail=t.data.egg,e.ph_detail.type=1);var i=t.data.treeInfo;if(Common.Shared().loadImg(e.fruitUrl+Common.Shared().getImgByStatus(2,i.level)).then(function(t){e.tree.source=t}),i.matureTime>0){var n;n=i.matureTime<14400?"m":i.matureTime>28800?"f":"g",Common.Shared().loadImg(e.fruitUrl+Common.Shared().getImgByStatus(3,i.level,n)).then(function(t){e.fruit.source=t})}e.user_lv.source="wutong_json.LV"+i.level,e.xp_now=i.xp,e.ord_leave_xp=i.nextLevelXP,e.xp_bar.width=i.xp/e.ord_leave_xp*124,e.xp_text.text=i.xp+"/"+e.ord_leave_xp}},error:function(t){e.tips.showTips(e.data.indexTs.network_error)}})},Index.prototype.wutongGrow=function(e){var t=this;e>0&&(Index.Shared().ord_leave_xp<1e3&&Number(Index.Shared().xp_now)+Number(e)>Index.Shared().ord_leave_xp?(Index.Shared().updateData(),Common.Shared().dbMc("upgrade_"+this.lang,!0).then(function(e){e.x=400,e.y=50,e.once(egret.Event.COMPLETE,function(){Index.Shared().group_tree.removeChild(e)},t),Index.Shared().group_tree.addChild(e),e.animation.play(e.animation.animationNames[0],1)})):(Index.Shared().xp_now+=Number(e),Index.Shared().xp_bar.width=Index.Shared().xp_now/Index.Shared().ord_leave_xp*124,Index.Shared().xp_text.text=Index.Shared().xp_now+"/"+Index.Shared().ord_leave_xp))},Index.prototype.littleTips=function(e){var t=this;this.icon_tip.visible=!0,this.icon_tip_text.text=e,setTimeout(function(){t.icon_tip.visible=!1,t.icon_tip_text.text=""},3e3)},Index.prototype.navControl=function(menu){return __awaiter(this,void 0,void 0,function(){var navArr,originLeftWidth,stepWidth,i,navItem;return __generator(this,function(_a){for(navArr={interact:"OnInteractiveClick",goods:"OnToolsClick",email:"OnEmailClick",miner:"onMinerClick",tran:"showTransaction",auction:"onAuctionInTo",gold:"OnGoldClick"},originLeftWidth=45,stepWidth=100,i=0;i<menu.length;i++)navItem=new eui.Image,navItem.cacheAsBitmap=!0,navItem.source=eval("this.data.index."+menu[i]),navItem.x=originLeftWidth+i*stepWidth,navItem.y=0,navItem.addEventListener(egret.TouchEvent.TOUCH_TAP,eval("this."+navArr[menu[i]]),this),this.nav.addChild(navItem);return[2]})})},Index}(eui.ItemRenderer);__reflect(Index.prototype,"Index");var Interactive=function(e){function t(){var t=e.call(this)||this;return t.empty=new Empty,t.top=0,t.left=0,t.right=0,t.bottom=0,t.skinName="resource/garden_skin/wutong/InteractiveSkin.exml",t.data=Main.Shared().lang_config,t.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,t.OnCloseInteractive,t),t.empty.onShowEmpty(),t.group_list.addChild(t.empty),t}return __extends(t,e),t.Shared=function(){return null==this.share&&(this.share=new t),this.share},t.prototype.CloseInteractive=function(){this.group_interactive.visible=!1},t.prototype.ShowInteractive=function(){var e=this;this.group_list.contains(this.empty)&&this.group_list.removeChild(this.empty),this.group_list.contains(this.scroller_interactive)&&this.group_list.removeChild(this.scroller_interactive),this.group_interactive.visible=!0,Index.Shared().wait.show();var t="v1.0/wutong/list_friend",i=new HttpReq;i.GET({url:t,data:{},success:function(t){var t=JSON.parse(t);if(0==t.code){var i=t.data.treeInfo;i.length>0?(e.scroller_interactive=new ScrollerInteractive(i,i[i.length-1].id),e.group_list.addChild(e.scroller_interactive)):(e.empty.onShowEmpty(),e.group_list.addChild(e.empty))}else Index.Shared().tips.showTips(t.msg);Index.Shared().wait.hide()},error:function(t){Index.Shared().wait.hide(),Index.Shared().tips.showTips(e.data.interactiveTs.network_error)}})},t.prototype.OnCloseInteractive=function(){this.CloseInteractive(),Index.Shared().full_mask.visible=!1},t.share=null,t}(eui.ItemRenderer);__reflect(Interactive.prototype,"Interactive");var InteractiveList=function(e){function t(){var t=e.call(this)||this;t.skinName="resource/garden_skin/wutong/InteractiveList.exml",t.cacheAsBitmap=!0;var i=new egret.Shape;return i.graphics.lineStyle(2,12296083),i.alpha=.5,i.graphics.moveTo(60,128),i.graphics.lineTo(530,128),t.interactive_list.addChild(i),t.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onListTap,t),t}return __extends(t,e),t.prototype.onListTap=function(e){Index.Shared().parent.addChild(new OtherGarden(this.uid)),Index.Shared().parent.removeChild(Index.Shared())},t.prototype.dataChanged=function(){var e=this;if(this.uid=this.data.uid,this.username.text=this.data.userNote?this.data.userNote:this.data.username,this.treeLevel.text="LV."+this.data.treeLevel,Common.Shared().createCircleMask(78,78,this.data.avatar,48,25,!0).then(function(t){e.interactive_list.addChild(t)}),this.data.isWater>0?this.water_img.visible=!0:this.water_img.visible=!1,this.data.matureTime>0){this.cacheAsBitmap=!1,this.top_img.visible=!0,this.top_img.source="wutong_json.countdown";var t=this.data.matureTime;this.countdown.visible=!0;var i=setInterval(function(){t>0?(e.countdown.text=Common.Shared().secondToTime(t),t--):(clearInterval(i),e.countdown.visible=!1,e.top_img.source="wutong_json.pick")},999)}else this.data.isAntiTheft>0?(this.top_img.visible=!0,this.top_img.source="wutong_json.cover_1"):this.data.isSteal>0&&(this.top_img.visible=!0,this.top_img.source="wutong_json.pick")},t}(eui.ItemRenderer);__reflect(InteractiveList.prototype,"InteractiveList");var Loading=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/wutong/Loading.exml",t.top=0,t.left=0,t.right=0,t.bottom=0,t}return __extends(t,e),t.Shared=function(){return null==this.share&&(this.share=new t),this.share},t.share=null,t}(eui.ItemRenderer);__reflect(Loading.prototype,"Loading");var NewDynamic=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/wutong/NewDynamic.exml",t.data=Main.Shared().lang_config,t.top=0,t.left=0,t.right=0,t.bottom=0,t.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseClick,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.onCloseClick=function(){this.group_news.visible=!1,Index.Shared().full_mask.visible=!1,Index.Shared().wait.hide()},t.prototype.showNewDynamic=function(){var e=this;Index.Shared().DynamicDateArr=[],this.group_new_list.contains(this.scrollerNews)&&this.group_new_list.removeChild(this.scrollerNews),Index.Shared().wait.show();var t=new HttpReq,i="v1.0/wutong/be_message";t.GET({url:i,data:{},success:function(t){var t=JSON.parse(t);if(0==t.code){for(var i=t.data.treeLog,n=0;n<i.length;n++)Index.Shared().DynamicDateArr[i[n].date]?i[n].date="":Index.Shared().DynamicDateArr[i[n].date]=!0;e.scrollerNews=ScrollerNews.Shared(i,i[i.length-1].id),e.group_new_list.addChild(e.scrollerNews)}else Index.Shared().tips.showTips(t.msg);Index.Shared().wait.hide()},error:function(t){Index.Shared().wait.hide(),Index.Shared().tips.showTips(e.data.newDynamicTs.network_error)}}),this.group_news.visible=!0},t}(eui.ItemRenderer);__reflect(NewDynamic.prototype,"NewDynamic");var NewsList=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/wutong/NewsList.exml",t.cacheAsBitmap=!0,t.friend_list.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onListTap,t),t}return __extends(t,e),t.prototype.onListTap=function(e){Index.Shared().parent.addChild(new OtherGarden(this.uid)),Index.Shared().parent.removeChild(Index.Shared())},t.prototype.dataChanged=function(){var e=this;switch(this.uid=this.data.uid,this.data.curType){case 1:this.status_img.source="wutong_json.come",Common.Shared().createCircleMask(78,78,this.data.avatar,null,null,!0).then(function(t){e.friend_head.addChild(t),e.friend_head.setChildIndex(e.status_img,-1)});break;case 2:this.status_img.source="wutong_json.water_1",Common.Shared().createCircleMask(78,78,this.data.avatar,null,null,!0).then(function(t){e.friend_head.addChild(t),e.friend_head.setChildIndex(e.status_img,-1)});break;case 3:this.status_img.source="wutong_json.pick",Common.Shared().createCircleMask(78,78,this.data.avatar,null,null,!0).then(function(t){e.friend_head.addChild(t),e.friend_head.setChildIndex(e.status_img,-1)})}if(this.data.content.length>10){var t=Common.Shared().getChar(this.data.content,8);this.content.text=t+"..."}else this.content.text=this.data.content;if(this.username.text=this.data.userNote?this.data.userNote:this.data.username,this.username.text.length>8){var t=Common.Shared().getChar(this.username.text,8);this.username.text=t+"..."}else this.username.text=this.username.text;this.treeLevel.text="LV."+this.data.treeLevel,this.time.text=this.data.time,this.date.text=this.data.date},t}(eui.ItemRenderer);__reflect(NewsList.prototype,"NewsList");var Notices=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/wutong/Notices.exml",t.data=Main.Shared().lang_config,t.right=0,t.left=0,t.top=0,t.bottom=0,t.notices_close.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onNoticesCloseTap,t),t.notices_confrim.addEventListener(egret.TouchEvent.TOUCH_TAP,t.closeEggStatus,t),t}return __extends(t,e),t.prototype.onNoticesCloseTap=function(e){this.closeNotices()},t.prototype.showNotices=function(e,t,i,n){var r=this;if(0==e.curType||4==e.curType||5==e.curType)this.parent.setChildIndex(this,-1),this.full_mask.visible=!0,this.notices_text.text=e.content,this.group_notices.visible=!0,this.id=e.id;else{this.group_mc.visible=!0,this.full_mask.visible=!0,this.parent.setChildIndex(this,-1),this.id=e.id;var o="";switch(e.curType){case 1:o="birth_fall";break;case 2:o=i+"_hatch_"+t;break;case 3:o=i+"_rebirth_"+t}Common.Shared().dbMc(o,!0).then(function(e){r.the_mc=e,r.the_mc.animation.play(r.the_mc.animation.animationNames[0],1),r.the_group.addChild(r.the_mc)})}},t.prototype.closeNotices=function(){this.full_mask.visible=!1,this.notices_text.text="",this.group_notices.visible=!1;var e=new HttpReq,t="v1.1/notice/put_read";e.POST({url:t,data:{noticeId:this.id},success:function(e){var e=JSON.parse(e);0==e.code?Index.Shared().renderNotice():Index.Shared().tips.showTips(e.msg),Index.Shared().wait.hide()},error:function(e){Index.Shared().wait.hide(),Index.Shared().tips.showTips("网络错误！请重新尝试！")}})},t.prototype.closeEggStatus=function(e){this.group_mc.visible=!1,this.full_mask.visible=!1,this.the_group.contains(this.the_mc)&&this.the_group.removeChild(this.the_mc);var t=new HttpReq,i="v1.1/notice/put_read";t.POST({url:i,data:{noticeId:this.id},success:function(e){var e=JSON.parse(e);0==e.code?Index.Shared().renderNotice():Index.Shared().tips.showTips(e.msg),Index.Shared().wait.hide()},error:function(e){Index.Shared().wait.hide(),Index.Shared().tips.showTips("网络错误！请重新尝试！")}})},t}(eui.ItemRenderer);__reflect(Notices.prototype,"Notices");var OtherGarden=function(e){function t(t){var i=e.call(this)||this;if(i.common=Common.Shared(),i.fruitUrl=localStorage.getItem("imgUrl")+"fruit/",i.tips=new Tips,i.wait=new Wait,i.sayTime=0,i.skinName="resource/garden_skin/wutong/OtherGarden.exml",i.data=Main.Shared().lang_config,i.lang=Main.Shared().lang,i.top=0,i.left=0,i.right=0,i.bottom=0,i.addChild(i.tips),i.addChild(i.wait),i.targetUid=t,!i.cute){var n=new HttpReq,r="v1.1/bird/show_say";n.GET({url:r,data:{},success:function(e){var e=JSON.parse(e);0==e.code?(i.cute=e.data.cute,i.dream=e.data.dream):i.tips.showTips(e.msg)},error:function(e){i.tips.showTips(i.data.indexTs.network_error)}})}var n=new HttpReq,r="v1.1/wutong/show_main";n.GET({url:r,data:{targetUid:t},success:function(e){var e=JSON.parse(e);if(0==e.code){i.treeInfo=e.data.treeInfo;var t=e.data.treeInfo,n=e.data.memberInfo;if(i.bg.source=Common.Shared().getImgByStatus(1),Common.Shared().loadImg(i.fruitUrl+Common.Shared().getImgByStatus(2,t.level)).then(function(e){i.tree.source=e}),t.matureTime>0){var r;r=t.matureTime<14400?"m":t.matureTime>28800?"f":"g",Common.Shared().loadImg(i.fruitUrl+Common.Shared().getImgByStatus(3,t.level,r)).then(function(e){i.fruit.source=e})}if(i.nickname.text=n.username,Common.Shared().createCircleMask(58,58,n.avatar,5,5,!0).then(function(e){i.group_avatar.addChild(e)}),i.user_lv.source="wutong_json.LV"+t.level,i.xp_bar.width=t.xp/t.nextLevelXP*180,i.xp_text.text=t.xp+"/"+t.nextLevelXP,t.matureTime>0&&(i.matureTime=t.matureTime,i.showRewardCount(t.matureTime)),t.antiTheftTime>0){var o=t.antiTheftTime;i.group_protect.visible=!0;var a,s,h,d;i.treeInfo.level<4?(a=375,s=300,h=d=.7):i.treeInfo.level>3&&i.treeInfo.level<7?(a=375,s=290,h=d=.8):i.treeInfo.level>6&&i.treeInfo.level<10?(a=375,s=270,h=d=.9):(a=375,s=260,h=d=1),Common.Shared().dbMc("protection",!0).then(function(e){i.group_tree.addChild(e),e.x=a,e.y=s,e.scaleX=h,e.scaleY=d,e.animation.play("protection");var t=setInterval(function(){o>0?(i.protect_count.text=Common.Shared().secondToTime(o),o--):(clearInterval(t),i.group_tree.removeChild(e),i.group_protect.visible=!1)},999)})}if(t.matureFruit>0){var l,c,u=void 0,p=void 0;i.treeInfo.level<4?(u=400,p=450,l=c=1.1):i.treeInfo.level>3&&i.treeInfo.level<7?(u=400,p=430,l=c=1.25):i.treeInfo.level>6&&i.treeInfo.level<10?(u=400,p=410,l=c=1.38):(u=375,p=380,l=c=1.5),Common.Shared().mc("guozishule",u,p,null,!0).then(function(e){i.guozishule_mc_1=e,i.guozishule_mc_1.scaleX=l,i.guozishule_mc_1.scaleY=c,i.group_tree.addChild(i.guozishule_mc_1),i.guozishule_mc_1.gotoAndPlay(0,-1),i.guozishule_mc_1.touchEnabled=!0,i.guozishule_mc_1.addEventListener(egret.TouchEvent.TOUCH_TAP,i.onReward,i)})}if(t.nextWaterTime<=0){var _,g,u=void 0,p=void 0;i.treeInfo.level<4?(u=530,p=270,_=g=.5):i.treeInfo.level>3&&i.treeInfo.level<7?(u=520,p=220,_=g=.57):i.treeInfo.level>6&&i.treeInfo.level<10?(u=530,p=160,_=g=.65):(u=500,p=80,_=g=.7),Common.Shared().mc("ganku",u,p,null,!0).then(function(e){i.ganku_mc_1=e,i.ganku_mc_1.scaleX=_,i.ganku_mc_1.scaleY=g,i.group_tree.addChild(i.ganku_mc_1),i.ganku_mc_1.gotoAndPlay(0,-1),i.ganku_mc_1.touchEnabled=!0,i.ganku_mc_1.addEventListener(egret.TouchEvent.TOUCH_TAP,i.onWater,i)})}else var m=t.nextWaterTime,v=setInterval(function(){if(m>0)m--;else{clearInterval(v);var e,t,n=void 0,r=void 0;i.treeInfo.level<4?(n=530,r=270,e=t=.5):i.treeInfo.level>3&&i.treeInfo.level<7?(n=520,r=220,e=t=.57):i.treeInfo.level>6&&i.treeInfo.level<10?(n=530,r=160,e=t=.65):(n=500,r=80,e=t=.7),Common.Shared().mc("ganku",n,r,null,!0).then(function(n){i.ganku_mc_1=n,i.ganku_mc_1.scaleX=e,i.ganku_mc_1.scaleY=t,i.group_tree.addChild(i.ganku_mc_1),i.ganku_mc_1.gotoAndPlay(0,-1),i.ganku_mc_1.touchEnabled=!0,i.ganku_mc_1.addEventListener(egret.TouchEvent.TOUCH_TAP,i.onWater,i)})}},999);if(t.hasWormy>0){var f,S,u=void 0,p=void 0;i.treeInfo.level<4?(u=250,p=280,f=S=.8):i.treeInfo.level>3&&i.treeInfo.level<7?(u=250,p=220,f=S=.87):i.treeInfo.level>6&&i.treeInfo.level<10?(u=250,p=160,f=S=.94):(u=250,p=80,f=S=1),Common.Shared().mc("worm",u,p,null,!0).then(function(e){i.worm_mc_1=e,i.worm_mc_1.scaleX=f,i.worm_mc_1.scaleY=S,i.group_tree.addChild(i.worm_mc_1),i.worm_mc_1.gotoAndPlay(0,-1),i.worm_mc_1.touchEnabled=!0,i.worm_mc_1.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){i.tips.showTips(i.data.otherGardenTs.only_master)},i)})}}else i.tips.showTips(e.msg);if(e.data.bird.id>0?(i.ph_detail=e.data.bird,i.ph_detail.type=2):e.data.egg.id>0&&(i.ph_detail=e.data.egg,i.ph_detail.type=1),i.ph_detail){switch(i.ph_detail.gender){case 1:i.ph_detail.genderText="m";break;case 2:i.ph_detail.genderText="w"}i.phMc(i.ph_detail.statusId)}},error:function(e){i.tips.showTips(i.data.otherGardenTs.network_error)}});var n=new HttpReq,r="v1.0/wutong/be_message";return n.GET({url:r,data:{targetUid:i.targetUid},success:function(e){var e=JSON.parse(e);if(0==e.code)for(var t=e.data.treeLog,n=t.length,r=n>6?6:n,o=0;r>o;o++){var a=50+106*o,s=30;i.friends_news.addChild(new FriendNew(t[o],a,s))}else i.tips.showTips(e.msg)},error:function(e){i.tips.showTips(i.data.otherGardenTs.network_error)}}),i.go_back.addEventListener(egret.TouchEvent.TOUCH_TAP,i.onGoBackTap,i),i}return __extends(t,e),t.prototype.onGoBackTap=function(){this.parent.addChild(Index.Shared()),this.parent.removeChild(this)},t.prototype.showRewardCount=function(e){var t=this;e&&(this.matureTime=e),this.mature_count.visible=!0,this.mature_img.visible=!0;var i=setInterval(function(){if(t.matureTime>0)t.mature_count.text=Common.Shared().secondToTime(t.matureTime),t.matureTime--;else if(clearInterval(i),t.mature_count.visible=!1,t.mature_img.visible=!1,!t.guozishule_mc_1){var e,n,r=void 0,o=void 0;t.treeInfo.level<4?(r=400,o=450,e=n=1.1):t.treeInfo.level>3&&t.treeInfo.level<7?(r=400,o=430,e=n=1.25):t.treeInfo.level>6&&t.treeInfo.level<10?(r=400,o=410,e=n=1.38):(r=375,o=380,e=n=1.5),Common.Shared().mc("guozishule",r,o,null,!0).then(function(i){t.guozishule_mc_1=i,t.guozishule_mc_1.scaleX=e,t.guozishule_mc_1.scaleY=n,t.group_tree.addChild(t.guozishule_mc_1),t.guozishule_mc_1.gotoAndPlay(0,-1),t.guozishule_mc_1.touchEnabled=!0,t.guozishule_mc_1.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onReward,t)})}},999)},t.prototype.onReward=function(e){var t=this;this.wait.show();var i="v1.0/wutong/put_steal",n=new HttpReq;n.POST({url:i,data:{targetUid:this.targetUid},success:function(e){var e=JSON.parse(e);0==e.code?(t.guozishule_mc_1.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onReward,t),t.group_tree.removeChild(t.guozishule_mc_1),t.tips.showTips(t.data.otherGardenTs.snatch+e.data.stealFruit+t.data.otherGardenTs.wutong)):t.tips.showTips(e.msg),t.wait.hide()},error:function(e){t.wait.hide(),t.tips.showTips(t.data.otherGardenTs.network_error)}},e.currentTarget)},t.prototype.onWater=function(e){var t=this;this.wait.show();var i="v1.0/wutong/put_water",n=new HttpReq;n.POST({url:i,data:{targetUid:this.targetUid},success:function(e){var e=JSON.parse(e);0==e.code?Common.Shared().mc("watering",420,590,t.group_tree,!0).then(function(e){t.watering_mc_1=e,t.watering_mc_1.scaleX=1.5,t.watering_mc_1.scaleY=1.5,t.group_tree.addChild(t.watering_mc_1),t.watering_mc_1.gotoAndPlay(0,1),t.ganku_mc_1.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.onWater,t),t.group_tree.removeChild(t.ganku_mc_1)}):t.tips.showTips(e.msg),t.wait.hide()},error:function(e){t.wait.hide(),t.tips.showTips(t.data.otherGardenTs.network_error)}},e.currentTarget)},t.prototype.commonMc=function(e){var t=this;Common.Shared().dbMc(this.ph_detail.genderText+"_main",!0).then(function(i){t.group_mc.removeChildren();var n=i;t.group_mc.addChild(n),n.y=-140,n.x=0,e?(n.animation.play(e,1),n.once(egret.Event.COMPLETE,function(){n.animation.play("abc")},t)):n.animation.play("abc"),t.commonT1=egret.setInterval(function(){n.animation.fadeIn("blink",.3,2,0,"normalGroup")},t,5e3),t.commonT2=egret.setInterval(function(){t.changeSay(),n.animation.fadeIn("wave",.3,1,0,"normalGroup")},t,15e3),n.touchEnabled=!0,t.ph_tap=function(){t.changeSay()}})},t.prototype.stopCommonMc=function(){egret.clearInterval(this.commonT1),egret.clearInterval(this.commonT2)},t.prototype.changeSay=function(e){var t,i=this,n=Common.Shared().getTimeStatus();"n"==n?t=this.dream:(t=this.cute,e&&e.animation.fadeIn("wave",.3,1,0,"normalGroup")),this.chart_content.text=t[Math.floor(Math.random()*t.length)],this.group_tips.height=93+this.chart_content.textHeight,this.group_tips.y=-(360+this.chart_content.textHeight),this.group_tips.visible=!0,0==this.sayTime?(this.sayTime=5,this.sayT=egret.setInterval(function(){i.sayTime>0?i.sayTime--:(i.group_tips.visible=!1,egret.clearInterval(i.sayT))},this,1e3)):this.sayTime=5},t.prototype.phMc=function(e,t){var i=this,n=this.ph_detail.genderText,r="",o=!0,a=0;switch(this.ph_shadow.visible=!0,0==e&&"n"==Common.Shared().getTimeStatus()&&(e=6),e){case 0:t||(t=null),this.commonMc(t);break;case 3:r="on_hatch",this.ph_shadow.visible=!1;break;case 4:r="on_rebirth",this.ph_shadow.visible=!1;break;case 5:r=n+"_ill";break;case 6:r=n+"_sleep",egret.setInterval(function(){i.changeSay()},this,15e3);break;case 7:r=n+"_hungry",a=8e3;break;case 15:r=n+"_baozhedan",a=8e3;break;case 14:o=!1;break;case 16:r=n+"_rebirth_"+this.lang,a=8e3}o&&""!==r?(this.group_mc.removeChildren(),Common.Shared().dbMc(r,!0).then(function(t){switch(e){case 3:t.y=-140,t.x=-1;break;case 4:t.y=-140,t.x=-1;break;case 5:t.y=-140,t.x=12;break;case 6:t.y=-140,t.x=12;break;case 7:t.y=-140,t.x=-1}i.group_mc.addChild(t),a>0?(t.animation.fadeIn(t.animation.animationNames[0],.3,1,0,"normalGroup"),setInterval(function(){t.animation.fadeIn(t.animation.animationNames[0],.3,1,0,"normalGroup")},a)):t.animation.fadeIn(t.animation.animationNames[0],.3,0,0,"normalGroup")})):14==e&&(this.group_mc.addChild(new eui.Image("auction_json.lyz_yw_"+this.lang)),this.group_mc.y=-100)},t}(eui.ItemRenderer);__reflect(OtherGarden.prototype,"OtherGarden");var PropsIntro=function(e){function t(){var t=e.call(this)||this;return t.common=Common.Shared(),t.tips=new Tips,t.wait=new Wait,t.skinName="resource/garden_skin/wutong/PropsIntro.exml",t.data=Main.Shared().lang_config,t.top=0,t.left=0,t.right=0,t.bottom=0,t.btn_use.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onBtnUseClick,t),t.btn_use_1.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onBtnUseClick,t),t.btn_buy.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onBtnBuyClick,t),t.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onBuyCloseClick,t),t.btn_con.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onUseConfrimClick,t),t.btn_hatch.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onBtnHatchTap,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.onBuyCloseClick=function(){this.toolName="",this.intro_text.contains(this.introHtml)&&this.intro_text.removeChild(this.introHtml),this.num=0,this.toolId=0,this.btn_buy.visible=!1,this.btn_use.visible=!1,this.props.visible=!1,Tools.Shared().onShowGoods()},t.prototype.showPropsClick=function(e,t){var i=this;Index.Shared().full_mask.visible=!0,this.key=e,this.toolName="",this.intro_text.contains(this.introHtml)&&this.intro_text.removeChild(this.introHtml),this.num=0,this.toolId=0;var n=Tools.Shared().toolList[e].id;Index.Shared().wait.show();var r=new HttpReq;if(-1==e.indexOf("eggs"))var o="v1.1/wutong/tool/tool_info",a={toolId:n};else var o="v1.1/wutong/tool/egg_info",a={eggId:n};r.GET({url:o,data:a,success:function(e){var e=JSON.parse(e);if(0==e.code){Tools.Shared().toolList[i.key]=e.data.toolInfo,i.toolInfo=Tools.Shared().toolList[i.key],Common.Shared().loadImg(e.data.toolInfo.icon).then(function(e){i.use_prop_img.source=e}),i.toolName=Tools.Shared().toolList[i.key].toolName;var t=Tools.Shared().toolList[i.key].extra;if(i.num=Tools.Shared().toolList[i.key].num,i.toolId=i.toolInfo.id,0==t.length){i.introHtml=Common.Shared().getITextElement(Tools.Shared().toolList[i.key].tips,427,i.intro_text.height,24,0,0),i.group_price.contains(i.priceHtml)&&i.group_price.removeChild(i.priceHtml),i.priceHtml=Common.Shared().getITextElement('<font size="30px" color="#3c2405" face="PingFang SC">'+parseInt(i.toolInfo.price)+'  </font><font size="24px" color="#3c2405" face="PingFang SC">'+i.data.propsIntro.price_units+"</font>",220,30,24,0,0),i.group_price.addChild(i.priceHtml),5==Tools.Shared().toolList[i.key].id||8==Tools.Shared().toolList[i.key].id?i.group_price.visible=!1:i.group_price.visible=!0,i.intro_text.addChild(i.introHtml);var n=i.introHtml.height-133;i.intro_text.height=133+n,i.props.height=680+n,i.intro_tool.height=300+n,i.intro_tool.visible=!0,i.intro_egg.visible=!1,i.toolInfo.isBuy>0?(i.btn_buy.visible=!0,i.btn_use.visible=!0,i.btn_hatch_2.visible=!1,i.btn_con.visible=!1,i.btn_use_1.visible=!1):i.toolInfo.isUse>0?(i.btn_buy.visible=!1,i.btn_use.visible=!1,i.btn_con.visible=!1,i.btn_hatch_2.visible=!1,i.btn_use_1.visible=!0):(i.btn_buy.visible=!1,i.btn_use.visible=!1,i.btn_use_1.visible=!1,i.btn_hatch_2.visible=!1,i.btn_con.visible=!0)}else{2==i.toolInfo.extra.type?(i.hatch_content.text=i.data.propsIntroTs.hatch_2,i.hatch_content_2.text=i.data.propsIntroTs.hatch_2):(i.hatch_content.text=i.data.propsIntroTs.hatch_1,i.hatch_content_2.text=i.data.propsIntroTs.hatch_1),i.egg_group_intro.contains(i.eggIntroHtml)&&i.egg_group_intro.removeChild(i.eggIntroHtml),i.group_price.visible=!1,i.eggIntroHtml=Common.Shared().getITextElement(Tools.Shared().toolList[i.key].tips,430,89,24,0,0),i.egg_group_intro.addChild(i.eggIntroHtml),i.egg_name.text=t.fullName,i.egg_num.text=t.NO;var n=i.eggIntroHtml.height;i.props.height=680,i.intro_egg.height=314,i.intro_egg.visible=!0,i.intro_tool.visible=!1}i.props.visible=!0}else Index.Shared().tips.showTips(e.msg);Index.Shared().wait.hide()},error:function(e){Index.Shared().wait.hide(),Index.Shared().tips.showTips(i.data.propsIntroTs.network_error)}},t)},t.prototype.onBtnUseClick=function(){if(0==this.toolInfo.num)return Index.Shared().tips.showTips(this.data.propsIntroTs.not_enough),!1;this.props.visible=!1;var e=PropsStatus.Shared();e.showProps(this.toolInfo,this.key),Index.Shared().propsStatus=e,Index.Shared().full_mask.visible=!0,Index.Shared().addChildAt(e,-1),Index.Shared().setChildIndex(e,-1)},t.prototype.onBtnBuyClick=function(){this.props.visible=!1;var e=UsePay.Shared();Index.Shared().usePay=e,Index.Shared().full_mask.visible=!0,Index.Shared().addChildAt(e,-1),Index.Shared().setChildIndex(e,-1),e.showPayclick(this.toolInfo,this.key)},t.prototype.onShowProps=function(){this.props.visible=!0,GoPay.Shared().onCloseAgain()},t.prototype.onUseConfrimClick=function(){this.toolName="",this.intro_text.contains(this.introHtml)&&this.intro_text.removeChild(this.introHtml),this.num=0,this.toolId=0,this.btn_buy.visible=!1,this.btn_use.visible=!1,this.btn_use_1.visible=!1,this.props.visible=!1,Tools.Shared().onShowGoods()},t.prototype.onBtnHatchTap=function(e){var t=this,i=new HttpReq,n="v1.1/wutong/tool/tool_info",r={toolId:this.toolInfo.extra.relyToolId};i.GET({url:n,data:r,success:function(e){var e=JSON.parse(e);if(0==e.code){Common.Shared().loadImg(e.data.toolInfo.icon).then(function(e){t.use_prop_img.source=e}),t.introHtml=Common.Shared().getITextElement(e.data.toolInfo.tips,380,t.intro_text.height,24,0,0),t.group_price.contains(t.priceHtml)&&t.group_price.removeChild(t.priceHtml),t.priceHtml=Common.Shared().getITextElement('<font size="30px" color="#3c2405" face="PingFang SC">'+parseInt(e.data.toolInfo.price)+'  </font><font size="24px" color="#3c2405" face="PingFang SC">'+t.data.propsIntro.price_units+"</font>",220,30,24,0,0),t.group_price.addChild(t.priceHtml),5!=Tools.Shared().toolList[t.key].id?t.group_price.visible=!0:t.group_price.visible=!1,t.intro_text.addChild(t.introHtml);var i=t.introHtml.height-133;t.intro_text.height=133+i,t.props.height=680+i,t.intro_tool.height=300+i,t.btn_buy.visible=!1,t.btn_con.visible=!1,t.btn_use.visible=!1,t.btn_use_1.visible=!1,t.btn_hatch_2.visible=!0,t.intro_egg.visible=!1,t.intro_tool.visible=!0,t.props.visible=!0,t.btn_hatch_2.addEventListener(egret.TouchEvent.TOUCH_TAP,t.useHatchTool,t)}else Index.Shared().tips.showTips(e.msg);Index.Shared().wait.hide()},error:function(e){Index.Shared().wait.hide(),Index.Shared().tips.showTips(t.data.propsIntroTs.network_error)}},e.currentTarget)},t.prototype.useHatchTool=function(e){var t=this,i=new HttpReq,n="v1.1/bird/put_hatch_tool_order",r={toolId:this.toolInfo.extra.relyToolId,eggId:this.toolInfo.id};i.POST({url:n,data:r,success:function(e){var e=JSON.parse(e);if(0==e.code){var i={orderId:e.data.orderId,payOrder:e.data.payOrder,payType:e.data.payType,pinCode:""};Common.Shared().secondPwd(t.afterHatchPay,null,!1,i)}else Index.Shared().tips.showTips(e.msg);Index.Shared().wait.hide()},error:function(e){Index.Shared().wait.hide(),Index.Shared().tips.showTips(t.data.propsIntroTs.network_error)}},e.currentTarget)},t.prototype.afterHatchPay=function(e,i){var n=this;Index.Shared().wait.show();var r=new HttpReq,o="v1.1/pay/confirm_pay";i.pinCode=hex_md5(e),r.POST({url:o,data:i,success:function(e){var e=JSON.parse(e);if(0==e.code){Index.Shared().wait.hide(),t.Shared().onBuyCloseClick(),Tools.Shared().onCloseTools(),Index.Shared().ph_detail={id:t.Shared().toolInfo.id,type:1};var i=1==t.Shared().toolInfo.extra.type?"on_hatch":"on_rebirth";Common.Shared().dbMc(i,!0).then(function(e){var t=e;t.y=-140,t.x=-1,Index.Shared().group_mc.addChild(t),t.animation.fadeIn(t.animation.animationNames[0],.3,0,0,"normalGroup")})}else Index.Shared().tips.showTips(e.msg);Index.Shared().wait.hide()},error:function(e){Index.Shared().wait.hide(),Index.Shared().tips.showTips(n.data.propsIntroTs.network_error)}})},t}(eui.ItemRenderer);__reflect(PropsIntro.prototype,"PropsIntro");var PropsStatus=function(e){function t(){var t=e.call(this)||this;return t.commom=Common.Shared(),t.skinName="resource/garden_skin/wutong/PropsStatus.exml",t.data=Main.Shared().lang_config,t.top=0,t.left=0,t.right=0,t.bottom=0,t.use_close.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onClosePropsClick,t),t.use_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onUseBtnClick,t),t.use_pay_add.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPayAddClick,t),t.use_pay_dec.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPayDecClick,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.onClosePropsClick=function(){this.closeProps(),Index.Shared().full_mask.visible=!0,Index.Shared().addChildAt(PropsIntro.Shared(),-1)},t.prototype.showProps=function(e,t){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){switch(n.label){case 0:return this.key=t,this.toolInfo=e,this.toolId=e.id,this.num=e.num,UsePay.Shared().theNum?this.num=UsePay.Shared().theNum:this.num=e.num,1==e.isBatch?(this.use_pay.visible=!0,this.use_pay_num.contains(this.usePayinput)&&this.use_pay_num.removeChild(this.usePayinput),this.usePayinput=new UsePayInput(this.num),this.use_num=parseInt(this.usePayinput.text_type.text),this.use_pay_num.addChild(this.usePayinput),this.use_prop.height=570):(this.use_pay.visible=!1,this.use_prop.height=520),this.num_text.text=Tools.Shared().toolList[this.key].num,i=this.use_prop_img,[4,Common.Shared().loadImg(e.icon)];case 1:return i.source=n.sent(),this.use_prop.visible=!0,[2]}})})},t.prototype.closeProps=function(){this.use_prop.visible=!1,PropsIntro.Shared().onShowProps(),this.use_pay_num.contains(this.usePayinput)&&this.use_pay_num.removeChild(this.usePayinput)},t.prototype.onPayAddClick=function(){this.usePayinput.addClick()},t.prototype.onPayDecClick=function(){this.usePayinput.decClick()},t.prototype.onUseBtnClick=function(e){var i=this;if(0==this.num)return Index.Shared().tips.showTips(this.data.propsStatusTs.not_enough),!1;var n="";if(19==this.toolId)Index.Shared().removeChild(t.Shared()),Index.Shared().contains(Rename.Shared())||Index.Shared().addChild(Rename.Shared()),Index.Shared().full_mask.visible=!1,Rename.Shared().onShowRename();else{switch(this.toolId){case 1:n="v1.0/wutong/use_fert";break;
case 2:n="v1.0/wutong/zap_worm";break;case 3:n="v1.0/wutong/use_ripener";break;case 4:n="v1.0/wutong/use_boot_cap";break;case 5:n="v1.1/bird/tool_use_fruit";break;case 6:n="v1.1/bird/tool_use_toy";break;case 7:n="v1.1/bird/tool_use_cold";break;case 8:n="v1.1/bird/tool_use_water";break;default:return!1}Index.Shared().wait.show();var r=new HttpReq,o=1;1==this.toolInfo.isBatch&&(o=Number(this.usePayinput.text_type.text)),r.POST({url:n,data:{num:o,toolId:t.Shared().toolId},success:function(e){var e=JSON.parse(e);if(0==e.code){i.closeProps(),PropsIntro.Shared().onBuyCloseClick(),Tools.Shared().closeTools();var t=Tools.Shared().toolList[i.key].num;switch(Tools.Shared().toolList[i.key].num=t-o,Tools.Shared().toolArr[i.key].list_num.text="X"+(t-o),i.toolId){case 1:i.commom.mc("fertilizer",440,600,Index.Shared().group_tree,!0).then(function(t){i.use_mc=t,i.use_mc.scaleX=1.5,i.use_mc.scaleY=1.5,Index.Shared().group_tree.addChild(i.use_mc),i.use_mc.gotoAndPlay(0,1),Index.Shared().matureTime<=0&&Common.Shared().loadImg(Index.Shared().fruitUrl+Common.Shared().getImgByStatus(3,Index.Shared().treeInfo.level,"f")).then(function(e){Index.Shared().fruit.source=e}),i.use_mc.addEventListener(egret.Event.COMPLETE,function(t){Index.Shared().showRewardCount(e.data.matureTime);var n=e.data.xp;Index.Shared().littleTips("+"+e.data.xp+i.data.propsStatusTs.life_val),Index.Shared().wutongGrow(n)},i.use_mc)});break;case 2:var n,r,a=void 0,s=void 0;Index.Shared().treeInfo.level<4?(a=285,s=250,n=r=1.5):Index.Shared().treeInfo.level>3&&Index.Shared().treeInfo.level<7?(a=285,s=190,n=r=1.75):Index.Shared().treeInfo.level>6&&Index.Shared().treeInfo.level<10?(a=295,s=135,n=r=1.85):(a=310,s=12,n=r=2),i.commom.mc("pesticides",a,s,Index.Shared().group_tree,!0).then(function(e){i.use_mc=e,i.use_mc.scaleX=n,i.use_mc.scaleY=r,Index.Shared().group_tree.removeChild(Index.Shared().worm_mc_1),Index.Shared().group_tree.addChild(i.use_mc),i.use_mc.gotoAndPlay(0,1)});break;case 3:i.commom.mc("potion",375,600,Index.Shared().group_tree,!0).then(function(t){i.use_mc=t,i.use_mc.scaleX=1.5,i.use_mc.scaleY=1.5,Index.Shared().matureTime=e.data.matureTime,Index.Shared().group_tree.addChild(i.use_mc),i.use_mc.gotoAndPlay(0,1)});break;case 4:Index.Shared().showAntiThef(86400);break;case 5:Index.Shared().ph_detail,Index.Shared().littleTips("+"+e.data.lifeValue+i.data.propsStatusTs.life_val),Index.Shared().eatMc(5,e.data.statusId);break;case 7:e.data.lifeValue>0&&Index.Shared().littleTips("-"+e.data.lifeValue+i.data.propsStatusTs.life_val),Index.Shared().eatMc(7,e.data.statusId,e.data.lifeValue);break;case 8:Index.Shared().littleTips("+"+e.data.lifeValue+i.data.propsStatusTs.life_val),Index.Shared().eatMc(8,e.data.statusId)}}else 666==e.code?(i.closeProps(),PropsIntro.Shared().onBuyCloseClick(),Tools.Shared().closeTools(),Index.Shared().changeSay(null,i.data.propsStatusTs.full)):(i.closeProps(),PropsIntro.Shared().onBuyCloseClick(),Tools.Shared().closeTools(),Index.Shared().tips.showTips(e.msg));Index.Shared().wait.hide()},error:function(e){Index.Shared().wait.hide(),Index.Shared().tips.showTips(i.data.propsStatusTs.network_error)}},e.currentTarget)}},t}(eui.ItemRenderer);__reflect(PropsStatus.prototype,"PropsStatus");var Rename=function(e){function t(){var t=e.call(this)||this;return t.top=0,t.left=0,t.right=0,t.bottom=0,t.skinName="resource/garden_skin/wutong/Rename.exml",t.data=Main.Shared().lang_config,t.btn_rename.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onRenameBtn,t),t.btn_close_rename.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseShowRename,t),t.btn_close_enter.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseRename,t),t.btn_close_tip.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseTip,t),t.name_txt.addEventListener(egret.Event.CHANGE,t.onShownegaTip,t),t.btn_enter_confim.addEventListener(egret.TouchEvent.TOUCH_TAP,t.btnEnterConfim,t),t.btn_tip_success.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onSendRequest,t),t.btn_tip_later.addEventListener(egret.TouchEvent.TOUCH_TAP,t.seeULater,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.onShowRename=function(){var e=this,t=new HttpReq;Index.Shared().wait.show();var i="v1.1/bird/name/bird_info";t.GET({url:i,data:{},success:function(t){var t=JSON.parse(t);if(0==t.code){Index.Shared().full_mask.visible=!0,e.rename_group.visible=!0;var i=t.data.birdInfo;e.ph_num.text=i.NO,e.ph_name.text=i.name,e.g_gender.source=Common.Shared().getPh(i.level,i.gender),e.g_text.text=i.title,e.ph_img.source=Common.Shared().getPhImg(2,i.gender),e.descrip_txt.text="*"+t.data.description}else Index.Shared().tips.showTips(t.msg);Index.Shared().wait.hide()},error:function(t){Index.Shared().wait.hide(),Index.Shared().tips.showTips(e.data.indexTs.network_error)}})},t.prototype.onRenameBtn=function(){this.rename_group.visible=!1,this.enter_group.visible=!0},t.prototype.onUseProps=function(){this.enter_group.visible=!1,this.tip_group.visible=!0},t.prototype.onShownegaTip=function(){var e=this.name_txt.text,t=this.subString(e);if(t>12)this.status_txt.text=this.data.rename.num_out,this.btn_enter_confim.touchEnabled=!1,this.btn_enter_confim.touchChildren=!1;else{var i=this.validateSpecial(e);i?(this.status_txt.text="",this.btn_enter_confim.touchEnabled=!0,this.btn_enter_confim.touchChildren=!0):(this.status_txt.text=this.data.rename.special,this.btn_enter_confim.touchEnabled=!1,this.btn_enter_confim.touchChildren=!1)}},t.prototype.validateSpecial=function(e){var t=new RegExp("[`~!@#$^&*()=|{}':;',\\[\\].<>/?~！@#￥……&*（）——|{}【】‘；：”“'。，、？]");return t.exec(e)?!1:!0},t.prototype.subString=function(e){return null==e?0:("string"!=typeof e&&(e+=""),e.replace(/[^\x00-\xff]/g,"01").length)},t.prototype.btnEnterConfim=function(){this.enter_group.visible=!1,this.tip_group.visible=!0},t.prototype.onSendRequest=function(){var e=this,i=new HttpReq;Index.Shared().wait.show();var n="v1.1/bird/name/bird_rename";i.POST({url:n,data:{name:t.Shared().name_txt.text},success:function(i){var i=JSON.parse(i);0==i.code?(Index.Shared().tips.showTips(e.data.rename.renamed),t.Shared().name_txt.text="",t.Shared().onCloseShowRename()):Index.Shared().tips.showTips(i.msg),Index.Shared().wait.hide()},error:function(t){Index.Shared().wait.hide(),Index.Shared().tips.showTips(e.data.indexTs.network_error)}})},t.prototype.seeULater=function(){this.onCloseShowRename(),this.name_txt.text=""},t.prototype.onCloseShowRename=function(){Index.Shared().full_mask.visible=!1,this.rename_group.visible=!1,this.enter_group.visible=!1,this.tip_group.visible=!1},t.prototype.onCloseRename=function(){this.name_txt.text="",this.enter_group.visible=!1,this.rename_group.visible=!0},t.prototype.onCloseTip=function(){this.tip_group.visible=!1,this.enter_group.visible=!0},t}(eui.ItemRenderer);__reflect(Rename.prototype,"Rename");var ScrollerDynamic=function(e){function t(t,i){var n=e.call(this)||this;return n.list=new eui.List,n.is_need_more=0,n.lastId=0,n.skinName="resource/garden_skin/wutong/ScrollerDynamic.exml",n.langData=Main.Shared().lang_config,n.list.itemRenderer=DynamicList,n.collection=t,n.lastId=i,n.list.dataProvider=new eui.ArrayCollection(n.collection),n.scroller_content.viewport=n.list,n.scroller_content.addEventListener(eui.UIEvent.CHANGE,n.moveHandler,n),n.scroller_content.addEventListener(eui.UIEvent.CHANGE_END,n.outHandler,n),n}return __extends(t,e),t.Shared=function(e,i){return this.shared||(this.shared=new t(e,i)),this.shared},t.prototype.moveHandler=function(e){this.scroller_content.viewport.scrollV>this.scroller_content.viewport.contentHeight-this.scroller_content.viewport.height+40&&(this.is_need_more>-1?this.is_need_more=1:Index.Shared().tips.showTips("没有更多了！"))},t.prototype.outHandler=function(e){this.is_need_more>0&&(this.is_need_more=0,this.loreMore())},t.prototype.loreMore=function(){var e=this;Index.Shared().wait.show();var t=new HttpReq,i="v1.0/wutong/my_message";t.GET({url:i,data:{lastId:this.lastId},success:function(t){var t=JSON.parse(t);if(0==t.code){var i=t.data.treeLog;if(i.length>0){for(var n=0;n<i.length;n++)Index.Shared().DynamicDateArr[i[n].date]?i[n].date="":Index.Shared().DynamicDateArr[i[n].date]=!0,e.collection.push(i[n]);e.lastId=i[i.length-1].id}else Index.Shared().tips.showTips(e.langData.scrollerDynamicTs.no_more),e.is_need_more=-1}else Index.Shared().tips.showTips(t.msg);Index.Shared().wait.hide()},error:function(){Index.Shared().wait.hide(),Index.Shared().tips.showTips(e.langData.scrollerDynamicTs.network_error)}})},t}(eui.Scroller);__reflect(ScrollerDynamic.prototype,"ScrollerDynamic");var ScrollerFruit=function(e){function t(t,i){var n=e.call(this)||this;return n.list=new eui.List,n.is_need_more=0,n.lastId=0,n.skinName="resource/garden_skin/wutong/ScrollerFruit.exml",n.langData=Main.Shared().lang_config,n.list.itemRenderer=FruitList,n.list.useVirtualLayout=!1,n.collection=t,n.lastId=i,n.list.dataProvider=new eui.ArrayCollection(n.collection),n.scroller_content.viewport=n.list,n.scroller_content.addEventListener(eui.UIEvent.CHANGE,n.moveHandler,n),n.scroller_content.addEventListener(eui.UIEvent.CHANGE_END,n.outHandler,n),n}return __extends(t,e),t.Shared=function(e,i){return this.shared||(this.shared=new t(e,i)),this.shared},t.prototype.moveHandler=function(e){this.scroller_content.viewport.scrollV>this.scroller_content.viewport.contentHeight-this.scroller_content.viewport.height+40&&(this.is_need_more>-1?this.is_need_more=1:Index.Shared().tips.showTips(this.langData.scrollerFruitTs.no_more))},t.prototype.outHandler=function(e){this.is_need_more>0&&(this.is_need_more=0,this.loreMore())},t.prototype.loreMore=function(){var e=this;Index.Shared().wait.show();var t=new HttpReq,i="v1.0/wutong/list_fruit";t.GET({url:i,data:{lastId:this.lastId},success:function(t){var t=JSON.parse(t);if(0==t.code){var i=t.data.fruitList;if(i.length>0){for(var n=0;n<i.length;n++)e.collection.push(i[n]);e.lastId=i[i.length-1].id}else Index.Shared().tips.showTips(e.langData.scrollerFruitTs.no_more),e.is_need_more=-1}else Index.Shared().tips.showTips(t.msg);Index.Shared().wait.hide()},error:function(){Index.Shared().wait.hide(),Index.Shared().tips.showTips(e.langData.scrollerFruitTs.network_error)}})},t}(eui.Scroller);__reflect(ScrollerFruit.prototype,"ScrollerFruit");var ScrollerInteractive=function(e){function t(t,i){var n=e.call(this)||this;return n.list=new eui.List,n.is_need_more=0,n.lastId=0,n.skinName="resource/garden_skin/wutong/ScrollerInteractive.exml",n.langData=Main.Shared().lang_config,n.list.itemRenderer=InteractiveList,n.collection=t,n.lastId=i,n.list.dataProvider=new eui.ArrayCollection(n.collection),n.list.useVirtualLayout=!1,n.scroller_interactive.viewport=n.list,n.scroller_interactive.addEventListener(eui.UIEvent.CHANGE,n.moveHandler,n),n.scroller_interactive.addEventListener(eui.UIEvent.CHANGE_END,n.outHandler,n),n}return __extends(t,e),t.Shared=function(e,i){return this.shared||(this.shared=new t(e,i)),this.shared},t.prototype.moveHandler=function(e){this.scroller_interactive.viewport.scrollV>this.scroller_interactive.viewport.contentHeight-this.scroller_interactive.viewport.height+40&&(this.is_need_more>-1?this.is_need_more=1:Index.Shared().tips.showTips(this.langData.scrollerInteractiveTs.no_more))},t.prototype.outHandler=function(e){this.is_need_more>0&&(this.is_need_more=0,this.loreMore())},t.prototype.loreMore=function(){var e=this;Index.Shared().wait.show();var t=new HttpReq,i="v1.0/wutong/list_friend";t.GET({url:i,data:{lastId:this.lastId},success:function(t){var t=JSON.parse(t);if(0==t.code){var i=t.data.treeInfo;if(i.length>0){for(var n=0;n<i.length;n++)e.collection.push(i[n]);e.lastId=i[i.length-1].id}else Index.Shared().tips.showTips(e.langData.scrollerInteractiveTs.no_more),e.is_need_more=-1}else Index.Shared().tips.showTips(t.msg);Index.Shared().wait.hide()},error:function(){Index.Shared().wait.hide(),Index.Shared().tips.showTips(e.langData.scrollerInteractiveTs.network_error)}})},t}(eui.Scroller);__reflect(ScrollerInteractive.prototype,"ScrollerInteractive");var ScrollerNews=function(e){function t(t,i){var n=e.call(this)||this;return n.list=new eui.List,n.is_need_more=0,n.lastId=0,n.skinName="resource/garden_skin/wutong/ScrollerNews.exml",n.langData=Main.Shared().lang_config,n.list.itemRenderer=NewsList,n.collection=t,n.lastId=i,n.list.dataProvider=new eui.ArrayCollection(n.collection),n.scroller_news.viewport=n.list,n.scroller_news.addEventListener(eui.UIEvent.CHANGE,n.moveHandler,n),n.scroller_news.addEventListener(eui.UIEvent.CHANGE_END,n.outHandler,n),n}return __extends(t,e),t.Shared=function(e,i){return this.shared||(this.shared=new t(e,i)),this.shared},t.prototype.moveHandler=function(e){this.scroller_news.viewport.scrollV>this.scroller_news.viewport.contentHeight-this.scroller_news.viewport.height+40&&(this.is_need_more>-1?this.is_need_more=1:Index.Shared().tips.showTips(this.langData.scrollerNewsTs.no_more))},t.prototype.outHandler=function(e){this.is_need_more>0&&(this.is_need_more=0,this.loreMore())},t.prototype.loreMore=function(){var e=this;Index.Shared().wait.show();var t=new HttpReq,i="v1.0/wutong/be_message";t.GET({url:i,data:{lastId:this.lastId},success:function(t){var t=JSON.parse(t);if(0==t.code){var i=t.data.treeLog;if(i.length>0){for(var n=0;n<i.length;n++)Index.Shared().DynamicDateArr[i[n].date]?i[n].date="":Index.Shared().DynamicDateArr[i[n].date]=!0,e.collection.push(i[n]);e.lastId=i[i.length-1].id}else Index.Shared().tips.showTips(e.langData.scrollerNewsTs.no_more),e.is_need_more=-1}else Index.Shared().tips.showTips(t.msg);Index.Shared().wait.hide()},error:function(){Index.Shared().wait.hide(),Index.Shared().tips.showTips(e.langData.scrollerNewsTs.network_error)}})},t}(eui.Scroller);__reflect(ScrollerNews.prototype,"ScrollerNews");var SecondPassWord=function(e){function t(t,i){var n=e.call(this)||this;return n.skinName="resource/garden_skin/wutong/SecondPassWord.exml",n.data=Main.Shared().lang_config,n.top=0,n.left=0,n.right=0,n.bottom=0,n.text_input.inputType=egret.TextFieldInputType.TEL,n.text_input.displayAsPassword=!0,n.text_input.maxChars=6,n.afterPwd=t,n.afterData=i?i:null,n.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,n.onCloseSecondWord,n),n.text_input.addEventListener(egret.Event.CHANGE,n.onInput,n),n}return __extends(t,e),t.prototype.onCloseSecondWord=function(e){e=void 0===e?!0:!1,e&&(this.target.visible=!0);for(var t=this.show_input.$children,i=0;6>i;i++)t[i].text="";this.text_input.text="",this.secondPassWord.visible=!1,Index.Shared().full_mask.visible=!1},t.prototype.onShowSecondWord=function(e){this.target=e,this.target.visible=!1,this.secondPassWord.visible=!0},t.prototype.onInput=function(){for(var e=this.show_input.$children,t=this.text_input.text.trim(),i=t.length,n=0;i>n;n++)e[n].text="●";for(var r=0;r<e.length;r++)r>=i&&(e[r].text="");6==i&&this.afterPwd(t,this.afterData)},t}(eui.ItemRenderer);__reflect(SecondPassWord.prototype,"SecondPassWord");var StaAndDyn=function(e){function t(){var t=e.call(this)||this;return t.empty=new Empty,t.skinName="resource/garden_skin/wutong/StaAndDyn.exml",t.data=Main.Shared().lang_config,t.top=0,t.left=0,t.right=0,t.bottom=0,t.fruit.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onFruitList,t),t.dynamic.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onDynamicList,t),t.btn_close_tree.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseGroup,t),t.empty.onShowEmpty(),t.content_list.addChild(t.empty),t}return __extends(t,e),t.Shared=function(){return null==this.share&&(this.share=new t),this.share},t.prototype.onFruitList=function(){var e=this;this.sta_text.bold=!0,this.sta_rect.visible=!0,this.dyn_rect.visible=!1,this.dyn_text.bold=!1,this.content_list.contains(this.dynamicScroller)&&this.content_list.removeChild(this.dynamicScroller),this.content_list.contains(this.fruitScroller)&&this.content_list.removeChild(this.fruitScroller),this.content_list.contains(this.empty)&&this.content_list.removeChild(this.empty),Index.Shared().wait.show();var t=new HttpReq,i="v1.0/wutong/list_fruit";t.GET({url:i,data:{},success:function(t){var t=JSON.parse(t);if(0==t.code){var i=t.data.fruitList;i.length>0?(e.fruitScroller=new ScrollerFruit(i,i[i.length-1]),e.content_list.addChild(e.fruitScroller)):(e.empty.onShowEmpty(),e.empty.empty_text.text=e.data.staAndDynTs.no_fertilizer,e.empty.horizontalCenter=0,e.content_list.addChild(e.empty))}else Index.Shared().tips.showTips(t.msg);Index.Shared().wait.hide()},error:function(){Index.Shared().wait.hide(),Index.Shared().tips.showTips(e.data.staAndDynTs.network_error)}})},t.prototype.onDynamicList=function(){var e=this;Index.Shared().DynamicDateArr=[],this.dyn_text.bold=!0,this.sta_rect.visible=!1,this.dyn_rect.visible=!0,this.sta_text.bold=!1,this.content_list.contains(this.dynamicScroller)&&this.content_list.removeChild(this.dynamicScroller),this.content_list.contains(this.fruitScroller)&&this.content_list.removeChild(this.fruitScroller),this.content_list.contains(this.empty)&&this.content_list.removeChild(this.empty),Index.Shared().wait.show();var t=new HttpReq,i="v1.0/wutong/my_message";t.GET({url:i,data:{},success:function(t){var t=JSON.parse(t);if(0==t.code){var i=t.data.treeLog;if(i.length>0){for(var n=0;n<i.length;n++)Index.Shared().DynamicDateArr[i[n].date]?i[n].date="":Index.Shared().DynamicDateArr[i[n].date]=!0;e.dynamicScroller=new ScrollerDynamic(i,i[i.length-1].id),e.content_list.addChild(e.dynamicScroller)}else e.empty.onShowEmpty(),e.empty.empty_text.text=e.data.staAndDynTs.no_dynamic,e.empty.horizontalCenter=0,e.content_list.addChild(e.empty)}Index.Shared().wait.hide()},error:function(){Index.Shared().wait.hide(),Index.Shared().tips.showTips(e.data.staAndDynTs.network_error)}})},t.prototype.onShowStaAndDyn=function(){this.tree.visible=!0},t.prototype.onCloseGroup=function(){this.tree.visible=!1,Index.Shared().full_mask.visible=!1},t.share=null,t}(eui.ItemRenderer);__reflect(StaAndDyn.prototype,"StaAndDyn");var Tips=function(e){function t(){var t=e.call(this)||this;return t.right=0,t.left=0,t.top=0,t.bottom=0,t.data=Main.Shared().lang_config,t.skinName="resource/garden_skin/wutong/Tips.exml",t.tips_close.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onTipsCloseTap,t),t}return __extends(t,e),t.prototype.onTipsCloseTap=function(e){this.closeTips()},t.prototype.showTips=function(e){this.parent.setChildIndex(this,-1),this.full_mask.visible=!0,this.tips_text.text=e,this.group_tips.visible=!0},t.prototype.closeTips=function(){this.full_mask.visible=!1,this.tips_text.text="",this.group_tips.visible=!1},t}(eui.ItemRenderer);__reflect(Tips.prototype,"Tips");var Tools=function(e){function t(){var t=e.call(this)||this;return t.toolList=[],t.toolArr=[],t.toolsList=new eui.DataGroup,t.skinName="resource/garden_skin/wutong/ToolsSkin.exml",t.data=Main.Shared().lang_config,t.top=0,t.left=0,t.right=0,t.bottom=0,t.btn_close_interaction.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onCloseTools,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.onCloseTools=function(){this.closeTools(),Index.Shared().full_mask.visible=!1},t.prototype.showTools=function(){var e=this;this.group_egg.removeChildren(),this.group_inter.visible=!0,Index.Shared().wait.show();var t=new HttpReq,i="v1.1/wutong/tool_list";t.GET({url:i,data:{},success:function(t){var t=JSON.parse(t);if(0==t.code){t.data.toolList.eggs.length<1?e.no_egg.visible=!0:e.no_egg.visible=!1;var i=t.data.toolList,n=0,r=new eui.List,o=[];r.itemRenderer=ToolsList,r.dataProvider=new eui.ArrayCollection(o),r.x=25;var a=new eui.TileLayout;a.horizontalGap=20,a.verticalGap=25,a.requestedColumnCount=4,r.layout=a;for(var s in i){var h=new eui.Image("auction_json.shutiao");h.x=25,h.y=270*n;var d=new eui.Label;switch(d.textColor=6178313,d.bold=!0,d.x=45,d.y=270*n,s){case"tree":d.text=e.data.toolsTs.tree;break;case"bird":d.text=e.data.toolsTs.bird;break;case"eggs":d.text=e.data.toolsTs.egg}e.group_tool.addChild(h),e.group_tool.addChild(d);for(var l=0;l<i[s].length;l++){e.toolList[s+i[s][l].id]=i[s][l];var c=l%4*130+25;if(n>1)i[s][l].key=s+i[s][l].id,o.push(i[s][l]);else{var u=50+270*n,p=new ToolsList(s+i[s][l].id,c,u);e.group_tool.addChild(p),e.toolArr[s+i[s][l].id]=p}}n++}e.group_egg.height=200*Math.ceil(l/4),e.group_egg.addChild(r),e.group_egg.cacheAsBitmap=!0,e.group_tool.cacheAsBitmap=!0}else Index.Shared().tips.showTips(t.msg);Index.Shared().wait.hide()},error:function(t){Index.Shared().wait.hide(),Index.Shared().tips.showTips(e.data.toolsTs.network_error)}},Index.Shared().goods)},t.prototype.closeTools=function(){this.group_inter.visible=!1,Index.Shared().full_mask.visible=!1},t.prototype.onShowGoods=function(){Index.Shared().full_mask.visible=!0,this.group_inter.visible=!0,Index.Shared().addChildAt(t.Shared(),-1),Index.Shared().setChildIndex(t.Shared(),-1)},t}(eui.ItemRenderer);__reflect(Tools.prototype,"Tools");var ToolsIcon=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/wutong/ToolsIcon.exml",t.data=Main.Shared().lang_config,t}return __extends(t,e),t}(eui.ItemRenderer);__reflect(ToolsIcon.prototype,"ToolsIcon");var ToolsList=function(e){function t(t,i,n){var r=e.call(this)||this;return r.skinName="resource/garden_skin/wutong/ToolsList.exml",t&&(r.x=i?i:0,r.y=n?n:0,r.list_name.text=Tools.Shared().toolList[t].toolName,r.list_num.text="X"+Tools.Shared().toolList[t].num,r.num=Tools.Shared().toolList[t].num,r.id=Tools.Shared().toolList[t].id,r.key=t,r.price=Tools.Shared().toolList[t].mgcoin,r.isBuy=Tools.Shared().toolList[t].isBuy,r.isBatch=Tools.Shared().toolList[t].isBatch,Common.Shared().loadImg(Tools.Shared().toolList[t].icon).then(function(e){r.list_image.source=e})),r.toolsList.addEventListener(egret.TouchEvent.TOUCH_TAP,r.onListnameClick,r),r}return __extends(t,e),t.prototype.onListnameClick=function(e){Tools.Shared().onCloseTools();var t=PropsIntro.Shared();console.log(this.key),t.showPropsClick(this.key,e.currentTarget),Index.Shared().propsIntro=t,Index.Shared().full_mask.visible=!0,Index.Shared().addChildAt(t,-1)},t.prototype.dataChanged=function(){var e=this;this.list_name.text=this.data.toolName,this.list_num.text="X"+this.data.num,this.num=this.data.num,this.id=this.data.id,this.key=this.data.key,this.price=this.data.mgcoin,this.isBuy=this.data.isBuy,this.isBatch=this.data.isBatch,Common.Shared().loadImg(this.data.icon).then(function(t){e.list_image.source=t}),Tools.Shared().toolArr[this.data.key]=this},t}(eui.ItemRenderer);__reflect(ToolsList.prototype,"ToolsList");var UsePay=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/wutong/UsePay.exml",t.data=Main.Shared().lang_config,t.top=0,t.left=0,t.right=0,t.bottom=0,t.usePayinput||(t.usePayinput=new UsePayInput,t.use_pay_num.addChild(t.usePayinput)),t.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onBtnCloseClick,t),t.use_pay_add.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPayAddClick,t),t.use_pay_dec.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPayDecClick,t),t.use_pay_dete.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onBuySuccess,t),t.usePayinput.text_type.addEventListener(egret.TouchEvent.CHANGE,t.reCount,t),t.usePayinput.text_type.addEventListener(egret.Event.FOCUS_OUT,t.reCount,t),t}return __extends(t,e),t.Shared=function(){return null==this.shared&&(this.shared=new t),this.shared},t.prototype.onBtnCloseClick=function(){this.use_pay.visible=!1,this.theNum=null,this.usePayinput.text_type.text="1",Index.Shared().full_mask.visible=!0,PropsIntro.Shared().onShowProps(),Index.Shared().addChildAt(PropsIntro.Shared(),-1)},t.prototype.showPayclick=function(e,t){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){switch(n.label){case 0:return this.key=t,this.toolInfo=e,i=this.use_pay_img,[4,Common.Shared().loadImg(this.toolInfo.icon)];case 1:return i.source=n.sent(),this.reCount(),this.use_pay.visible=!0,[2]}})})},t.prototype.onPayAddClick=function(){this.usePayinput.addClick(),this.reCount()},t.prototype.onPayDecClick=function(){this.usePayinput.decClick(),this.reCount()},t.prototype.onBuySuccess=function(e){var t=this,i=parseInt(this.usePayinput.text_type.text);Index.Shared().wait.show();var n=new HttpReq,r="v1.1/wutong/tool/put_order";n.POST({url:r,data:{toolId:this.toolInfo.id,num:i},success:function(e){var e=JSON.parse(e);if(0==e.code){var n=e.data,r=Tools.Shared().toolList[t.key].num;t.theNum=r+i,Common.Shared().secondPwd(t.afterPwd,t.use_pay,!0,n)}else 111==e.code?Index.Shared().tips.showTips(e.msg):(GoPay.Shared().onShowGoPay(),Index.Shared().full_mask.visible=!0,Index.Shared().addChildAt(GoPay.Shared(),-1));Index.Shared().wait.hide()},error:function(e){Index.Shared().wait.hide(),Index.Shared().tips.showTips(t.data.usePayTs.network_error)}},e.currentTarget)},t.prototype.afterPwd=function(e,i){var n=this;Index.Shared().wait.show();var r=hex_md5(e),o=new HttpReq,a="v1.1/pay/confirm_pay";o.POST({url:a,data:{orderId:i.orderId,payOrder:i.payOrder,pinCode:r,payType:i.payType},success:function(e){var e=JSON.parse(e);if(0==e.code)Tools.Shared().toolList[t.Shared().key].num=t.Shared().theNum,Tools.Shared().toolArr[t.Shared().key].list_num.text="X"+t.Shared().theNum,t.Shared().onBtnCloseClick(),PropsIntro.Shared().onBtnUseClick();else if(335==e.code){var i=e.msg+n.data.usePayTs.go_pay,r=Common.Shared().getITextElement(i,478,240,30,50,80);Index.Shared().mgCoin.addChild(r)}else Index.Shared().tips.showTips(e.msg);Index.Shared().wait.hide()},error:function(e){Index.Shared().wait.hide(),Index.Shared().tips.showTips(n.data.usePayTs.network_error)}})},t.prototype.reCount=function(){""==this.usePayinput.text_type.text?this.use_pay_conf.text=this.data.usePayTs.if_spend+"0"+this.data.usePayTs.to_go_pay:this.use_pay_conf.text=this.data.usePayTs.if_spend+parseInt(this.usePayinput.text_type.text)*parseInt(this.toolInfo.price)+this.data.usePayTs.to_go_pay},t.prototype.onHidden=function(){this.use_pay.visible=!1},t.prototype.onShow=function(){this.use_pay.visible=!0},t}(eui.ItemRenderer);__reflect(UsePay.prototype,"UsePay");var UsePayInput=function(e){function t(t){var i=e.call(this)||this;return i.skinName="resource/garden_skin/wutong/UsePayInput.exml",i.data=Main.Shared().lang_config,i.text_type.maxChars=3,i.text_type.text="1",i.text_type.inputType=egret.TextFieldInputType.TEL,i.text_type.restrict="0-9",i.text_type.textColor=3941381,i.text_type.addEventListener(egret.Event.FOCUS_OUT,i.LeaceFocus,i),i.maxNum=t?t:999,i.isSetMax=t?!0:!1,i}return __extends(t,e),t.prototype.addClick=function(){var e=parseInt(this.text_type.text);e<this.maxNum?e++:e=this.maxNum,this.text_type.text=String(e)},t.prototype.decClick=function(){var e=parseInt(this.text_type.text);1>=e?e=1:e--,this.text_type.text=String(e)},t.prototype.LeaceFocus=function(){this.text_type.text=""==this.text_type.text?"1":this.text_type.text,this.text_type.text=Number(this.text_type.text)<1?"1":this.text_type.text;var e=parseInt(this.text_type.text);e=e<this.maxNum?e:this.maxNum,this.text_type.text=String(e)},t}(eui.ItemRenderer);__reflect(UsePayInput.prototype,"UsePayInput");var Wait=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/garden_skin/wutong/Wait.exml",t.data=Main.Shared().lang_config,t.right=0,t.left=0,t.top=0,t.bottom=0,t}return __extends(t,e),t.prototype.show=function(){var e=this;this.parent.setChildIndex(this,-1),this.waitting||Common.Shared().mc("loading",100,100,null,!0).then(function(t){e.waitting=t,e.waitting.gotoAndPlay(0,-1),e.group_mc.addChild(e.waitting)}),this.full_mask.visible=!0,this.group_wait.visible=!0},t.prototype.hide=function(){this.full_mask.visible=!1,this.group_wait.visible=!1},t}(eui.ItemRenderer);__reflect(Wait.prototype,"Wait");